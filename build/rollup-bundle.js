var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var n=e((function(t,e){t.exports=function(){var t=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},e=v,n=a,o=c,r=l,i=y,s=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(t){for(var e,n=[],o=0,r=0,i="";null!=(e=s.exec(t));){var a=e[0],c=e[1],l=e.index;if(i+=t.slice(r,l),r=l+a.length,c)i+=c[1];else{i&&(n.push(i),i="");var u=e[2],f=e[3],h=e[4],p=e[5],m=e[6],g=e[7],y="+"===m||"*"===m,v="?"===m||"*"===m,b=u||"/",w=h||p||(g?".*":"[^"+b+"]+?");n.push({name:f||o++,prefix:u||"",delimiter:b,optional:v,repeat:y,pattern:d(w)})}}return r<t.length&&(i+=t.substr(r)),i&&n.push(i),n}function c(t){return l(a(t))}function l(e){for(var n=new Array(e.length),o=0;o<e.length;o++)"object"==typeof e[o]&&(n[o]=new RegExp("^"+e[o].pattern+"$"));return function(o){for(var r="",i=o||{},s=0;s<e.length;s++){var a=e[s];if("string"!=typeof a){var c,l=i[a.name];if(null==l){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(t(l)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+l+'"');if(0===l.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<l.length;u++){if(c=encodeURIComponent(l[u]),!n[s].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');r+=(0===u?a.prefix:a.delimiter)+c}}else{if(c=encodeURIComponent(l),!n[s].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');r+=a.prefix+c}}else r+=a}return r}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function d(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function f(t,e){return t.keys=e,t}function h(t){return t.sensitive?"":"i"}function p(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)e.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return f(t,e)}function m(t,e,n){for(var o=[],r=0;r<t.length;r++)o.push(v(t[r],e,n).source);return f(new RegExp("(?:"+o.join("|")+")",h(n)),e)}function g(t,e,n){for(var o=a(t),r=y(o,n),i=0;i<o.length;i++)"string"!=typeof o[i]&&e.push(o[i]);return f(r,e)}function y(t,e){for(var n=(e=e||{}).strict,o=!1!==e.end,r="",i=t[t.length-1],s="string"==typeof i&&/\/$/.test(i),a=0;a<t.length;a++){var c=t[a];if("string"==typeof c)r+=u(c);else{var l=u(c.prefix),d=c.pattern;c.repeat&&(d+="(?:"+l+d+")*"),r+=d=c.optional?l?"(?:"+l+"("+d+"))?":"("+d+")?":l+"("+d+")"}}return n||(r=(s?r.slice(0,-2):r)+"(?:\\/(?=$))?"),r+=o?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+r,h(e))}function v(e,n,o){return t(n=n||[])?o||(o={}):(o=n,n=[]),e instanceof RegExp?p(e,n):t(e)?m(e,n,o):g(e,n,o)}e.parse=n,e.compile=o,e.tokensToFunction=r,e.tokensToRegExp=i;var b,w="undefined"!=typeof document,$="undefined"!=typeof window,k="undefined"!=typeof history,x="undefined"!=typeof process,S=w&&document.ontouchstart?"touchstart":"click",C=$&&!(!window.history.location&&!window.location);function T(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function E(){var t=new T;function e(){return N.apply(t,arguments)}return e.callbacks=t.callbacks,e.exits=t.exits,e.base=t.base.bind(t),e.strict=t.strict.bind(t),e.start=t.start.bind(t),e.stop=t.stop.bind(t),e.show=t.show.bind(t),e.back=t.back.bind(t),e.redirect=t.redirect.bind(t),e.replace=t.replace.bind(t),e.dispatch=t.dispatch.bind(t),e.exit=t.exit.bind(t),e.configure=t.configure.bind(t),e.sameOrigin=t.sameOrigin.bind(t),e.clickHandler=t.clickHandler.bind(t),e.create=E,Object.defineProperty(e,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(e,"current",{get:function(){return t.current},set:function(e){t.current=e}}),e.Context=_,e.Route=P,e}function N(t,e){if("function"==typeof t)return N.call(this,"*",t);if("function"==typeof e)for(var n=new P(t,null,this),o=1;o<arguments.length;++o)this.callbacks.push(n.middleware(arguments[o]));else"string"==typeof t?this["string"==typeof e?"redirect":"show"](t,e):this.start(t)}function A(t){if(!t.handled){var e=this,n=e._window;(e._hashbang?C&&this._getBase()+n.location.hash.replace("#!",""):C&&n.location.pathname+n.location.search)!==t.canonicalPath&&(e.stop(),t.handled=!1,C&&(n.location.href=t.canonicalPath))}}function O(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function _(t,e,n){var o=this.page=n||N,r=o._window,i=o._hashbang,s=o._getBase();"/"===t[0]&&0!==t.indexOf(s)&&(t=s+(i?"#!":"")+t);var a=t.indexOf("?");this.canonicalPath=t;var c=new RegExp("^"+O(s));if(this.path=t.replace(c,"")||"/",i&&(this.path=this.path.replace("#!","")||"/"),this.title=w&&r.document.title,this.state=e||{},this.state.path=t,this.querystring=~a?o._decodeURLEncodedURIComponent(t.slice(a+1)):"",this.pathname=o._decodeURLEncodedURIComponent(~a?t.slice(0,a):t),this.params={},this.hash="",!i){if(!~this.path.indexOf("#"))return;var l=this.path.split("#");this.path=this.pathname=l[0],this.hash=o._decodeURLEncodedURIComponent(l[1])||"",this.querystring=this.querystring.split("#")[0]}}function P(t,n,o){var r=this.page=o||M,i=n||{};i.strict=i.strict||r._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=e(this.path,this.keys=[],i)}T.prototype.configure=function(t){var e=t||{};this._window=e.window||$&&window,this._decodeURLComponents=!1!==e.decodeURLComponents,this._popstate=!1!==e.popstate&&$,this._click=!1!==e.click&&w,this._hashbang=!!e.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):$&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(S,this.clickHandler,!1):w&&n.document.removeEventListener(S,this.clickHandler,!1),this._hashbang&&$&&!k?n.addEventListener("hashchange",this._onpopstate,!1):$&&n.removeEventListener("hashchange",this._onpopstate,!1)},T.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},T.prototype._getBase=function(){var t=this._base;if(t)return t;var e=$&&this._window&&this._window.location;return $&&this._hashbang&&e&&"file:"===e.protocol&&(t=e.pathname),t},T.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},T.prototype.start=function(t){var e=t||{};if(this.configure(e),!1!==e.dispatch){var n;if(this._running=!0,C){var o=this._window.location;n=this._hashbang&&~o.hash.indexOf("#!")?o.hash.substr(2)+o.search:this._hashbang?o.search+o.hash:o.pathname+o.search+o.hash}this.replace(n,null,!0,e.dispatch)}},T.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener(S,this.clickHandler,!1),$&&t.removeEventListener("popstate",this._onpopstate,!1),$&&t.removeEventListener("hashchange",this._onpopstate,!1)}},T.prototype.show=function(t,e,n,o){var r=new _(t,e,this),i=this.prevContext;return this.prevContext=r,this.current=r.path,!1!==n&&this.dispatch(r,i),!1!==r.handled&&!1!==o&&r.pushState(),r},T.prototype.back=function(t,e){var n=this;if(this.len>0){var o=this._window;k&&o.history.back(),this.len--}else t?setTimeout((function(){n.show(t,e)})):setTimeout((function(){n.show(n._getBase(),e)}))},T.prototype.redirect=function(t,e){var n=this;"string"==typeof t&&"string"==typeof e&&N.call(this,t,(function(t){setTimeout((function(){n.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){n.replace(t)}),0)},T.prototype.replace=function(t,e,n,o){var r=new _(t,e,this),i=this.prevContext;return this.prevContext=r,this.current=r.path,r.init=n,r.save(),!1!==o&&this.dispatch(r,i),r},T.prototype.dispatch=function(t,e){var n=0,o=0,r=this;function i(){var t=r.exits[o++];if(!t)return s();t(e,i)}function s(){var e=r.callbacks[n++];if(t.path===r.current)return e?void e(t,s):A.call(r,t);t.handled=!1}e?i():s()},T.prototype.exit=function(t,e){if("function"==typeof t)return this.exit("*",t);for(var n=new P(t,null,this),o=1;o<arguments.length;++o)this.exits.push(n.middleware(arguments[o]))},T.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,n=t.path||(t.composedPath?t.composedPath():null);if(n)for(var o=0;o<n.length;o++)if(n[o].nodeName&&"A"===n[o].nodeName.toUpperCase()&&n[o].href){e=n[o];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var r="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var i=e.getAttribute("href");if((this._hashbang||!this._samePath(e)||!e.hash&&"#"!==i)&&!(i&&i.indexOf("mailto:")>-1)&&!(r?e.target.baseVal:e.target)&&(r||this.sameOrigin(e.href))){var s=r?e.href.baseVal:e.pathname+e.search+(e.hash||"");s="/"!==s[0]?"/"+s:s,x&&s.match(/^\/[a-zA-Z]:\//)&&(s=s.replace(/^\/[a-zA-Z]:\//,"/"));var a=s,c=this._getBase();0===s.indexOf(c)&&(s=s.substr(c.length)),this._hashbang&&(s=s.replace("#!","")),(!c||a!==s||C&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(a))}}}}},T.prototype._onpopstate=(b=!1,$?(w&&"complete"===document.readyState?b=!0:window.addEventListener("load",(function(){setTimeout((function(){b=!0}),0)})),function(t){if(b){var e=this;if(t.state){var n=t.state.path;e.replace(n,t.state)}else if(C){var o=e._window.location;e.show(o.pathname+o.search+o.hash,void 0,void 0,!1)}}}):function(){}),T.prototype._which=function(t){return null==(t=t||$&&this._window.event).which?t.button:t.which},T.prototype._toURL=function(t){var e=this._window;if("function"==typeof URL&&C)return new URL(t,e.location.toString());if(w){var n=e.document.createElement("a");return n.href=t,n}},T.prototype.sameOrigin=function(t){if(!t||!C)return!1;var e=this._toURL(t),n=this._window.location;return n.protocol===e.protocol&&n.hostname===e.hostname&&(n.port===e.port||""===n.port&&(80==e.port||443==e.port))},T.prototype._samePath=function(t){if(!C)return!1;var e=this._window.location;return t.pathname===e.pathname&&t.search===e.search},T.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},_.prototype.pushState=function(){var t=this.page,e=t._window,n=t._hashbang;t.len++,k&&e.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},_.prototype.save=function(){var t=this.page;k&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},P.prototype.middleware=function(t){var e=this;return function(n,o){if(e.match(n.path,n.params))return n.routePath=e.path,t(n,o);o()}},P.prototype.match=function(t,e){var n=this.keys,o=t.indexOf("?"),r=~o?t.slice(0,o):t,i=this.regexp.exec(decodeURIComponent(r));if(!i)return!1;delete e[0];for(var s=1,a=i.length;s<a;++s){var c=n[s-1],l=this.page._decodeURLEncodedURIComponent(i[s]);void 0===l&&hasOwnProperty.call(e,c.name)||(e[c.name]=l)}return!0};var M=E(),j=M,L=M;return j.default=L,j}()}));function o(){}const r=t=>t;function i(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function a(){return Object.create(null)}function c(t){t.forEach(s)}function l(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let d;function f(t,e){return d||(d=document.createElement("a")),d.href=e,t===d.href}function h(t,e,n,o){if(t){const r=p(t,e,n,o);return t[0](r)}}function p(t,e,n,o){return t[1]&&o?i(n.ctx.slice(),t[1](o(e))):n.ctx}function m(t,e,n,o){if(t[2]&&o){const r=t[2](o(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|r[o];return t}return e.dirty|r}return e.dirty}function g(t,e,n,o,r,i){if(r){const s=p(e,n,o,i);t.p(s,r)}}function y(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}const v="undefined"!=typeof window;let b=v?()=>window.performance.now():()=>Date.now(),w=v?t=>requestAnimationFrame(t):o;const $=new Set;function k(t){$.forEach((e=>{e.c(t)||($.delete(e),e.f())})),0!==$.size&&w(k)}function x(t,e){t.appendChild(e)}function S(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function C(t){const e=A("style");return function(t,e){x(t.head||t,e),e.sheet}(S(t),e),e.sheet}function T(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function N(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function O(t){return document.createTextNode(t)}function _(){return O(" ")}function P(){return O("")}function M(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function j(t){return function(e){return e.preventDefault(),t.call(this,e)}}function L(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t){return""===t?null:+t}function D(t,e){e=""+e,t.data!==e&&(t.data=e)}function U(t,e){t.value=null==e?"":e}function q(t,e,n){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function B(t){const e=t.querySelector(":checked");return e&&e.__value}function H(t,e,n){t.classList[n?"add":"remove"](e)}function F(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}const R=new Map;let Y,W=0;function K(t,e,n,o,r,i,s,a=0){const c=16.666/o;let l="{\n";for(let t=0;t<=1;t+=c){const o=e+(n-e)*i(t);l+=100*t+`%{${s(o,1-o)}}\n`}const u=l+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${a}`,f=S(t),{stylesheet:h,rules:p}=R.get(f)||function(t,e){const n={stylesheet:C(e),rules:{}};return R.set(t,n),n}(f,t);p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${r}ms 1 both`,W+=1,d}function V(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),W-=r,W||w((()=>{W||(R.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)})),R.clear())})))}function J(t){Y=t}function G(){if(!Y)throw new Error("Function called outside component initialization");return Y}const Q=[],X=[];let z=[];const Z=[],tt=Promise.resolve();let et=!1;function nt(){et||(et=!0,tt.then(lt))}function ot(){return nt(),tt}function rt(t){z.push(t)}function it(t){Z.push(t)}const st=new Set;let at,ct=0;function lt(){if(0!==ct)return;const t=Y;do{try{for(;ct<Q.length;){const t=Q[ct];ct++,J(t),ut(t.$$)}}catch(t){throw Q.length=0,ct=0,t}for(J(null),Q.length=0,ct=0;X.length;)X.pop()();for(let t=0;t<z.length;t+=1){const e=z[t];st.has(e)||(st.add(e),e())}z.length=0}while(Q.length);for(;Z.length;)Z.pop()();et=!1,st.clear(),J(t)}function ut(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rt)}}function dt(t,e,n){t.dispatchEvent(F(`${e?"intro":"outro"}${n}`))}const ft=new Set;let ht;function pt(){ht={r:0,c:[],p:ht}}function mt(){ht.r||c(ht.c),ht=ht.p}function gt(t,e){t&&t.i&&(ft.delete(t),t.i(e))}function yt(t,e,n,o){if(t&&t.o){if(ft.has(t))return;ft.add(t),ht.c.push((()=>{ft.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}const vt={duration:0};function bt(t,e,n,i){const s={direction:"both"};let a=e(t,n,s),u=i?0:1,d=null,f=null,h=null;function p(){h&&V(t,h)}function m(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(e){const{delay:n=0,duration:i=300,easing:s=r,tick:l=o,css:g}=a||vt,y={start:b()+n,b:e};e||(y.group=ht,ht.r+=1),d||f?f=y:(g&&(p(),h=K(t,u,e,i,n,s,g)),e&&l(0,1),d=m(y,i),rt((()=>dt(t,e,"start"))),function(t){let e;0===$.size&&w(k),new Promise((n=>{$.add(e={c:t,f:n})}))}((e=>{if(f&&e>f.start&&(d=m(f,i),f=null,dt(t,d.b,"start"),g&&(p(),h=K(t,u,d.b,d.duration,0,s,a.css))),d)if(e>=d.end)l(u=d.b,1-u),dt(t,d.b,"end"),f||(d.b?p():--d.group.r||c(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*s(t/d.duration),l(u,1-u)}return!(!d&&!f)})))}return{run(t){l(a)?(at||(at=Promise.resolve(),at.then((()=>{at=null}))),at).then((()=>{a=a(s),g(t)})):g(t)},end(){p(),d=f=null}}}function wt(t,e){const n=e.token={};function o(t,o,r,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==r&&(s=s.slice(),s[r]=i);const a=t&&(e.current=t)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(pt(),yt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),mt())})):e.block.d(1),a.c(),gt(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[o]=a),c&&lt()}if(!(r=t)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then){if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}else{const n=G();if(t.then((t=>{J(n),o(e.then,1,e.value,t),J(null)}),(t=>{if(J(n),o(e.catch,2,e.error,t),J(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}var r}function $t(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}function kt(t,e){const n={},o={},r={$$scope:1};let i=t.length;for(;i--;){const s=t[i],a=e[i];if(a){for(const t in s)t in a||(o[t]=1);for(const t in a)r[t]||(n[t]=a[t],r[t]=1);t[i]=a}else for(const t in s)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function xt(t){return"object"==typeof t&&null!==t?t:{}}function St(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Ct(t){t&&t.c()}function Tt(t,e,n,o){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),o||rt((()=>{const e=t.$$.on_mount.map(s).filter(l);t.$$.on_destroy?t.$$.on_destroy.push(...e):c(e),t.$$.on_mount=[]})),i.forEach(rt)}function Et(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];z.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),z=e}(n.after_update),c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Nt(t,e,n,r,i,s,l,u=[-1]){const d=Y;J(t);const f=t.$$={fragment:null,ctx:[],props:s,update:o,not_equal:i,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:a(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};l&&l(f.root);let h=!1;if(f.ctx=n?n(t,e.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&i(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),h&&function(t,e){-1===t.$$.dirty[0]&&(Q.push(t),nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],f.update(),h=!0,c(f.before_update),f.fragment=!!r&&r(f.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);f.fragment&&f.fragment.l(t),t.forEach(E)}else f.fragment&&f.fragment.c();e.intro&&gt(t.$$.fragment),Tt(t,e.target,e.anchor,e.customElement),lt()}J(d)}class At{$destroy(){Et(this,1),this.$destroy=o}$on(t,e){if(!l(e))return o;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ot(t){let e;return{c(){e=A("h1"),e.textContent="Compt'anar"},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function _t(t){let e,n,o,r;return{c(){e=A("h1"),n=A("a"),o=O("Compt'anar"),L(n,"href",r=`/comptabilite?org=${t[2]}&repo=${t[1]}`)},m(t,r){T(t,e,r),x(e,n),x(n,o)},p(t,e){6&e&&r!==(r=`/comptabilite?org=${t[2]}&repo=${t[1]}`)&&L(n,"href",r)},d(t){t&&E(e)}}}function Pt(t){let e,n,r,i;return{c(){e=A("p"),n=O("Si tu es de l'Échappée Belle, "),r=A("a"),i=O("connecte-toi via github"),L(r,"href",t[4])},m(t,o){T(t,e,o),x(e,n),x(e,r),x(r,i)},p:o,d(t){t&&E(e)}}}function Mt(t){let e,n,o={ctx:t,current:null,token:null,hasCatch:!0,pending:It,then:Lt,catch:jt,value:9,error:10};return wt(n=t[0],o),{c(){e=P(),o.block.c()},m(t,n){T(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e},p(e,r){t=e,o.ctx=t,1&r&&n!==(n=t[0])&&wt(n,o)||$t(o,t,r)},d(t){t&&E(e),o.block.d(t),o.token=null,o=null}}}function jt(t){let e,n,o=t[10]+"";return{c(){e=O("Problème de connexion à Github ! "),n=O(o)},m(t,o){T(t,e,o),T(t,n,o)},p(t,e){1&e&&o!==(o=t[10]+"")&&D(n,o)},d(t){t&&E(e),t&&E(n)}}}function Lt(t){let e,n,o,r,i,s,a,c,u,d,h,p=t[9]+"";return{c(){e=A("div"),n=A("div"),o=A("p"),r=O(p),i=_(),s=A("button"),s.textContent="Se déconnecter",a=_(),c=A("img"),L(o,"class","svelte-1fymu5t"),L(s,"class","svelte-1fymu5t"),L(c,"class","avatar small"),f(c.src,u=`https://github.com/${t[9]}.png`)||L(c,"src",u),L(c,"alt",""),L(e,"class","user svelte-1fymu5t")},m(u,f){T(u,e,f),x(e,n),x(n,o),x(o,r),x(n,i),x(n,s),x(e,a),x(e,c),d||(h=M(s,"click",(function(){l(t[3])&&t[3].apply(this,arguments)})),d=!0)},p(e,n){t=e,1&n&&p!==(p=t[9]+"")&&D(r,p),1&n&&!f(c.src,u=`https://github.com/${t[9]}.png`)&&L(c,"src",u)},d(t){t&&E(e),d=!1,h()}}}function It(t){let e;return{c(){e=O("... recherche du nom d'utilisateur.rice Github ...")},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function Dt(t){let e,n,r;function i(t,e){return t[2]&&t[1]?_t:Ot}let s=i(t),a=s(t);function c(t,e){return t[0]?Mt:Pt}let l=c(t),u=l(t);return{c(){e=A("header"),a.c(),n=_(),r=A("div"),u.c(),L(e,"class","svelte-1fymu5t")},m(t,o){T(t,e,o),a.m(e,null),x(e,n),x(e,r),u.m(r,null)},p(t,[o]){s===(s=i(t))&&a?a.p(t,o):(a.d(1),a=s(t),a&&(a.c(),a.m(e,n))),l===(l=c(t))&&u?u.p(t,o):(u.d(1),u=l(t),u&&(u.c(),u.m(r,null)))},i:o,o:o,d(t){t&&E(e),a.d(),u.d()}}}function Ut(t,e,n){let{login:o}=e,{repo:r}=e,{org:i}=e,{logout:s}=e;const a=`https://github.com/login/oauth/authorize?client_id=fe09b09c65edef4ec9cc&scope=${["public_repo","read:org"].join(",")}&redirect_uri=${`https://ttt.olibri.us/github-callback?destination=${`${location.origin}/`}`}`;return t.$$set=t=>{"login"in t&&n(0,o=t.login),"repo"in t&&n(1,r=t.repo),"org"in t&&n(2,i=t.org),"logout"in t&&n(3,s=t.logout)},[o,r,i,s,a]}class qt extends At{constructor(t){super(),Nt(this,t,Ut,Dt,u,{login:0,repo:1,org:2,logout:3})}}function Bt(t){let e;return{c(){e=A("footer"),e.innerHTML='<a href="https://github.com/comptanar/comptanar.github.io">Code source sur github</a>'},m(t,n){T(t,e,n)},p:o,i:o,o:o,d(t){t&&E(e)}}}class Ht extends At{constructor(t){super(),Nt(this,t,null,Bt,u,{})}}function Ft(t){let e,n,o,r,i,s;e=new qt({props:{login:t[0],logout:t[1],org:t[4],repo:t[3]}});const a=t[6].default,c=h(a,t,t[5],null);return i=new Ht({}),{c(){Ct(e.$$.fragment),n=_(),o=A("main"),c&&c.c(),r=_(),Ct(i.$$.fragment),H(o,"fullwidth",t[2])},m(t,a){Tt(e,t,a),T(t,n,a),T(t,o,a),c&&c.m(o,null),T(t,r,a),Tt(i,t,a),s=!0},p(t,[n]){const r={};1&n&&(r.login=t[0]),2&n&&(r.logout=t[1]),16&n&&(r.org=t[4]),8&n&&(r.repo=t[3]),e.$set(r),c&&c.p&&(!s||32&n)&&g(c,a,t,t[5],s?m(a,t[5],n,null):y(t[5]),null),(!s||4&n)&&H(o,"fullwidth",t[2])},i(t){s||(gt(e.$$.fragment,t),gt(c,t),gt(i.$$.fragment,t),s=!0)},o(t){yt(e.$$.fragment,t),yt(c,t),yt(i.$$.fragment,t),s=!1},d(t){Et(e,t),t&&E(n),t&&E(o),c&&c.d(t),t&&E(r),Et(i,t)}}}function Rt(t,e,n){let{$$slots:o={},$$scope:r}=e,{login:i}=e,{logout:s}=e,{fullwidth:a=!1}=e,{repo:c}=e,{org:l}=e;return t.$$set=t=>{"login"in t&&n(0,i=t.login),"logout"in t&&n(1,s=t.logout),"fullwidth"in t&&n(2,a=t.fullwidth),"repo"in t&&n(3,c=t.repo),"org"in t&&n(4,l=t.org),"$$scope"in t&&n(5,r=t.$$scope)},[i,s,a,c,l,r,o]}class Yt extends At{constructor(t){super(),Nt(this,t,Rt,Ft,u,{login:0,logout:1,fullwidth:2,repo:3,org:4})}}function Wt(t){let e,n,r;return{c(){e=A("p"),e.textContent="Bienvenue ! Comptanar, c'est pour faire sa comptabilité en toute autonomie !",n=_(),r=A("p"),r.innerHTML="Pour le moment comptanar est en alpha ultra-privée, ultra-select, \n            pour [l&#39;Échappée Belle](https://lechappeebelle.team/) seulement\n            <small>on créé un outil pour nous, mais on fait tout pour que ça soit utile pour d&#39;autres un jour :-)</small>"},m(t,o){T(t,e,o),T(t,n,o),T(t,r,o)},p:o,d(t){t&&E(e),t&&E(n),t&&E(r)}}}function Kt(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],$$slots:{default:[Wt]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.login=t[0]),2&n&&(o.logout=t[1]),4&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Vt(t,e,n){let{login:o}=e,{logout:r}=e;return t.$$set=t=>{"login"in t&&n(0,o=t.login),"logout"in t&&n(1,r=t.logout)},[o,r]}class Jt extends At{constructor(t){super(),Nt(this,t,Vt,Kt,u,{login:0,logout:1})}}function Gt(t,{delay:e=0,duration:n=400,easing:o=r}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:t=>"opacity: "+t*i}}
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Qt(t){return"[object Object]"===Object.prototype.toString.call(t)}function Xt(t){var e,n;return!1!==Qt(t)&&(void 0===(e=t.constructor)||!1!==Qt(n=e.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}function zt(){return"object"==typeof navigator&&"userAgent"in navigator?navigator.userAgent:"object"==typeof process&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function Zt(t,e){const n=Object.assign({},t);return Object.keys(e).forEach((o=>{Xt(e[o])?o in t?n[o]=Zt(t[o],e[o]):Object.assign(n,{[o]:e[o]}):Object.assign(n,{[o]:e[o]})})),n}function te(t){for(const e in t)void 0===t[e]&&delete t[e];return t}function ee(t,e,n){if("string"==typeof e){let[t,o]=e.split(" ");n=Object.assign(o?{method:t,url:o}:{url:t},n)}else n=Object.assign({},e);var o;n.headers=(o=n.headers)?Object.keys(o).reduce(((t,e)=>(t[e.toLowerCase()]=o[e],t)),{}):{},te(n),te(n.headers);const r=Zt(t||{},n);return t&&t.mediaType.previews.length&&(r.mediaType.previews=t.mediaType.previews.filter((t=>!r.mediaType.previews.includes(t))).concat(r.mediaType.previews)),r.mediaType.previews=r.mediaType.previews.map((t=>t.replace(/-preview/,""))),r}const ne=/\{[^}]+\}/g;function oe(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function re(t,e){return Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,n)=>(e[n]=t[n],e)),{})}function ie(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map((function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t})).join("")}function se(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function ae(t,e,n){return e="+"===t||"#"===t?ie(e):se(e),n?se(n)+"="+e:e}function ce(t){return null!=t}function le(t){return";"===t||"&"===t||"?"===t}function ue(t,e){var n=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(function(t,o,r){if(o){let t="";const r=[];if(-1!==n.indexOf(o.charAt(0))&&(t=o.charAt(0),o=o.substr(1)),o.split(/,/g).forEach((function(n){var o=/([^:\*]*)(?::(\d+)|(\*))?/.exec(n);r.push(function(t,e,n,o){var r=t[n],i=[];if(ce(r)&&""!==r)if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)r=r.toString(),o&&"*"!==o&&(r=r.substring(0,parseInt(o,10))),i.push(ae(e,r,le(e)?n:""));else if("*"===o)Array.isArray(r)?r.filter(ce).forEach((function(t){i.push(ae(e,t,le(e)?n:""))})):Object.keys(r).forEach((function(t){ce(r[t])&&i.push(ae(e,r[t],t))}));else{const t=[];Array.isArray(r)?r.filter(ce).forEach((function(n){t.push(ae(e,n))})):Object.keys(r).forEach((function(n){ce(r[n])&&(t.push(se(n)),t.push(ae(e,r[n].toString())))})),le(e)?i.push(se(n)+"="+t.join(",")):0!==t.length&&i.push(t.join(","))}else";"===e?ce(r)&&i.push(se(n)):""!==r||"&"!==e&&"?"!==e?""===r&&i.push(""):i.push(se(n)+"=");return i}(e,t,o[1],o[2]||o[3]))})),t&&"+"!==t){var i=",";return"?"===t?i="&":"#"!==t&&(i=t),(0!==r.length?t:"")+r.join(i)}return r.join(",")}return ie(r)}))}function de(t){let e,n=t.method.toUpperCase(),o=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),i=re(t,["method","baseUrl","url","headers","request","mediaType"]);const s=function(t){const e=t.match(ne);return e?e.map(oe).reduce(((t,e)=>t.concat(e)),[]):[]}(o);var a;o=(a=o,{expand:ue.bind(null,a)}).expand(i),/^http/.test(o)||(o=t.baseUrl+o);const c=re(i,Object.keys(t).filter((t=>s.includes(t))).concat("baseUrl"));if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map((e=>e.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`))).join(",")),t.mediaType.previews.length)){const e=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=e.concat(t.mediaType.previews).map((e=>`application/vnd.github.${e}-preview${t.mediaType.format?`.${t.mediaType.format}`:"+json"}`)).join(",")}return["GET","HEAD"].includes(n)?o=function(t,e){const n=/\?/.test(t)?"&":"?",o=Object.keys(e);return 0===o.length?t:t+n+o.map((t=>"q"===t?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${t}=${encodeURIComponent(e[t])}`)).join("&")}(o,c):"data"in c?e=c.data:Object.keys(c).length&&(e=c),r["content-type"]||void 0===e||(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(n)&&void 0===e&&(e=""),Object.assign({method:n,url:o,headers:r},void 0!==e?{body:e}:null,t.request?{request:t.request}:null)}function fe(t,e,n){return de(ee(t,e,n))}const he=function t(e,n){const o=ee(e,n),r=fe.bind(null,o);return Object.assign(r,{DEFAULTS:o,defaults:t.bind(null,o),merge:ee.bind(null,o),parse:de})}(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":`octokit-endpoint.js/7.0.5 ${zt()}`},mediaType:{format:"",previews:[]}});var pe=e((function(e,n){var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();e.exports=n=o.fetch,o.fetch&&(n.default=o.fetch.bind(o)),n.Headers=o.Headers,n.Request=o.Request,n.Response=o.Response}));pe.Headers,pe.Request,pe.Response;class me extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var ge=function t(e,n){if(e&&n)return t(e)(n);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){o[t]=e[t]})),o;function o(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var o=e.apply(this,t),r=t[t.length-1];return"function"==typeof o&&o!==r&&Object.keys(r).forEach((function(t){o[t]=r[t]})),o}};var ye=ge(be),ve=ge(we);function be(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function we(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}be.proto=be((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return be(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return we(this)},configurable:!0})})),ye.strict=ve;const $e=ye((t=>console.warn(t))),ke=ye((t=>console.warn(t)));class xe extends Error{constructor(t,e,n){let o;super(t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=e,"headers"in n&&void 0!==n.headers&&(o=n.headers),"response"in n&&(this.response=n.response,o=n.response.headers);const r=Object.assign({},n.request);n.request.headers.authorization&&(r.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),r.url=r.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=r,Object.defineProperty(this,"code",{get:()=>($e(new me("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),e)}),Object.defineProperty(this,"headers",{get:()=>(ke(new me("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),o||{})})}}function Se(t){const e=t.request&&t.request.log?t.request.log:console;(Xt(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let n,o,r={};return(t.request&&t.request.fetch||globalThis.fetch||pe)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then((async i=>{o=i.url,n=i.status;for(const t of i.headers)r[t[0]]=t[1];if("deprecation"in r){const n=r.link&&r.link.match(/<([^>]+)>; rel="deprecation"/),o=n&&n.pop();e.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${r.sunset}${o?`. See ${o}`:""}`)}if(204!==n&&205!==n){if("HEAD"===t.method){if(n<400)return;throw new xe(i.statusText,n,{response:{url:o,status:n,headers:r,data:void 0},request:t})}if(304===n)throw new xe("Not modified",n,{response:{url:o,status:n,headers:r,data:await Ce(i)},request:t});if(n>=400){const e=await Ce(i),s=new xe(function(t){if("string"==typeof t)return t;if("message"in t)return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(JSON.stringify).join(", ")}`:t.message;return`Unknown error: ${JSON.stringify(t)}`}(e),n,{response:{url:o,status:n,headers:r,data:e},request:t});throw s}return Ce(i)}})).then((t=>({status:n,url:o,headers:r,data:t}))).catch((e=>{if(e instanceof xe)throw e;if("AbortError"===e.name)throw e;throw new xe(e.message,500,{request:t})}))}async function Ce(t){const e=t.headers.get("content-type");return/application\/json/.test(e)?t.json():!e||/^text\/|charset=utf-8$/.test(e)?t.text():function(t){return t.arrayBuffer()}(t)}const Te=function t(e,n){const o=e.defaults(n);return Object.assign((function(e,n){const r=o.merge(e,n);if(!r.request||!r.request.hook)return Se(o.parse(r));const i=(t,e)=>Se(o.parse(o.merge(t,e)));return Object.assign(i,{endpoint:o,defaults:t.bind(null,o)}),r.request.hook(i,r)}),{endpoint:o,defaults:t.bind(null,o)})}(he,{headers:{"user-agent":`octokit-request.js/6.2.3 ${zt()}`}}),Ee=Symbol.for("yaml.alias"),Ne=Symbol.for("yaml.document"),Ae=Symbol.for("yaml.map"),Oe=Symbol.for("yaml.pair"),_e=Symbol.for("yaml.scalar"),Pe=Symbol.for("yaml.seq"),Me=Symbol.for("yaml.node.type"),je=t=>!!t&&"object"==typeof t&&t[Me]===Ee,Le=t=>!!t&&"object"==typeof t&&t[Me]===Ne,Ie=t=>!!t&&"object"==typeof t&&t[Me]===Ae,De=t=>!!t&&"object"==typeof t&&t[Me]===Oe,Ue=t=>!!t&&"object"==typeof t&&t[Me]===_e,qe=t=>!!t&&"object"==typeof t&&t[Me]===Pe;function Be(t){if(t&&"object"==typeof t)switch(t[Me]){case Ae:case Pe:return!0}return!1}function He(t){if(t&&"object"==typeof t)switch(t[Me]){case Ee:case Ae:case _e:case Pe:return!0}return!1}class Fe{constructor(t){Object.defineProperty(this,Me,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}}const Re=Symbol("break visit"),Ye=Symbol("skip children"),We=Symbol("remove node");function Ke(t,e){const n=function(t){if("object"==typeof t&&(t.Collection||t.Node||t.Value))return Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t);return t}(e);if(Le(t)){Ve(null,t.contents,n,Object.freeze([t]))===We&&(t.contents=null)}else Ve(null,t,n,Object.freeze([]))}function Ve(t,e,n,o){const r=function(t,e,n,o){return"function"==typeof n?n(t,e,o):Ie(e)?n.Map?.(t,e,o):qe(e)?n.Seq?.(t,e,o):De(e)?n.Pair?.(t,e,o):Ue(e)?n.Scalar?.(t,e,o):je(e)?n.Alias?.(t,e,o):void 0}(t,e,n,o);if(He(r)||De(r))return function(t,e,n){const o=e[e.length-1];if(Be(o))o.items[t]=n;else if(De(o))"key"===t?o.key=n:o.value=n;else{if(!Le(o)){const t=je(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${t} parent`)}o.contents=n}}(t,o,r),Ve(t,r,n,o);if("symbol"!=typeof r)if(Be(e)){o=Object.freeze(o.concat(e));for(let t=0;t<e.items.length;++t){const r=Ve(t,e.items[t],n,o);if("number"==typeof r)t=r-1;else{if(r===Re)return Re;r===We&&(e.items.splice(t,1),t-=1)}}}else if(De(e)){o=Object.freeze(o.concat(e));const t=Ve("key",e.key,n,o);if(t===Re)return Re;t===We&&(e.key=null);const r=Ve("value",e.value,n,o);if(r===Re)return Re;r===We&&(e.value=null)}return r}Ke.BREAK=Re,Ke.SKIP=Ye,Ke.REMOVE=We;const Je={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Ge{constructor(t,e){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Ge.defaultYaml,t),this.tags=Object.assign({},Ge.defaultTags,e)}clone(){const t=new Ge(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Ge(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ge.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ge.defaultTags)}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:Ge.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ge.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),o=n.shift();switch(o){case"%TAG":{if(2!==n.length&&(e(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[t,o]=n;return this.tags[t]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return e(0,"%YAML directive should contain exactly one part"),!1;const[t]=n;if("1.1"===t||"1.2"===t)return this.yaml.version=t,!0;return e(6,`Unsupported YAML version ${t}`,/^\d+\.\d+$/.test(t)),!1}default:return e(0,`Unknown directive ${o}`,!0),!1}}tagName(t,e){if("!"===t)return"!";if("!"!==t[0])return e(`Not a valid tag: ${t}`),null;if("<"===t[1]){const n=t.slice(2,-1);return"!"===n||"!!"===n?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(">"!==t[t.length-1]&&e("Verbatim tags must end with a >"),n)}const[,n,o]=t.match(/^(.*!)([^!]*)$/);o||e(`The ${t} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(o):"!"===n?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,n]of Object.entries(this.tags))if(t.startsWith(n))return e+t.substring(n.length).replace(/[!,[\]{}]/g,(t=>Je[t]));return"!"===t[0]?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let o;if(t&&n.length>0&&He(t.contents)){const e={};Ke(t.contents,((t,n)=>{He(n)&&n.tag&&(e[n.tag]=!0)})),o=Object.keys(e)}else o=[];for(const[r,i]of n)"!!"===r&&"tag:yaml.org,2002:"===i||t&&!o.some((t=>t.startsWith(i)))||e.push(`%TAG ${r} ${i}`);return e.join("\n")}}function Qe(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const e=JSON.stringify(t);throw new Error(`Anchor must not contain whitespace or control characters: ${e}`)}return!0}function Xe(t){const e=new Set;return Ke(t,{Value(t,n){n.anchor&&e.add(n.anchor)}}),e}function ze(t,e){for(let n=1;;++n){const o=`${t}${n}`;if(!e.has(o))return o}}Ge.defaultYaml={explicit:!1,version:"1.2"},Ge.defaultTags={"!!":"tag:yaml.org,2002:"};class Ze extends Fe{constructor(t){super(Ee),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t){let e;return Ke(t,{Node:(t,n)=>{if(n===this)return Ke.BREAK;n.anchor===this.source&&(e=n)}}),e}toJSON(t,e){if(!e)return{source:this.source};const{anchors:n,doc:o,maxAliasCount:r}=e,i=this.resolve(o);if(!i){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(t)}const s=n.get(i);if(!s||void 0===s.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(r>=0&&(s.count+=1,0===s.aliasCount&&(s.aliasCount=tn(o,i,n)),s.count*s.aliasCount>r)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return s.res}toString(t,e,n){const o=`*${this.source}`;if(t){if(Qe(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(t)}if(t.implicitKey)return`${o} `}return o}}function tn(t,e,n){if(je(e)){const o=e.resolve(t),r=n&&o&&n.get(o);return r?r.count*r.aliasCount:0}if(Be(e)){let o=0;for(const r of e.items){const e=tn(t,r,n);e>o&&(o=e)}return o}if(De(e)){const o=tn(t,e.key,n),r=tn(t,e.value,n);return Math.max(o,r)}return 1}function en(t,e,n){if(Array.isArray(t))return t.map(((t,e)=>en(t,String(e),n)));if(t&&"function"==typeof t.toJSON){if(!n||(!Ue(o=t)&&!Be(o)||!o.anchor))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=t=>{r.res=t,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}var o;return"bigint"!=typeof t||n?.keep?t:Number(t)}const nn=t=>!t||"function"!=typeof t&&"object"!=typeof t;class on extends Fe{constructor(t){super(_e),this.value=t}toJSON(t,e){return e?.keep?this.value:en(this.value,t,e)}toString(){return String(this.value)}}on.BLOCK_FOLDED="BLOCK_FOLDED",on.BLOCK_LITERAL="BLOCK_LITERAL",on.PLAIN="PLAIN",on.QUOTE_DOUBLE="QUOTE_DOUBLE",on.QUOTE_SINGLE="QUOTE_SINGLE";function rn(t,e,n){if(Le(t)&&(t=t.contents),He(t))return t;if(De(t)){const e=n.schema[Ae].createNode?.(n.schema,null,n);return e.items.push(t),e}(t instanceof String||t instanceof Number||t instanceof Boolean||"undefined"!=typeof BigInt&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:o,onAnchor:r,onTagObj:i,schema:s,sourceObjects:a}=n;let c;if(o&&t&&"object"==typeof t){if(c=a.get(t),c)return c.anchor||(c.anchor=r(t)),new Ze(c.anchor);c={anchor:null,node:null},a.set(t,c)}e?.startsWith("!!")&&(e="tag:yaml.org,2002:"+e.slice(2));let l=function(t,e,n){if(e){const t=n.filter((t=>t.tag===e)),o=t.find((t=>!t.format))??t[0];if(!o)throw new Error(`Tag ${e} not found`);return o}return n.find((e=>e.identify?.(t)&&!e.format))}(t,e,s.tags);if(!l){if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t||"object"!=typeof t){const e=new on(t);return c&&(c.node=e),e}l=t instanceof Map?s[Ae]:Symbol.iterator in Object(t)?s[Pe]:s[Ae]}i&&(i(l),delete n.onTagObj);const u=l?.createNode?l.createNode(n.schema,t,n):new on(t);return e&&(u.tag=e),c&&(c.node=u),u}function sn(t,e,n){let o=n;for(let t=e.length-1;t>=0;--t){const n=e[t];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const t=[];t[n]=o,o=t}else o=new Map([[n,o]])}return rn(o,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const an=t=>null==t||"object"==typeof t&&!!t[Symbol.iterator]().next().done;class cn extends Fe{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map((e=>He(e)||De(e)?e.clone(t):e)),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if(an(t))this.add(e);else{const[n,...o]=t,r=this.get(n,!0);if(Be(r))r.addIn(o,e);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`);this.set(n,sn(this.schema,o,e))}}}deleteIn(t){const[e,...n]=t;if(0===n.length)return this.delete(e);const o=this.get(e,!0);if(Be(o))return o.deleteIn(n);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}getIn(t,e){const[n,...o]=t,r=this.get(n,!0);return 0===o.length?!e&&Ue(r)?r.value:r:Be(r)?r.getIn(o,e):void 0}hasAllNullValues(t){return this.items.every((e=>{if(!De(e))return!1;const n=e.value;return null==n||t&&Ue(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(t){const[e,...n]=t;if(0===n.length)return this.has(e);const o=this.get(e,!0);return!!Be(o)&&o.hasIn(n)}setIn(t,e){const[n,...o]=t;if(0===o.length)this.set(n,e);else{const t=this.get(n,!0);if(Be(t))t.setIn(o,e);else{if(void 0!==t||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`);this.set(n,sn(this.schema,o,e))}}}}cn.maxFlowStringSingleLineLength=60;const ln=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function un(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const dn=(t,e,n)=>t.endsWith("\n")?un(n,e):n.includes("\n")?"\n"+un(n,e):(t.endsWith(" ")?"":" ")+n;function fn(t,e,n="flow",{indentAtStart:o,lineWidth:r=80,minContentWidth:i=20,onFold:s,onOverflow:a}={}){if(!r||r<0)return t;const c=Math.max(1+i,1+r-e.length);if(t.length<=c)return t;const l=[],u={};let d,f,h=r-e.length;"number"==typeof o&&(o>r-Math.max(2,i)?l.push(0):h=r-o);let p,m=!1,g=-1,y=-1,v=-1;for("block"===n&&(g=hn(t,g),-1!==g&&(h=g+c));p=t[g+=1];){if("quoted"===n&&"\\"===p){switch(y=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}v=g}if("\n"===p)"block"===n&&(g=hn(t,g)),h=g+c,d=void 0;else{if(" "===p&&f&&" "!==f&&"\n"!==f&&"\t"!==f){const e=t[g+1];e&&" "!==e&&"\n"!==e&&"\t"!==e&&(d=g)}if(g>=h)if(d)l.push(d),h=d+c,d=void 0;else if("quoted"===n){for(;" "===f||"\t"===f;)f=p,p=t[g+=1],m=!0;const e=g>v+1?g-2:y-1;if(u[e])return t;l.push(e),u[e]=!0,h=e+c,d=void 0}else m=!0}f=p}if(m&&a&&a(),0===l.length)return t;s&&s();let b=t.slice(0,l[0]);for(let o=0;o<l.length;++o){const r=l[o],i=l[o+1]||t.length;0===r?b=`\n${e}${t.slice(0,i)}`:("quoted"===n&&u[r]&&(b+=`${t[r]}\\`),b+=`\n${e}${t.slice(r+1,i)}`)}return b}function hn(t,e){let n=t[e+1];for(;" "===n||"\t"===n;){do{n=t[e+=1]}while(n&&"\n"!==n);n=t[e+1]}return e}const pn=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),mn=t=>/^(%|---|\.\.\.)/m.test(t);function gn(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:o}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(mn(t)?"  ":"");let s="",a=0;for(let t=0,e=n[t];e;e=n[++t])if(" "===e&&"\\"===n[t+1]&&"n"===n[t+2]&&(s+=n.slice(a,t)+"\\ ",t+=1,a=t,e="\\"),"\\"===e)switch(n[t+1]){case"u":{s+=n.slice(a,t);const e=n.substr(t+2,4);switch(e){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:"00"===e.substr(0,2)?s+="\\x"+e.substr(2):s+=n.substr(t,6)}t+=5,a=t+1}break;case"n":if(o||'"'===n[t+2]||n.length<r)t+=1;else{for(s+=n.slice(a,t)+"\n\n";"\\"===n[t+2]&&"n"===n[t+3]&&'"'!==n[t+4];)s+="\n",t+=2;s+=i," "===n[t+2]&&(s+="\\"),t+=1,a=t+1}break;default:t+=1}return s=a?s+n.slice(a):n,o?s:fn(s,i,"quoted",pn(e,!1))}function yn(t,e){if(!1===e.options.singleQuote||e.implicitKey&&t.includes("\n")||/[ \t]\n|\n[ \t]/.test(t))return gn(t,e);const n=e.indent||(mn(t)?"  ":""),o="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return e.implicitKey?o:fn(o,n,"flow",pn(e,!1))}function vn(t,e){const{singleQuote:n}=e.options;let o;if(!1===n)o=gn;else{const e=t.includes('"'),r=t.includes("'");o=e&&!r?yn:r&&!e?gn:n?yn:gn}return o(t,e)}function bn({comment:t,type:e,value:n},o,r,i){const{blockQuote:s,commentString:a,lineWidth:c}=o.options;if(!s||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return vn(n,o);const l=o.indent||(o.forceBlockIndent||mn(n)?"  ":""),u="literal"===s||"folded"!==s&&e!==on.BLOCK_FOLDED&&(e===on.BLOCK_LITERAL||!function(t,e,n){if(!e||e<0)return!1;const o=e-n,r=t.length;if(r<=o)return!1;for(let e=0,n=0;e<r;++e)if("\n"===t[e]){if(e-n>o)return!0;if(n=e+1,r-n<=o)return!1}return!0}(n,c,l.length));if(!n)return u?"|\n":">\n";let d,f;for(f=n.length;f>0;--f){const t=n[f-1];if("\n"!==t&&"\t"!==t&&" "!==t)break}let h=n.substring(f);const p=h.indexOf("\n");-1===p?d="-":n===h||p!==h.length-1?(d="+",i&&i()):d="",h&&(n=n.slice(0,-h.length),"\n"===h[h.length-1]&&(h=h.slice(0,-1)),h=h.replace(/\n+(?!\n|$)/g,`$&${l}`));let m,g=!1,y=-1;for(m=0;m<n.length;++m){const t=n[m];if(" "===t)g=!0;else{if("\n"!==t)break;y=m}}let v=n.substring(0,y<m?y+1:m);v&&(n=n.substring(v.length),v=v.replace(/\n+/g,`$&${l}`));let b=(u?"|":">")+(g?l?"2":"1":"")+d;if(t&&(b+=" "+a(t.replace(/ ?[\r\n]+/g," ")),r&&r()),u)return`${b}\n${l}${v}${n=n.replace(/\n+/g,`$&${l}`)}${h}`;return`${b}\n${l}${fn(`${v}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`)}${h}`,l,"block",pn(o,!0))}`}function wn(t,e,n,o){const{implicitKey:r,inFlow:i}=e,s="string"==typeof t.value?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==on.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=on.QUOTE_DOUBLE);const c=t=>{switch(t){case on.BLOCK_FOLDED:case on.BLOCK_LITERAL:return r||i?vn(s.value,e):bn(s,e,n,o);case on.QUOTE_DOUBLE:return gn(s.value,e);case on.QUOTE_SINGLE:return yn(s.value,e);case on.PLAIN:return function(t,e,n,o){const{type:r,value:i}=t,{actualString:s,implicitKey:a,indent:c,indentStep:l,inFlow:u}=e;if(a&&/[\n[\]{},]/.test(i)||u&&/[[\]{},]/.test(i))return vn(i,e);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes("\n")?vn(i,e):bn(t,e,n,o);if(!a&&!u&&r!==on.PLAIN&&i.includes("\n"))return bn(t,e,n,o);if(mn(i)){if(""===c)return e.forceBlockIndent=!0,bn(t,e,n,o);if(a&&c===l)return vn(i,e)}const d=i.replace(/\n+/g,`$&\n${c}`);if(s){const t=t=>t.default&&"tag:yaml.org,2002:str"!==t.tag&&t.test?.test(d),{compat:n,tags:o}=e.doc.schema;if(o.some(t)||n?.some(t))return vn(i,e)}return a?d:fn(d,c,"flow",pn(e,!1))}(s,e,n,o);default:return null}};let l=c(a);if(null===l){const{defaultKeyType:t,defaultStringType:n}=e.options,o=r&&t||n;if(l=c(o),null===l)throw new Error(`Unsupported default string type ${o}`)}return l}function $n(t,e){const n=Object.assign({blockQuote:!0,commentString:ln,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let o;switch(n.collectionStyle){case"block":o=!1;break;case"flow":o=!0;break;default:o=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:o,options:n}}function kn(t,e,n,o){if(De(t))return t.toString(e,n,o);if(je(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const i=He(t)?t:e.doc.createNode(t,{onTagObj:t=>r=t});r||(r=function(t,e){if(e.tag){const n=t.filter((t=>t.tag===e.tag));if(n.length>0)return n.find((t=>t.format===e.format))??n[0]}let n,o;if(Ue(e)){o=e.value;const r=t.filter((t=>t.identify?.(o)));n=r.find((t=>t.format===e.format))??r.find((t=>!t.format))}else o=e,n=t.find((t=>t.nodeClass&&o instanceof t.nodeClass));if(!n)throw new Error(`Tag not resolved for ${o?.constructor?.name??typeof o} value`);return n}(e.doc.schema.tags,i));const s=function(t,e,{anchors:n,doc:o}){if(!o.directives)return"";const r=[],i=(Ue(t)||Be(t))&&t.anchor;i&&Qe(i)&&(n.add(i),r.push(`&${i}`));const s=t.tag?t.tag:e.default?null:e.tag;return s&&r.push(o.directives.tagString(s)),r.join(" ")}(i,r,e);s.length>0&&(e.indentAtStart=(e.indentAtStart??0)+s.length+1);const a="function"==typeof r.stringify?r.stringify(i,e,n,o):Ue(i)?wn(i,e,n,o):i.toString(e,n,o);return s?Ue(i)||"{"===a[0]||"["===a[0]?`${s} ${a}`:`${s}\n${e.indent}${a}`:a}function xn(t,e){"debug"!==t&&"warn"!==t||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(e):console.warn(e))}function Sn(t,e,{key:n,value:o}){if(t?.doc.schema.merge&&Cn(n))if(o=je(o)?o.resolve(t.doc):o,qe(o))for(const n of o.items)Tn(t,e,n);else if(Array.isArray(o))for(const n of o)Tn(t,e,n);else Tn(t,e,o);else{const r=en(n,"",t);if(e instanceof Map)e.set(r,en(o,r,t));else if(e instanceof Set)e.add(r);else{const i=function(t,e,n){if(null===e)return"";if("object"!=typeof e)return String(e);if(He(t)&&n&&n.doc){const e=$n(n.doc,{});e.anchors=new Set;for(const t of n.anchors.keys())e.anchors.add(t.anchor);e.inFlow=!0,e.inStringifyKey=!0;const o=t.toString(e);if(!n.mapKeyWarned){let t=JSON.stringify(o);t.length>40&&(t=t.substring(0,36)+'..."'),xn(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${t}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return o}return JSON.stringify(e)}(n,r,t),s=en(o,i,t);i in e?Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[i]=s}}return e}const Cn=t=>"<<"===t||Ue(t)&&"<<"===t.value&&(!t.type||t.type===on.PLAIN);function Tn(t,e,n){const o=t&&je(n)?n.resolve(t.doc):n;if(!Ie(o))throw new Error("Merge sources must be maps or map aliases");const r=o.toJSON(null,t,Map);for(const[t,n]of r)e instanceof Map?e.has(t)||e.set(t,n):e instanceof Set?e.add(t):Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0});return e}function En(t,e,n){const o=rn(t,void 0,n),r=rn(e,void 0,n);return new Nn(o,r)}class Nn{constructor(t,e=null){Object.defineProperty(this,Me,{value:Oe}),this.key=t,this.value=e}clone(t){let{key:e,value:n}=this;return He(e)&&(e=e.clone(t)),He(n)&&(n=n.clone(t)),new Nn(e,n)}toJSON(t,e){return Sn(e,e?.mapAsMap?new Map:{},this)}toString(t,e,n){return t?.doc?function({key:t,value:e},n,o,r){const{allNullValues:i,doc:s,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:d}}=n;let f=He(t)&&t.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(Be(t))throw new Error("With simple keys, collection cannot be used as a key value")}let h=!d&&(!t||f&&null==e&&!n.inFlow||Be(t)||(Ue(t)?t.type===on.BLOCK_FOLDED||t.type===on.BLOCK_LITERAL:"object"==typeof t));n=Object.assign({},n,{allNullValues:!1,implicitKey:!h&&(d||!i),indent:a+c});let p,m,g,y=!1,v=!1,b=kn(t,n,(()=>y=!0),(()=>v=!0));if(!h&&!n.inFlow&&b.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(n.inFlow){if(i||null==e)return y&&o&&o(),""===b?"?":h?`? ${b}`:b}else if(i&&!d||null==e&&h)return b=`? ${b}`,f&&!y?b+=dn(b,n.indent,l(f)):v&&r&&r(),b;y&&(f=null),h?(f&&(b+=dn(b,n.indent,l(f))),b=`? ${b}\n${a}:`):(b=`${b}:`,f&&(b+=dn(b,n.indent,l(f)))),He(e)?(p=!!e.spaceBefore,m=e.commentBefore,g=e.comment):(p=!1,m=null,g=null,e&&"object"==typeof e&&(e=s.createNode(e))),n.implicitKey=!1,h||f||!Ue(e)||(n.indentAtStart=b.length+1),v=!1,u||!(c.length>=2)||n.inFlow||h||!qe(e)||e.flow||e.tag||e.anchor||(n.indent=n.indent.substring(2));let w=!1;const $=kn(e,n,(()=>w=!0),(()=>v=!0));let k=" ";if(f||p||m)k=p?"\n":"",m&&(k+=`\n${un(l(m),n.indent)}`),""!==$||n.inFlow?k+=`\n${n.indent}`:"\n"===k&&(k="\n\n");else if(!h&&Be(e)){const t=$[0],o=$.indexOf("\n"),r=-1!==o,i=n.inFlow??e.flow??0===e.items.length;if(r||!i){let e=!1;if(r&&("&"===t||"!"===t)){let n=$.indexOf(" ");"&"===t&&-1!==n&&n<o&&"!"===$[n+1]&&(n=$.indexOf(" ",n+1)),(-1===n||o<n)&&(e=!0)}e||(k=`\n${n.indent}`)}}else""!==$&&"\n"!==$[0]||(k="");return b+=k+$,n.inFlow?w&&o&&o():g&&!w?b+=dn(b,n.indent,l(g)):v&&r&&r(),b}(this,t,e,n):JSON.stringify(this)}}function An(t,e,n){return(e.inFlow??t.flow?_n:On)(t,e,n)}function On({comment:t,items:e},n,{blockItemPrefix:o,flowChars:r,itemIndent:i,onChompKeep:s,onComment:a}){const{indent:c,options:{commentString:l}}=n,u=Object.assign({},n,{indent:i,type:null});let d=!1;const f=[];for(let t=0;t<e.length;++t){const r=e[t];let s=null;if(He(r))!d&&r.spaceBefore&&f.push(""),Pn(n,f,r.commentBefore,d),r.comment&&(s=r.comment);else if(De(r)){const t=He(r.key)?r.key:null;t&&(!d&&t.spaceBefore&&f.push(""),Pn(n,f,t.commentBefore,d))}d=!1;let a=kn(r,u,(()=>s=null),(()=>d=!0));s&&(a+=dn(a,i,l(s))),d&&s&&(d=!1),f.push(o+a)}let h;if(0===f.length)h=r.start+r.end;else{h=f[0];for(let t=1;t<f.length;++t){const e=f[t];h+=e?`\n${c}${e}`:"\n"}}return t?(h+="\n"+un(l(t),c),a&&a()):d&&s&&s(),h}function _n({comment:t,items:e},n,{flowChars:o,itemIndent:r,onComment:i}){const{indent:s,indentStep:a,flowCollectionPadding:c,options:{commentString:l}}=n;r+=a;const u=Object.assign({},n,{indent:r,inFlow:!0,type:null});let d=!1,f=0;const h=[];for(let t=0;t<e.length;++t){const o=e[t];let i=null;if(He(o))o.spaceBefore&&h.push(""),Pn(n,h,o.commentBefore,!1),o.comment&&(i=o.comment);else if(De(o)){const t=He(o.key)?o.key:null;t&&(t.spaceBefore&&h.push(""),Pn(n,h,t.commentBefore,!1),t.comment&&(d=!0));const e=He(o.value)?o.value:null;e?(e.comment&&(i=e.comment),e.commentBefore&&(d=!0)):null==o.value&&t&&t.comment&&(i=t.comment)}i&&(d=!0);let s=kn(o,u,(()=>i=null));t<e.length-1&&(s+=","),i&&(s+=dn(s,r,l(i))),!d&&(h.length>f||s.includes("\n"))&&(d=!0),h.push(s),f=h.length}let p;const{start:m,end:g}=o;if(0===h.length)p=m+g;else{if(!d){const t=h.reduce(((t,e)=>t+e.length+2),2);d=t>cn.maxFlowStringSingleLineLength}if(d){p=m;for(const t of h)p+=t?`\n${a}${s}${t}`:"\n";p+=`\n${s}${g}`}else p=`${m}${c}${h.join(" ")}${c}${g}`}return t&&(p+=dn(p,s,l(t)),i&&i()),p}function Pn({indent:t,options:{commentString:e}},n,o,r){if(o&&r&&(o=o.replace(/^\n+/,"")),o){const r=un(e(o),t);n.push(r.trimStart())}}function Mn(t,e){const n=Ue(e)?e.value:e;for(const o of t)if(De(o)){if(o.key===e||o.key===n)return o;if(Ue(o.key)&&o.key.value===n)return o}}class jn extends cn{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(Ae,t),this.items=[]}add(t,e){let n;n=De(t)?t:t&&"object"==typeof t&&"key"in t?new Nn(t.key,t.value):new Nn(t,t?.value);const o=Mn(this.items,n.key),r=this.schema?.sortMapEntries;if(o){if(!e)throw new Error(`Key ${n.key} already set`);Ue(o.value)&&nn(n.value)?o.value.value=n.value:o.value=n.value}else if(r){const t=this.items.findIndex((t=>r(n,t)<0));-1===t?this.items.push(n):this.items.splice(t,0,n)}else this.items.push(n)}delete(t){const e=Mn(this.items,t);if(!e)return!1;return this.items.splice(this.items.indexOf(e),1).length>0}get(t,e){const n=Mn(this.items,t)?.value;return(!e&&Ue(n)?n.value:n)??void 0}has(t){return!!Mn(this.items,t)}set(t,e){this.add(new Nn(t,e),!0)}toJSON(t,e,n){const o=n?new n:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(o);for(const t of this.items)Sn(e,o,t);return o}toString(t,e,n){if(!t)return JSON.stringify(this);for(const t of this.items)if(!De(t))throw new Error(`Map items must all be pairs; found ${JSON.stringify(t)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),An(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:e})}}const Ln={collection:"map",createNode:function(t,e,n){const{keepUndefined:o,replacer:r}=n,i=new jn(t),s=(t,s)=>{if("function"==typeof r)s=r.call(e,t,s);else if(Array.isArray(r)&&!r.includes(t))return;(void 0!==s||o)&&i.items.push(En(t,s,n))};if(e instanceof Map)for(const[t,n]of e)s(t,n);else if(e&&"object"==typeof e)for(const t of Object.keys(e))s(t,e[t]);return"function"==typeof t.sortMapEntries&&i.items.sort(t.sortMapEntries),i},default:!0,nodeClass:jn,tag:"tag:yaml.org,2002:map",resolve:(t,e)=>(Ie(t)||e("Expected a mapping for this tag"),t)};class In extends cn{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(Pe,t),this.items=[]}add(t){this.items.push(t)}delete(t){const e=Dn(t);if("number"!=typeof e)return!1;return this.items.splice(e,1).length>0}get(t,e){const n=Dn(t);if("number"!=typeof n)return;const o=this.items[n];return!e&&Ue(o)?o.value:o}has(t){const e=Dn(t);return"number"==typeof e&&e<this.items.length}set(t,e){const n=Dn(t);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${t}.`);const o=this.items[n];Ue(o)&&nn(e)?o.value=e:this.items[n]=e}toJSON(t,e){const n=[];e?.onCreate&&e.onCreate(n);let o=0;for(const t of this.items)n.push(en(t,String(o++),e));return n}toString(t,e,n){return t?An(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:e}):JSON.stringify(this)}}function Dn(t){let e=Ue(t)?t.value:t;return e&&"string"==typeof e&&(e=Number(e)),"number"==typeof e&&Number.isInteger(e)&&e>=0?e:null}const Un={collection:"seq",createNode:function(t,e,n){const{replacer:o}=n,r=new In(t);if(e&&Symbol.iterator in Object(e)){let t=0;for(let i of e){if("function"==typeof o){const n=e instanceof Set?i:String(t++);i=o.call(e,n,i)}r.items.push(rn(i,void 0,n))}}return r},default:!0,nodeClass:In,tag:"tag:yaml.org,2002:seq",resolve:(t,e)=>(qe(t)||e("Expected a sequence for this tag"),t)},qn={identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:(t,e,n,o)=>wn(t,e=Object.assign({actualString:!0},e),n,o)},Bn={identify:t=>null==t,createNode:()=>new on(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new on(null),stringify:({source:t},e)=>"string"==typeof t&&Bn.test.test(t)?t:e.options.nullStr},Hn={identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new on("t"===t[0]||"T"===t[0]),stringify({source:t,value:e},n){if(t&&Hn.test.test(t)){if(e===("t"===t[0]||"T"===t[0]))return t}return e?n.options.trueStr:n.options.falseStr}};function Fn({format:t,minFractionDigits:e,tag:n,value:o}){if("bigint"==typeof o)return String(o);const r="number"==typeof o?o:Number(o);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(o);if(!t&&e&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(i)){let t=i.indexOf(".");t<0&&(t=i.length,i+=".");let n=e-(i.length-t-1);for(;n-- >0;)i+="0"}return i}const Rn={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Fn},Yn={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Fn(t)}},Wn={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new on(parseFloat(t)),n=t.indexOf(".");return-1!==n&&"0"===t[t.length-1]&&(e.minFractionDigits=t.length-n-1),e},stringify:Fn},Kn=t=>"bigint"==typeof t||Number.isInteger(t),Vn=(t,e,n,{intAsBigInt:o})=>o?BigInt(t):parseInt(t.substring(e),n);function Jn(t,e,n){const{value:o}=t;return Kn(o)&&o>=0?n+o.toString(e):Fn(t)}const Gn={identify:t=>Kn(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>Vn(t,2,8,n),stringify:t=>Jn(t,8,"0o")},Qn={identify:Kn,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>Vn(t,0,10,n),stringify:Fn},Xn={identify:t=>Kn(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>Vn(t,2,16,n),stringify:t=>Jn(t,16,"0x")},zn=[Ln,Un,qn,Bn,Hn,Gn,Qn,Xn,Rn,Yn,Wn];function Zn(t){return"bigint"==typeof t||Number.isInteger(t)}const to=({value:t})=>JSON.stringify(t),eo=[Ln,Un].concat([{identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:to},{identify:t=>null==t,createNode:()=>new on(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:to},{identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>"true"===t,stringify:to},{identify:Zn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Zn(t)?t.toString():JSON.stringify(t)},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:to}],{default:!0,tag:"",test:/^/,resolve:(t,e)=>(e(`Unresolved plain scalar ${JSON.stringify(t)}`),t)}),no={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if("function"==typeof Buffer)return Buffer.from(t,"base64");if("function"==typeof atob){const e=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n}return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},o,r,i){const s=n;let a;if("function"==typeof Buffer)a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let t="";for(let e=0;e<s.length;++e)t+=String.fromCharCode(s[e]);a=btoa(t)}}if(e||(e=on.BLOCK_LITERAL),e!==on.QUOTE_DOUBLE){const t=Math.max(o.options.lineWidth-o.indent.length,o.options.minContentWidth),n=Math.ceil(a.length/t),r=new Array(n);for(let e=0,o=0;e<n;++e,o+=t)r[e]=a.substr(o,t);a=r.join(e===on.BLOCK_LITERAL?"\n":" ")}return wn({comment:t,type:e,value:a},o,r,i)}};function oo(t,e){if(qe(t))for(let n=0;n<t.items.length;++n){let o=t.items[n];if(!De(o)){if(Ie(o)){o.items.length>1&&e("Each pair must have its own sequence indicator");const t=o.items[0]||new Nn(new on(null));if(o.commentBefore&&(t.key.commentBefore=t.key.commentBefore?`${o.commentBefore}\n${t.key.commentBefore}`:o.commentBefore),o.comment){const e=t.value??t.key;e.comment=e.comment?`${o.comment}\n${e.comment}`:o.comment}o=t}t.items[n]=De(o)?o:new Nn(o)}}else e("Expected a sequence for this tag");return t}function ro(t,e,n){const{replacer:o}=n,r=new In(t);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let t of e){let s,a;if("function"==typeof o&&(t=o.call(e,String(i++),t)),Array.isArray(t)){if(2!==t.length)throw new TypeError(`Expected [key, value] tuple: ${t}`);s=t[0],a=t[1]}else if(t&&t instanceof Object){const e=Object.keys(t);if(1!==e.length)throw new TypeError(`Expected { key: value } tuple: ${t}`);s=e[0],a=t[s]}else s=t;r.items.push(En(s,a,n))}return r}const io={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:oo,createNode:ro};class so extends In{constructor(){super(),this.add=jn.prototype.add.bind(this),this.delete=jn.prototype.delete.bind(this),this.get=jn.prototype.get.bind(this),this.has=jn.prototype.has.bind(this),this.set=jn.prototype.set.bind(this),this.tag=so.tag}toJSON(t,e){if(!e)return super.toJSON(t);const n=new Map;e?.onCreate&&e.onCreate(n);for(const t of this.items){let o,r;if(De(t)?(o=en(t.key,"",e),r=en(t.value,o,e)):o=en(t,"",e),n.has(o))throw new Error("Ordered maps must not include duplicate keys");n.set(o,r)}return n}}so.tag="tag:yaml.org,2002:omap";const ao={collection:"seq",identify:t=>t instanceof Map,nodeClass:so,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=oo(t,e),o=[];for(const{key:t}of n.items)Ue(t)&&(o.includes(t.value)?e(`Ordered maps must not include duplicate keys: ${t.value}`):o.push(t.value));return Object.assign(new so,n)},createNode(t,e,n){const o=ro(t,e,n),r=new so;return r.items=o.items,r}};function co({value:t,source:e},n){return e&&(t?lo:uo).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const lo={identify:t=>!0===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new on(!0),stringify:co},uo={identify:t=>!1===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new on(!1),stringify:co},fo={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Fn},ho={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Fn(t)}},po={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new on(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(-1!==n){const o=t.substring(n+1).replace(/_/g,"");"0"===o[o.length-1]&&(e.minFractionDigits=o.length)}return e},stringify:Fn},mo=t=>"bigint"==typeof t||Number.isInteger(t);function go(t,e,n,{intAsBigInt:o}){const r=t[0];if("-"!==r&&"+"!==r||(e+=1),t=t.substring(e).replace(/_/g,""),o){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`}const e=BigInt(t);return"-"===r?BigInt(-1)*e:e}const i=parseInt(t,n);return"-"===r?-1*i:i}function yo(t,e,n){const{value:o}=t;if(mo(o)){const t=o.toString(e);return o<0?"-"+n+t.substr(1):n+t}return Fn(t)}const vo={identify:mo,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>go(t,2,2,n),stringify:t=>yo(t,2,"0b")},bo={identify:mo,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>go(t,1,8,n),stringify:t=>yo(t,8,"0")},wo={identify:mo,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>go(t,0,10,n),stringify:Fn},$o={identify:mo,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>go(t,2,16,n),stringify:t=>yo(t,16,"0x")};class ko extends jn{constructor(t){super(t),this.tag=ko.tag}add(t){let e;e=De(t)?t:t&&"object"==typeof t&&"key"in t&&"value"in t&&null===t.value?new Nn(t.key,null):new Nn(t,null);Mn(this.items,e.key)||this.items.push(e)}get(t,e){const n=Mn(this.items,t);return!e&&De(n)?Ue(n.key)?n.key.value:n.key:n}set(t,e){if("boolean"!=typeof e)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof e);const n=Mn(this.items,t);n&&!e?this.items.splice(this.items.indexOf(n),1):!n&&e&&this.items.push(new Nn(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,n);throw new Error("Set items must all have null values")}}ko.tag="tag:yaml.org,2002:set";const xo={collection:"map",identify:t=>t instanceof Set,nodeClass:ko,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(Ie(t)){if(t.hasAllNullValues(!0))return Object.assign(new ko,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,n){const{replacer:o}=n,r=new ko(t);if(e&&Symbol.iterator in Object(e))for(let t of e)"function"==typeof o&&(t=o.call(e,t,t)),r.items.push(En(t,null,n));return r}};function So(t,e){const n=t[0],o="-"===n||"+"===n?t.substring(1):t,r=t=>e?BigInt(t):Number(t),i=o.replace(/_/g,"").split(":").reduce(((t,e)=>t*r(60)+r(e)),r(0));return"-"===n?r(-1)*i:i}function Co(t){let{value:e}=t,n=t=>t;if("bigint"==typeof e)n=t=>BigInt(t);else if(isNaN(e)||!isFinite(e))return Fn(t);let o="";e<0&&(o="-",e*=n(-1));const r=n(60),i=[e%r];return e<60?i.unshift(0):(e=(e-i[0])/r,i.unshift(e%r),e>=60&&(e=(e-i[0])/r,i.unshift(e))),o+i.map((t=>t<10?"0"+String(t):String(t))).join(":").replace(/000000\d*$/,"")}const To={identify:t=>"bigint"==typeof t||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>So(t,n),stringify:Co},Eo={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>So(t,!1),stringify:Co},No={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(No.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,o,r,i,s,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0;let l=Date.UTC(n,o-1,r,i||0,s||0,a||0,c);const u=e[8];if(u&&"Z"!==u){let t=So(u,!1);Math.abs(t)<30&&(t*=60),l-=6e4*t}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Ao=[Ln,Un,qn,Bn,lo,uo,vo,bo,wo,$o,fo,ho,po,no,ao,io,xo,To,Eo,No],Oo=new Map([["core",zn],["failsafe",[Ln,Un,qn]],["json",eo],["yaml11",Ao],["yaml-1.1",Ao]]),_o={binary:no,bool:Hn,float:Wn,floatExp:Yn,floatNaN:Rn,floatTime:Eo,int:Qn,intHex:Xn,intOct:Gn,intTime:To,map:Ln,null:Bn,omap:ao,pairs:io,seq:Un,set:xo,timestamp:No},Po={"tag:yaml.org,2002:binary":no,"tag:yaml.org,2002:omap":ao,"tag:yaml.org,2002:pairs":io,"tag:yaml.org,2002:set":xo,"tag:yaml.org,2002:timestamp":No};function Mo(t,e){let n=Oo.get(e);if(!n){if(!Array.isArray(t)){const t=Array.from(Oo.keys()).filter((t=>"yaml11"!==t)).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${t} or define customTags array`)}n=[]}if(Array.isArray(t))for(const e of t)n=n.concat(e);else"function"==typeof t&&(n=t(n.slice()));return n.map((t=>{if("string"!=typeof t)return t;const e=_o[t];if(e)return e;const n=Object.keys(_o).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown custom tag "${t}"; use one of ${n}`)}))}const jo=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Lo{constructor({compat:t,customTags:e,merge:n,resolveKnownTags:o,schema:r,sortMapEntries:i,toStringDefaults:s}){this.compat=Array.isArray(t)?Mo(t,"compat"):t?Mo(null,t):null,this.merge=!!n,this.name="string"==typeof r&&r||"core",this.knownTags=o?Po:{},this.tags=Mo(e,this.name),this.toStringOptions=s??null,Object.defineProperty(this,Ae,{value:Ln}),Object.defineProperty(this,_e,{value:qn}),Object.defineProperty(this,Pe,{value:Un}),this.sortMapEntries="function"==typeof i?i:!0===i?jo:null}clone(){const t=Object.create(Lo.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function Io(t,e,n,o){if(o&&"object"==typeof o)if(Array.isArray(o))for(let e=0,n=o.length;e<n;++e){const n=o[e],r=Io(t,o,String(e),n);void 0===r?delete o[e]:r!==n&&(o[e]=r)}else if(o instanceof Map)for(const e of Array.from(o.keys())){const n=o.get(e),r=Io(t,o,e,n);void 0===r?o.delete(e):r!==n&&o.set(e,r)}else if(o instanceof Set)for(const e of Array.from(o)){const n=Io(t,o,e,e);void 0===n?o.delete(e):n!==e&&(o.delete(e),o.add(n))}else for(const[e,n]of Object.entries(o)){const r=Io(t,o,e,n);void 0===r?delete o[e]:r!==n&&(o[e]=r)}return t.call(e,n,o)}class Do{constructor(t,e,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Me,{value:Ne});let o=null;"function"==typeof e||Array.isArray(e)?o=e:void 0===n&&e&&(n=e,e=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=r;let{version:i}=r;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new Ge({version:i}),this.setSchema(i,n),this.contents=void 0===t?null:this.createNode(t,o,n)}clone(){const t=Object.create(Do.prototype,{[Me]:{value:Ne}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=He(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){Uo(this.contents)&&this.contents.add(t)}addIn(t,e){Uo(this.contents)&&this.contents.addIn(t,e)}createAlias(t,e){if(!t.anchor){const n=Xe(this);t.anchor=!e||n.has(e)?ze(e||"a",n):e}return new Ze(t.anchor)}createNode(t,e,n){let o;if("function"==typeof e)t=e.call({"":t},"",t),o=e;else if(Array.isArray(e)){const t=t=>"number"==typeof t||t instanceof String||t instanceof Number,n=e.filter(t).map(String);n.length>0&&(e=e.concat(n)),o=e}else void 0===n&&e&&(n=e,e=void 0);const{aliasDuplicateObjects:r,anchorPrefix:i,flow:s,keepUndefined:a,onTagObj:c,tag:l}=n??{},{onAnchor:u,setAnchors:d,sourceObjects:f}=function(t,e){const n=[],o=new Map;let r=null;return{onAnchor:o=>{n.push(o),r||(r=Xe(t));const i=ze(e,r);return r.add(i),i},setAnchors:()=>{for(const t of n){const e=o.get(t);if("object"!=typeof e||!e.anchor||!Ue(e.node)&&!Be(e.node)){const e=new Error("Failed to resolve repeated object (this should not happen)");throw e.source=t,e}e.node.anchor=e.anchor}},sourceObjects:o}}(this,i||"a"),h=rn(t,l,{aliasDuplicateObjects:r??!0,keepUndefined:a??!1,onAnchor:u,onTagObj:c,replacer:o,schema:this.schema,sourceObjects:f});return s&&Be(h)&&(h.flow=!0),d(),h}createPair(t,e,n={}){const o=this.createNode(t,null,n),r=this.createNode(e,null,n);return new Nn(o,r)}delete(t){return!!Uo(this.contents)&&this.contents.delete(t)}deleteIn(t){return an(t)?null!=this.contents&&(this.contents=null,!0):!!Uo(this.contents)&&this.contents.deleteIn(t)}get(t,e){return Be(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return an(t)?!e&&Ue(this.contents)?this.contents.value:this.contents:Be(this.contents)?this.contents.getIn(t,e):void 0}has(t){return!!Be(this.contents)&&this.contents.has(t)}hasIn(t){return an(t)?void 0!==this.contents:!!Be(this.contents)&&this.contents.hasIn(t)}set(t,e){null==this.contents?this.contents=sn(this.schema,[t],e):Uo(this.contents)&&this.contents.set(t,e)}setIn(t,e){an(t)?this.contents=e:null==this.contents?this.contents=sn(this.schema,Array.from(t),e):Uo(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e={}){let n;switch("number"==typeof t&&(t=String(t)),t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Ge({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Ge({version:t}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const e=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${e}`)}}if(e.schema instanceof Object)this.schema=e.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Lo(Object.assign(n,e))}}toJS({json:t,jsonArg:e,mapAsMap:n,maxAliasCount:o,onAnchor:r,reviver:i}={}){const s={anchors:new Map,doc:this,keep:!t,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof o?o:100,stringify:kn},a=en(this.contents,e??"",s);if("function"==typeof r)for(const{count:t,res:e}of s.anchors.values())r(e,t);return"function"==typeof i?Io(i,{"":a},"",a):a}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}return function(t,e){const n=[];let o=!0===e.directives;if(!1!==e.directives&&t.directives){const e=t.directives.toString(t);e?(n.push(e),o=!0):t.directives.docStart&&(o=!0)}o&&n.push("---");const r=$n(t,e),{commentString:i}=r.options;if(t.commentBefore){1!==n.length&&n.unshift("");const e=i(t.commentBefore);n.unshift(un(e,""))}let s=!1,a=null;if(t.contents){if(He(t.contents)){if(t.contents.spaceBefore&&o&&n.push(""),t.contents.commentBefore){const e=i(t.contents.commentBefore);n.push(un(e,""))}r.forceBlockIndent=!!t.comment,a=t.contents.comment}const e=a?void 0:()=>s=!0;let c=kn(t.contents,r,(()=>a=null),e);a&&(c+=dn(c,"",i(a))),"|"!==c[0]&&">"!==c[0]||"---"!==n[n.length-1]?n.push(c):n[n.length-1]=`--- ${c}`}else n.push(kn(t.contents,r));if(t.directives?.docEnd)if(t.comment){const e=i(t.comment);e.includes("\n")?(n.push("..."),n.push(un(e,""))):n.push(`... ${e}`)}else n.push("...");else{let e=t.comment;e&&s&&(e=e.replace(/^\n+/,"")),e&&(s&&!a||""===n[n.length-1]||n.push(""),n.push(un(i(e),"")))}return n.join("\n")+"\n"}(this,t)}}function Uo(t){if(Be(t))return!0;throw new Error("Expected a YAML collection as document contents")}class qo extends Error{constructor(t,e,n,o){super(),this.name=t,this.code=n,this.message=o,this.pos=e}}class Bo extends qo{constructor(t,e,n){super("YAMLParseError",t,e,n)}}class Ho extends qo{constructor(t,e,n){super("YAMLWarning",t,e,n)}}const Fo=(t,e)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((t=>e.linePos(t)));const{line:o,col:r}=n.linePos[0];n.message+=` at line ${o}, column ${r}`;let i=r-1,s=t.substring(e.lineStarts[o-1],e.lineStarts[o]).replace(/[\n\r]+$/,"");if(i>=60&&s.length>80){const t=Math.min(i-39,s.length-79);s="…"+s.substring(t),i-=t-1}if(s.length>80&&(s=s.substring(0,79)+"…"),o>1&&/^ *$/.test(s.substring(0,i))){let n=t.substring(e.lineStarts[o-2],e.lineStarts[o-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),s=n+s}if(/[^ ]/.test(s)){let t=1;const e=n.linePos[1];e&&e.line===o&&e.col>r&&(t=Math.max(1,Math.min(e.col-r,80-i)));const a=" ".repeat(i)+"^".repeat(t);n.message+=`:\n\n${s}\n${a}\n`}};function Ro(t,{flow:e,indicator:n,next:o,offset:r,onError:i,startOnNewline:s}){let a=!1,c=s,l=s,u="",d="",f=!1,h=!1,p=!1,m=null,g=null,y=null,v=null,b=null;for(const o of t)switch(p&&("space"!==o.type&&"newline"!==o.type&&"comma"!==o.type&&i(o.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),o.type){case"space":!e&&c&&"doc-start"!==n&&"\t"===o.source[0]&&i(o,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||i(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=o.source.substring(1)||" ";u?u+=d+t:u=t,d="",c=!1;break}case"newline":c?u?u+=o.source:a=!0:d+=o.source,c=!0,f=!0,(m||g)&&(h=!0),l=!0;break;case"anchor":m&&i(o,"MULTIPLE_ANCHORS","A node can have at most one anchor"),o.source.endsWith(":")&&i(o.offset+o.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=o,null===b&&(b=o.offset),c=!1,l=!1,p=!0;break;case"tag":g&&i(o,"MULTIPLE_TAGS","A node can have at most one tag"),g=o,null===b&&(b=o.offset),c=!1,l=!1,p=!0;break;case n:(m||g)&&i(o,"BAD_PROP_ORDER",`Anchors and tags must be after the ${o.source} indicator`),v&&i(o,"UNEXPECTED_TOKEN",`Unexpected ${o.source} in ${e??"collection"}`),v=o,c=!1,l=!1;break;case"comma":if(e){y&&i(o,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),y=o,c=!1,l=!1;break}default:i(o,"UNEXPECTED_TOKEN",`Unexpected ${o.type} token`),c=!1,l=!1}const w=t[t.length-1],$=w?w.offset+w.source.length:r;return p&&o&&"space"!==o.type&&"newline"!==o.type&&"comma"!==o.type&&("scalar"!==o.type||""!==o.source)&&i(o.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:y,found:v,spaceBefore:a,comment:u,hasNewline:f,hasNewlineAfterProp:h,anchor:m,tag:g,end:$,start:b??$}}function Yo(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes("\n"))return!0;if(t.end)for(const e of t.end)if("newline"===e.type)return!0;return!1;case"flow-collection":for(const e of t.items){for(const t of e.start)if("newline"===t.type)return!0;if(e.sep)for(const t of e.sep)if("newline"===t.type)return!0;if(Yo(e.key)||Yo(e.value))return!0}return!1;default:return!0}}function Wo(t,e,n){if("flow-collection"===e?.type){const o=e.end[0];if(o.indent===t&&("]"===o.source||"}"===o.source)&&Yo(e)){n(o,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}}function Ko(t,e,n){const{uniqueKeys:o}=t.options;if(!1===o)return!1;const r="function"==typeof o?o:(e,n)=>e===n||Ue(e)&&Ue(n)&&e.value===n.value&&!("<<"===e.value&&t.schema.merge);return e.some((t=>r(t.key,n)))}const Vo="All mapping items must start at the same column";function Jo(t,e,n,o){let r="";if(t){let i=!1,s="";for(const a of t){const{source:t,type:c}=a;switch(c){case"space":i=!0;break;case"comment":{n&&!i&&o(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=t.substring(1)||" ";r?r+=s+e:r=e,s="";break}case"newline":r&&(s+=t),i=!0;break;default:o(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=t.length}}return{comment:r,offset:e}}const Go="Block collections are not allowed within flow collections",Qo=t=>t&&("block-map"===t.type||"block-seq"===t.type);function Xo(t,e,n,o,r){let i;switch(n.type){case"block-map":i=function({composeNode:t,composeEmptyNode:e},n,o,r){const i=new jn(n.schema);n.atRoot&&(n.atRoot=!1);let s=o.offset,a=null;for(const c of o.items){const{start:l,key:u,sep:d,value:f}=c,h=Ro(l,{indicator:"explicit-key-ind",next:u??d?.[0],offset:s,onError:r,startOnNewline:!0}),p=!h.found;if(p){if(u&&("block-seq"===u.type?r(s,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==o.indent&&r(s,"BAD_INDENT",Vo)),!h.anchor&&!h.tag&&!d){a=h.end,h.comment&&(i.comment?i.comment+="\n"+h.comment:i.comment=h.comment);continue}(h.hasNewlineAfterProp||Yo(u))&&r(u??l[l.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else h.found?.indent!==o.indent&&r(s,"BAD_INDENT",Vo);const m=h.end,g=u?t(n,u,h,r):e(n,m,l,null,h,r);n.schema.compat&&Wo(o.indent,u,r),Ko(n,i.items,g)&&r(m,"DUPLICATE_KEY","Map keys must be unique");const y=Ro(d??[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:r,startOnNewline:!u||"block-scalar"===u.type});if(s=y.end,y.found){p&&("block-map"!==f?.type||y.hasNewline||r(s,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&h.start<y.found.offset-1024&&r(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const a=f?t(n,f,y,r):e(n,s,d,null,y,r);n.schema.compat&&Wo(o.indent,f,r),s=a.range[2];const l=new Nn(g,a);n.options.keepSourceTokens&&(l.srcToken=c),i.items.push(l)}else{p&&r(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),y.comment&&(g.comment?g.comment+="\n"+y.comment:g.comment=y.comment);const t=new Nn(g);n.options.keepSourceTokens&&(t.srcToken=c),i.items.push(t)}}return a&&a<s&&r(a,"IMPOSSIBLE","Map comment with trailing content"),i.range=[o.offset,s,a??s],i}(t,e,n,r);break;case"block-seq":i=function({composeNode:t,composeEmptyNode:e},n,o,r){const i=new In(n.schema);n.atRoot&&(n.atRoot=!1);let s=o.offset,a=null;for(const{start:c,value:l}of o.items){const u=Ro(c,{indicator:"seq-item-ind",next:l,offset:s,onError:r,startOnNewline:!0});if(!u.found){if(!(u.anchor||u.tag||l)){a=u.end,u.comment&&(i.comment=u.comment);continue}l&&"block-seq"===l.type?r(u.end,"BAD_INDENT","All sequence items must start at the same column"):r(s,"MISSING_CHAR","Sequence item without - indicator")}const d=l?t(n,l,u,r):e(n,u.end,c,null,u,r);n.schema.compat&&Wo(o.indent,l,r),s=d.range[2],i.items.push(d)}return i.range=[o.offset,s,a??s],i}(t,e,n,r);break;case"flow-collection":i=function({composeNode:t,composeEmptyNode:e},n,o,r){const i="{"===o.start.source,s=i?"flow map":"flow sequence",a=i?new jn(n.schema):new In(n.schema);a.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1);let l=o.offset+o.start.source.length;for(let c=0;c<o.items.length;++c){const u=o.items[c],{start:d,key:f,sep:h,value:p}=u,m=Ro(d,{flow:s,indicator:"explicit-key-ind",next:f??h?.[0],offset:l,onError:r,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||h||p)){0===c&&m.comma?r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):c<o.items.length-1&&r(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),m.comment&&(a.comment?a.comment+="\n"+m.comment:a.comment=m.comment),l=m.end;continue}!i&&n.options.strict&&Yo(f)&&r(f,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===c)m.comma&&r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(m.comma||r(m.start,"MISSING_CHAR",`Missing , between ${s} items`),m.comment){let t="";t:for(const e of d)switch(e.type){case"comma":case"space":break;case"comment":t=e.source.substring(1);break t;default:break t}if(t){let e=a.items[a.items.length-1];De(e)&&(e=e.value??e.key),e.comment?e.comment+="\n"+t:e.comment=t,m.comment=m.comment.substring(t.length+1)}}if(i||h||m.found){const o=m.end,c=f?t(n,f,m,r):e(n,o,d,null,m,r);Qo(f)&&r(c.range,"BLOCK_IN_FLOW",Go);const g=Ro(h??[],{flow:s,indicator:"map-value-ind",next:p,offset:c.range[2],onError:r,startOnNewline:!1});if(g.found){if(!i&&!m.found&&n.options.strict){if(h)for(const t of h){if(t===g.found)break;if("newline"===t.type){r(t,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<g.found.offset-1024&&r(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&p.source&&":"===p.source[0]?r(p,"MISSING_CHAR",`Missing space after : in ${s}`):r(g.start,"MISSING_CHAR",`Missing , or : between ${s} items`));const y=p?t(n,p,g,r):g.found?e(n,g.end,h,null,g,r):null;y?Qo(p)&&r(y.range,"BLOCK_IN_FLOW",Go):g.comment&&(c.comment?c.comment+="\n"+g.comment:c.comment=g.comment);const v=new Nn(c,y);if(n.options.keepSourceTokens&&(v.srcToken=u),i){const t=a;Ko(n,t.items,c)&&r(o,"DUPLICATE_KEY","Map keys must be unique"),t.items.push(v)}else{const t=new jn(n.schema);t.flow=!0,t.items.push(v),a.items.push(t)}l=y?y.range[2]:g.end}else{const o=p?t(n,p,m,r):e(n,m.end,h,null,m,r);a.items.push(o),l=o.range[2],Qo(p)&&r(o.range,"BLOCK_IN_FLOW",Go)}}const u=i?"}":"]",[d,...f]=o.end;let h=l;if(d&&d.source===u)h=d.offset+d.source.length;else{const t=s[0].toUpperCase()+s.substring(1);r(l,c?"MISSING_CHAR":"BAD_INDENT",c?`${t} must end with a ${u}`:`${t} in block collection must be sufficiently indented and end with a ${u}`),d&&1!==d.source.length&&f.unshift(d)}if(f.length>0){const t=Jo(f,h,n.options.strict,r);t.comment&&(a.comment?a.comment+="\n"+t.comment:a.comment=t.comment),a.range=[o.offset,h,t.offset]}else a.range=[o.offset,h,h];return a}(t,e,n,r)}if(!o)return i;const s=e.directives.tagName(o.source,(t=>r(o,"TAG_RESOLVE_FAILED",t)));if(!s)return i;const a=i.constructor;if("!"===s||s===a.tagName)return i.tag=a.tagName,i;const c=Ie(i)?"map":"seq";let l=e.schema.tags.find((t=>t.collection===c&&t.tag===s));if(!l){const t=e.schema.knownTags[s];if(!t||t.collection!==c)return r(o,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),i.tag=s,i;e.schema.tags.push(Object.assign({},t,{default:!1})),l=t}const u=l.resolve(i,(t=>r(o,"TAG_RESOLVE_FAILED",t)),e.options),d=He(u)?u:new on(u);return d.range=i.range,d.tag=s,l?.format&&(d.format=l.format),d}function zo(t,e,n){const o=t.offset,r=function({offset:t,props:e},n,o){if("block-scalar-header"!==e[0].type)return o(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=e[0],i=r[0];let s=0,a="",c=-1;for(let e=1;e<r.length;++e){const n=r[e];if(a||"-"!==n&&"+"!==n){const o=Number(n);!s&&o?s=o:-1===c&&(c=t+e)}else a=n}-1!==c&&o(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let l=!1,u="",d=r.length;for(let t=1;t<e.length;++t){const r=e[t];switch(r.type){case"space":l=!0;case"newline":d+=r.source.length;break;case"comment":if(n&&!l){o(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters")}d+=r.source.length,u=r.source.substring(1);break;case"error":o(r,"UNEXPECTED_TOKEN",r.message),d+=r.source.length;break;default:{o(r,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${r.type}`);const t=r.source;t&&"string"==typeof t&&(d+=t.length)}}}return{mode:i,indent:s,chomp:a,comment:u,length:d}}(t,e,n);if(!r)return{value:"",type:null,comment:"",range:[o,o,o]};const i=">"===r.mode?on.BLOCK_FOLDED:on.BLOCK_LITERAL,s=t.source?function(t){const e=t.split(/\n( *)/),n=e[0],o=n.match(/^( *)/),r=[o?.[1]?[o[1],n.slice(o[1].length)]:["",n]];for(let t=1;t<e.length;t+=2)r.push([e[t],e[t+1]]);return r}(t.source):[];let a=s.length;for(let t=s.length-1;t>=0;--t){const e=s[t][1];if(""!==e&&"\r"!==e)break;a=t}if(0===a){const e="+"===r.chomp&&s.length>0?"\n".repeat(Math.max(1,s.length-1)):"";let n=o+r.length;return t.source&&(n+=t.source.length),{value:e,type:i,comment:r.comment,range:[o,n,n]}}let c=t.indent+r.indent,l=t.offset+r.length,u=0;for(let t=0;t<a;++t){const[e,o]=s[t];if(""!==o&&"\r"!==o){if(e.length<c){const t="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+e.length,"MISSING_CHAR",t)}0===r.indent&&(c=e.length),u=t;break}0===r.indent&&e.length>c&&(c=e.length),l+=e.length+o.length+1}for(let t=s.length-1;t>=a;--t)s[t][0].length>c&&(a=t+1);let d="",f="",h=!1;for(let t=0;t<u;++t)d+=s[t][0].slice(c)+"\n";for(let t=u;t<a;++t){let[e,o]=s[t];l+=e.length+o.length+1;const a="\r"===o[o.length-1];if(a&&(o=o.slice(0,-1)),o&&e.length<c){const t=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(l-o.length-(a?2:1),"BAD_INDENT",t),e=""}i===on.BLOCK_LITERAL?(d+=f+e.slice(c)+o,f="\n"):e.length>c||"\t"===o[0]?(" "===f?f="\n":h||"\n"!==f||(f="\n\n"),d+=f+e.slice(c)+o,f="\n",h=!0):""===o?"\n"===f?d+="\n":f="\n":(d+=f+o,f=" ",h=!1)}switch(r.chomp){case"-":break;case"+":for(let t=a;t<s.length;++t)d+="\n"+s[t][0].slice(c);"\n"!==d[d.length-1]&&(d+="\n");break;default:d+="\n"}const p=o+r.length+t.source.length;return{value:d,type:i,comment:r.comment,range:[o,p,p]}}function Zo(t,e,n){const{offset:o,type:r,source:i,end:s}=t;let a,c;const l=(t,e,r)=>n(o+t,e,r);switch(r){case"scalar":a=on.PLAIN,c=function(t,e){let n="";switch(t[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${t[0]}`;break;case"@":case"`":n=`reserved character ${t[0]}`}n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`);return tr(t)}(i,l);break;case"single-quoted-scalar":a=on.QUOTE_SINGLE,c=function(t,e){"'"===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR","Missing closing 'quote");return tr(t.slice(1,-1)).replace(/''/g,"'")}(i,l);break;case"double-quoted-scalar":a=on.QUOTE_DOUBLE,c=function(t,e){let n="";for(let o=1;o<t.length-1;++o){const r=t[o];if("\r"!==r||"\n"!==t[o+1])if("\n"===r){const{fold:e,offset:r}=er(t,o);n+=e,o=r}else if("\\"===r){let r=t[++o];const i=nr[r];if(i)n+=i;else if("\n"===r)for(r=t[o+1];" "===r||"\t"===r;)r=t[1+ ++o];else if("\r"===r&&"\n"===t[o+1])for(r=t[1+ ++o];" "===r||"\t"===r;)r=t[1+ ++o];else if("x"===r||"u"===r||"U"===r){const i={x:2,u:4,U:8}[r];n+=or(t,o+1,i,e),o+=i}else{const r=t.substr(o-1,2);e(o-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const e=o;let i=t[o+1];for(;" "===i||"\t"===i;)i=t[1+ ++o];"\n"===i||"\r"===i&&"\n"===t[o+2]||(n+=o>e?t.slice(e,o+1):r)}else n+=r}'"'===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR",'Missing closing "quote');return n}(i,l);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[o,o+i.length,o+i.length]}}const u=o+i.length,d=Jo(s,u,e,n);return{value:c,type:a,comment:d.comment,range:[o,u,d.offset]}}function tr(t){let e,n;try{e=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(t){e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let o=e.exec(t);if(!o)return t;let r=o[1],i=" ",s=e.lastIndex;for(n.lastIndex=s;o=n.exec(t);)""===o[1]?"\n"===i?r+=i:i="\n":(r+=i+o[1],i=" "),s=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=s,o=a.exec(t),r+i+(o?.[1]??"")}function er(t,e){let n="",o=t[e+1];for(;!(" "!==o&&"\t"!==o&&"\n"!==o&&"\r"!==o||"\r"===o&&"\n"!==t[e+2]);)"\n"===o&&(n+="\n"),o=t[(e+=1)+1];return n||(n=" "),{fold:n,offset:e}}const nr={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function or(t,e,n,o){const r=t.substr(e,n),i=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(i)){const r=t.substr(e-2,n+2);return o(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),r}return String.fromCodePoint(i)}function rr(t,e,n,o){const{value:r,type:i,comment:s,range:a}="block-scalar"===e.type?zo(e,t.options.strict,o):Zo(e,t.options.strict,o),c=n?t.directives.tagName(n.source,(t=>o(n,"TAG_RESOLVE_FAILED",t))):null,l=n&&c?function(t,e,n,o,r){if("!"===n)return t[_e];const i=[];for(const e of t.tags)if(!e.collection&&e.tag===n){if(!e.default||!e.test)return e;i.push(e)}for(const t of i)if(t.test?.test(e))return t;const s=t.knownTags[n];if(s&&!s.collection)return t.tags.push(Object.assign({},s,{default:!1,test:void 0})),s;return r(o,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),t[_e]}(t.schema,r,c,n,o):"scalar"===e.type?function({directives:t,schema:e},n,o,r){const i=e.tags.find((t=>t.default&&t.test?.test(n)))||e[_e];if(e.compat){const s=e.compat.find((t=>t.default&&t.test?.test(n)))??e[_e];if(i.tag!==s.tag){r(o,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(i.tag)} or ${t.tagString(s.tag)}`,!0)}}return i}(t,r,e,o):t.schema[_e];let u;try{const i=l.resolve(r,(t=>o(n??e,"TAG_RESOLVE_FAILED",t)),t.options);u=Ue(i)?i:new on(i)}catch(t){const i=t instanceof Error?t.message:String(t);o(n??e,"TAG_RESOLVE_FAILED",i),u=new on(r)}return u.range=a,u.source=r,i&&(u.type=i),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function ir(t,e,n){if(e){null===n&&(n=e.length);for(let o=n-1;o>=0;--o){let n=e[o];switch(n.type){case"space":case"comment":case"newline":t-=n.source.length;continue}for(n=e[++o];"space"===n?.type;)t+=n.source.length,n=e[++o];break}}return t}const sr={composeNode:ar,composeEmptyNode:cr};function ar(t,e,n,o){const{spaceBefore:r,comment:i,anchor:s,tag:a}=n;let c,l=!0;switch(e.type){case"alias":c=function({options:t},{offset:e,source:n,end:o},r){const i=new Ze(n.substring(1));""===i.source&&r(e,"BAD_ALIAS","Alias cannot be an empty string");i.source.endsWith(":")&&r(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const s=e+n.length,a=Jo(o,s,t.strict,r);i.range=[e,s,a.offset],a.comment&&(i.comment=a.comment);return i}(t,e,o),(s||a)&&o(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=rr(t,e,a,o),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=Xo(sr,t,e,a,o),s&&(c.anchor=s.source.substring(1));break;default:o(e,"UNEXPECTED_TOKEN","error"===e.type?e.message:`Unsupported token (type: ${e.type})`),c=cr(t,e.offset,void 0,null,n,o),l=!1}return s&&""===c.anchor&&o(s,"BAD_ALIAS","Anchor cannot be an empty string"),r&&(c.spaceBefore=!0),i&&("scalar"===e.type&&""===e.source?c.comment=i:c.commentBefore=i),t.options.keepSourceTokens&&l&&(c.srcToken=e),c}function cr(t,e,n,o,{spaceBefore:r,comment:i,anchor:s,tag:a,end:c},l){const u=rr(t,{type:"scalar",offset:ir(e,n,o),indent:-1,source:""},a,l);return s&&(u.anchor=s.source.substring(1),""===u.anchor&&l(s,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(u.spaceBefore=!0),i&&(u.comment=i,u.range[2]=c),u}function lr(t){if("number"==typeof t)return[t,t+1];if(Array.isArray(t))return 2===t.length?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+("string"==typeof n?n.length:1)]}function ur(t){let e="",n=!1,o=!1;for(let r=0;r<t.length;++r){const i=t[r];switch(i[0]){case"#":e+=(""===e?"":o?"\n\n":"\n")+(i.substring(1)||" "),n=!0,o=!1;break;case"%":"#"!==t[r+1]?.[0]&&(r+=1),n=!1;break;default:n||(o=!0),n=!1}}return{comment:e,afterEmptyLine:o}}class dr{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,e,n,o)=>{const r=lr(t);o?this.warnings.push(new Ho(r,e,n)):this.errors.push(new Bo(r,e,n))},this.directives=new Ge({version:t.version||"1.2"}),this.options=t}decorate(t,e){const{comment:n,afterEmptyLine:o}=ur(this.prelude);if(n){const r=t.contents;if(e)t.comment=t.comment?`${t.comment}\n${n}`:n;else if(o||t.directives.docStart||!r)t.commentBefore=n;else if(Be(r)&&!r.flow&&r.items.length>0){let t=r.items[0];De(t)&&(t=t.key);const e=t.commentBefore;t.commentBefore=e?`${n}\n${e}`:n}else{const t=r.commentBefore;r.commentBefore=t?`${n}\n${t}`:n}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:ur(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,e=!1,n=-1){for(const e of t)yield*this.next(e);yield*this.end(e,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,((e,n,o)=>{const r=lr(t);r[0]+=e,this.onError(r,"BAD_DIRECTIVE",n,o)})),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=function(t,e,{offset:n,start:o,value:r,end:i},s){const a=Object.assign({_directives:e},t),c=new Do(void 0,a),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=Ro(o,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:s,startOnNewline:!0});u.found&&(c.directives.docStart=!0,!r||"block-map"!==r.type&&"block-seq"!==r.type||u.hasNewline||s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=r?ar(l,r,u,s):cr(l,u.end,o,null,u,s);const d=c.contents.range[2],f=Jo(i,d,!1,s);return f.comment&&(c.comment=f.comment),c.range=[n,d,f.offset],c}(this.options,this.directives,t,this.onError);this.atDirectives&&!e.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(e,!1),this.doc&&(yield this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new Bo(lr(t),"UNEXPECTED_TOKEN",e);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const e="Unexpected doc-end without preceding document";this.errors.push(new Bo(lr(t),"UNEXPECTED_TOKEN",e));break}this.doc.directives.docEnd=!0;const e=Jo(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const t=this.doc.comment;this.doc.comment=t?`${t}\n${e.comment}`:e.comment}this.doc.range[2]=e.offset;break}default:this.errors.push(new Bo(lr(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const t=Object.assign({_directives:this.directives},this.options),n=new Do(void 0,t);this.atDirectives&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,e,e],this.decorate(n,!1),yield n}}}function fr(t){switch(t){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const hr="0123456789ABCDEFabcdef".split(""),pr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),mr=",[]{}".split(""),gr=" ,[]{}\n\r\t".split(""),yr=t=>!t||gr.includes(t);class vr{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,e=!1){t&&(this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null),this.atEnd=!e;let n=this.next??"stream";for(;n&&(e||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;" "===e||"\t"===e;)e=this.buffer[++t];return!e||"#"===e||"\n"===e||"\r"===e&&"\n"===this.buffer[t+1]}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let n=0;for(;" "===e;)e=this.buffer[++n+t];if("\r"===e){const e=this.buffer[n+t+1];if("\n"===e||!e&&!this.atEnd)return t+n+1}return"\n"===e||n>=this.indentNext||!e&&!this.atEnd?t+n:-1}if("-"===e||"."===e){const e=this.buffer.substr(t,3);if(("---"===e||"..."===e)&&fr(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return("number"!=typeof t||-1!==t&&t<this.pos)&&(t=this.buffer.indexOf("\n",this.pos),this.lineEndPos=t),-1===t?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[t-1]&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(null===t)return this.setNext("stream");if("\ufeff"===t[0]&&(yield*this.pushCount(1),t=t.substring(1)),"%"===t[0]){let e=t.length;const n=t.indexOf("#");if(-1!==n){const o=t[n-1];" "!==o&&"\t"!==o||(e=n-1)}for(;;){const n=t[e-1];if(" "!==n&&"\t"!==n)break;e-=1}const o=(yield*this.pushCount(e))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-o),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-e),yield*this.pushNewline(),"stream"}return yield"",yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if("-"===t||"."===t){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if("---"===t&&fr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===t&&fr(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!fr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if(("-"===t||"?"===t||":"===t)&&fr(e)){const t=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=t,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(null===t)return this.setNext("doc");let e=yield*this.pushIndicators();switch(t[e]){case"#":yield*this.pushCount(t.length-e);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(yr),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return e+=(yield*this.parseBlockScalarHeader()),e+=(yield*this.pushSpaces(!0)),yield*this.pushCount(t.length-e),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,e,n=-1;do{t=yield*this.pushNewline(),t>0?(e=yield*this.pushSpaces(!1),this.indentValue=n=e):e=0,e+=(yield*this.pushSpaces(!0))}while(t+e>0);const o=this.getLine();if(null===o)return this.setNext("flow");if(-1!==n&&n<this.indentNext&&"#"!==o[0]||0===n&&(o.startsWith("---")||o.startsWith("..."))&&fr(o[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===o[0]||"}"===o[0])))return this.flowLevel=0,yield"",yield*this.parseLineStart()}let r=0;for(;","===o[r];)r+=(yield*this.pushCount(1)),r+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(r+=(yield*this.pushIndicators()),o[r]){case void 0:return"flow";case"#":return yield*this.pushCount(o.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(yr),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const t=this.charAt(1);if(this.flowKey||fr(t)||","===t)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if("'"===t)for(;-1!==e&&"'"===this.buffer[e+1];)e=this.buffer.indexOf("'",e+2);else for(;-1!==e;){let t=0;for(;"\\"===this.buffer[e-1-t];)t+=1;if(t%2==0)break;e=this.buffer.indexOf('"',e+1)}const n=this.buffer.substring(0,e);let o=n.indexOf("\n",this.pos);if(-1!==o){for(;-1!==o;){const t=this.continueScalar(o+1);if(-1===t)break;o=n.indexOf("\n",t)}-1!==o&&(e=o-("\r"===n[o-1]?2:1))}if(-1===e){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return yield*this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if("+"===e)this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if("-"!==e)break}return yield*this.pushUntil((t=>fr(t)||"#"===t))}*parseBlockScalar(){let t,e=this.pos-1,n=0;t:for(let o=this.pos;t=this.buffer[o];++o)switch(t){case" ":n+=1;break;case"\n":e=o,n=0;break;case"\r":{const t=this.buffer[o+1];if(!t&&!this.atEnd)return this.setNext("block-scalar");if("\n"===t)break}default:break t}if(!t&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const t=this.continueScalar(e+1);if(-1===t)break;e=this.buffer.indexOf("\n",t)}while(-1!==e);if(-1===e){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let t=e-1,o=this.buffer[t];"\r"===o&&(o=this.buffer[--t]);const r=t;for(;" "===o||"\t"===o;)o=this.buffer[--t];if(!("\n"===o&&t>=this.pos&&t+1+n>r))break;e=t}return yield"",yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let e,n=this.pos-1,o=this.pos-1;for(;e=this.buffer[++o];)if(":"===e){const e=this.buffer[o+1];if(fr(e)||t&&","===e)break;n=o}else if(fr(e)){let r=this.buffer[o+1];if("\r"===e&&("\n"===r?(o+=1,e="\n",r=this.buffer[o+1]):n=o),"#"===r||t&&mr.includes(r))break;if("\n"===e){const t=this.continueScalar(o+1);if(-1===t)break;o=Math.max(o,t-2)}}else{if(t&&mr.includes(e))break;n=o}return e||this.atEnd?(yield"",yield*this.pushToIndex(n+1,!0),t?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,e){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(e&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(yr))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,e=this.charAt(1);if(fr(e)||t&&mr.includes(e))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let t=this.pos+2,e=this.buffer[t];for(;!fr(e)&&">"!==e;)e=this.buffer[++t];return yield*this.pushToIndex(">"===e?t+1:t,!1)}{let t=this.pos+1,e=this.buffer[t];for(;e;)if(pr.includes(e))e=this.buffer[++t];else{if("%"!==e||!hr.includes(this.buffer[t+1])||!hr.includes(this.buffer[t+2]))break;e=this.buffer[t+=3]}return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return"\n"===t?yield*this.pushCount(1):"\r"===t&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(t){let e,n=this.pos-1;do{e=this.buffer[++n]}while(" "===e||t&&"\t"===e);const o=n-this.pos;return o>0&&(yield this.buffer.substr(this.pos,o),this.pos=n),o}*pushUntil(t){let e=this.pos,n=this.buffer[e];for(;!t(n);)n=this.buffer[++e];return yield*this.pushToIndex(e,!1)}}class br{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,n=this.lineStarts.length;for(;e<n;){const o=e+n>>1;this.lineStarts[o]<t?e=o+1:n=o}if(this.lineStarts[e]===t)return{line:e+1,col:1};if(0===e)return{line:0,col:t};return{line:e,col:t-this.lineStarts[e-1]+1}}}}function wr(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function $r(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function kr(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function xr(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Sr(t){if(0===t.length)return[];let e=t.length;t:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;"space"===t[++e]?.type;);return t.splice(e,t.length)}function Cr(t){if("flow-seq-start"===t.start.type)for(const e of t.items)!e.sep||e.value||wr(e.start,"explicit-key-ind")||wr(e.sep,"map-value-ind")||(e.key&&(e.value=e.key),delete e.key,kr(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Tr{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new vr,this.onNewLine=t}*parse(t,e=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(t,e))yield*this.next(n);e||(yield*this.end())}*next(t){if(this.source=t,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=t.length);const e=function(t){switch(t){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(t);if(e)if("scalar"===e)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,yield*this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&" "===t[0]&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const e=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:e,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if("doc-end"!==this.type||t&&"doc-end"===t.type){if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(t){return this.stack[this.stack.length-t]}*pop(t){const e=t??this.stack.pop();if(e)if(0===this.stack.length)yield e;else{const t=this.peek(1);switch("block-scalar"===e.type?e.indent="indent"in t?t.indent:0:"flow-collection"===e.type&&"document"===t.type&&(e.indent=0),"flow-collection"===e.type&&Cr(e),t.type){case"document":t.value=e;break;case"block-scalar":t.props.push(e);break;case"block-map":{const n=t.items[t.items.length-1];if(n.value)return t.items.push({start:[],key:e,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:e,sep:[]}),void(this.onKeyLine=!wr(n.start,"explicit-key-ind"));n.value=e;break}case"block-seq":{const n=t.items[t.items.length-1];n.value?t.items.push({start:[],value:e}):n.value=e;break}case"flow-collection":{const n=t.items[t.items.length-1];return void(!n||n.value?t.items.push({start:[],key:e,sep:[]}):n.sep?n.value=e:Object.assign(n,{key:e,sep:[]}))}default:yield*this.pop(),yield*this.pop(e)}if(!("document"!==t.type&&"block-map"!==t.type&&"block-seq"!==t.type||"block-map"!==e.type&&"block-seq"!==e.type)){const n=e.items[e.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===$r(n.start)&&(0===e.indent||n.start.every((t=>"comment"!==t.type||t.indent<e.indent)))&&("document"===t.type?t.end=n.start:t.items.push({start:n.start}),e.items.splice(-1,1))}}else{const t="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:t}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&t.start.push(this.sourceToken),void this.stack.push(t)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":return void(-1!==$r(t.start)?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void t.start.push(this.sourceToken)}const e=this.startBlockValue(t);e?this.stack.push(e):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if("map-value-ind"===this.type){const e=Sr(xr(this.peek(2)));let n;t.end?(n=t.end,n.push(this.sourceToken),delete t.end):n=[this.sourceToken];const o={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:e,key:t,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":return void t.props.push(this.sourceToken);case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,e.value){const n="end"in e.value?e.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else if(e.sep)e.sep.push(this.sourceToken);else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const n=!this.onKeyLine&&this.indent===t.indent&&e.sep;let o=[];if(n&&e.sep&&!e.value){const n=[];for(let o=0;o<e.sep.length;++o){const r=e.sep[o];switch(r.type){case"newline":n.push(o);break;case"space":break;case"comment":r.indent>t.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(o=e.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(n||e.value?(o.push(this.sourceToken),t.items.push({start:o}),this.onKeyLine=!0):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"explicit-key-ind":return e.sep||wr(e.start,"explicit-key-ind")?n||e.value?(o.push(this.sourceToken),t.items.push({start:o})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):e.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(wr(e.start,"explicit-key-ind"))if(e.sep)if(e.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(wr(e.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(kr(e.key)&&!wr(e.sep,"newline")){const t=Sr(e.start),n=e.key,o=e.sep;o.push(this.sourceToken),delete e.key,delete e.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:n,sep:o}]})}else o.length>0?e.sep=e.sep.concat(o,this.sourceToken):e.sep.push(this.sourceToken);else if(wr(e.start,"newline"))Object.assign(e,{key:null,sep:[this.sourceToken]});else{const t=Sr(e.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]})}else e.sep?e.value||n?t.items.push({start:o,key:null,sep:[this.sourceToken]}):wr(e.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(n||e.value?(t.items.push({start:o,key:r,sep:[]}),this.onKeyLine=!0):e.sep?this.stack.push(r):(Object.assign(e,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(t);if(r)return n&&"block-seq"!==r.type&&wr(e.start,"explicit-key-ind")&&t.items.push({start:o}),void this.stack.push(r)}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(e.value){const n="end"in e.value?e.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return;case"anchor":case"tag":if(e.value||this.indent<=t.indent)break;return void e.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==t.indent)break;return void(e.value||wr(e.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken))}if(this.indent>t.indent){const e=this.startBlockValue(t);if(e)return void this.stack.push(e)}yield*this.pop(),yield*this.step()}*flowCollection(t){const e=t.items[t.items.length-1];if("flow-error-end"===this.type){let t;do{yield*this.pop(),t=this.peek(1)}while(t&&"flow-collection"===t.type)}else if(0===t.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!e||e.sep?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken));case"map-value-ind":return void(!e||e.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!e||e.value?t.items.push({start:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!e||e.value?t.items.push({start:[],key:n,sep:[]}):e.sep?this.stack.push(n):Object.assign(e,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void t.end.push(this.sourceToken)}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const e=this.peek(2);if("block-map"===e.type&&("map-value-ind"===this.type&&e.indent===t.indent||"newline"===this.type&&!e.items[e.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==e.type){const n=Sr(xr(e));Cr(t);const o=t.end.splice(1,t.end.length);o.push(this.sourceToken);const r={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const e=Sr(xr(t));return e.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e}]}}case"map-value-ind":{this.onKeyLine=!0;const e=Sr(xr(t));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,e){return"comment"===this.type&&(!(this.indent<=e)&&t.every((t=>"newline"===t.type||"space"===t.type)))}*documentEnd(t){"doc-mode"!==this.type&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Er(t,e={}){const{lineCounter:n,prettyErrors:o}=function(t){const e=!1!==t.prettyErrors;return{lineCounter:t.lineCounter||e&&new br||null,prettyErrors:e}}(e),r=new Tr(n?.addNewLine),i=new dr(e);let s=null;for(const e of i.compose(r.parse(t),!0,t.length))if(s){if("silent"!==s.options.logLevel){s.errors.push(new Bo(e.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else s=e;return o&&n&&(s.errors.forEach(Fo(t,n)),s.warnings.forEach(Fo(t,n))),s}function Nr(t,e,n){let o;"function"==typeof e?o=e:void 0===n&&e&&"object"==typeof e&&(n=e);const r=Er(t,n);if(!r)return null;if(r.warnings.forEach((t=>xn(r.options.logLevel,t))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:o},n))}function Ar(t,e,n){let o=null;if("function"==typeof e||Array.isArray(e)?o=e:void 0===n&&e&&(n=e),"string"==typeof n&&(n=n.length),"number"==typeof n){const t=Math.round(n);n=t<1?void 0:t>8?{indent:8}:{indent:t}}if(void 0===t){const{keepUndefined:t}=n??e??{};if(!t)return}return new Do(t,o,n).toString(n)}function Or(t){return Object(t)===t&&"string"==typeof t.compte&&Number.isFinite(t.montant)&&"Crédit"===t.sens||"Débit"===t.sens}function _r(t){return function(t){return Object(t)===t&&"string"==typeof t.identifiant&&"string"==typeof t.type&&t.date instanceof Date&&!t.opérations||Array.isArray(t.opérations)&&t.opérations.every(Or)}(t)}function Pr(t){return!(Object(t)!==t||"string"!=typeof t.nom||"string"!=typeof t.identifiant||"Physique"!==t.type&&"Morale"!==t.type||t.adresse&&"string"!=typeof t.adresse||t.siret&&("string"!=typeof t.siret||"Morale"!==t.type)||t.compteAssocié·e&&"string"!=typeof t.compteAssocié·e||t.compteFournisseur&&"string"!=typeof t.compteFournisseur||t.compteClient&&"string"!=typeof t.compteClient)}const Mr=t=>!Number.isNaN(t.getTime());function jr(t){return Object(t)===t&&t.débutContrat instanceof Date&&Mr(t.débutContrat)&&null!==t.finContrat?t.finContrat instanceof Date&&Mr(t.finContrat):"string"==typeof t.idPersonne}function Lr(t,e,n,o){if(""===t.trim())return[];const r=void 0===o?Nr(t):Nr(t,o);if(Array.isArray(r)&&r.every(n))return r;throw new TypeError(`Problème dans le format de fichier qui n'est pas reconnu (devrait être ${e}). Début du fichier:\n\n---\n${t.slice(0,100)}\n---`)}function Ir(){return{type:"Envoi facture à client","numéroFacture":"",date:new Date,compteClient:"",identifiant:Math.random().toString(32).slice(2),lignes:[{compteProduit:"",montantHT:0,tauxTVA:"Non applicable"}]}}function Dr(){const t=new Date;return{type:"Fiche de paie",date:t,"débutPériode":t,"finPériode":t,identifiant:Math.random().toString(32).slice(2),"salarié·e":"","rémunération":NaN,cotisations:NaN,"prélèvementÀLaSource":NaN}}function Ur(){return{type:"Réception facture fournisseur",identifiant:Math.random().toString(32).slice(2),compteFournisseur:"",date:new Date,lignes:[{compteProduit:"",montantHT:0,tauxTVA:"Non applicable"}]}}function qr(t){return btoa(unescape(encodeURIComponent(t)))}function Br(t){return decodeURIComponent(escape(atob(t)))}const Hr={headers:{"user-agent":"comptanar https://github.com/comptanar/comptanar.github.io"}};let Fr=Te.defaults(Hr);function Rr(t){return`exercices/${t}/operationsHautNiveau.yml`}var Yr={reset(){Fr=Te.defaults(Hr)},set token(t){Fr=Fr.defaults({headers:{authorization:`token ${t}`}})},set owner(t){Fr=Fr.defaults({owner:t})},set repo(t){Fr=Fr.defaults({repo:t})},getAuthenticatedUser:()=>Fr("/user").then((({data:t})=>(t.login,t))),getOrgs:()=>Fr("/user/orgs").then((({data:t})=>t)),getRepo:(t,e)=>Fr(`/repos/${t}/${e}`),createComptabilityRepo:(t,e)=>Fr("/repos/comptanar/comptabilite/generate",{method:"POST",owner:t,name:e}),getExercices:()=>Fr("/repos/{owner}/{repo}/contents/exercices").then((({data:t})=>{const e=[],n=new Map;for(const{name:o,git_url:r}of t){const t=Number(o),i=Fr(r).then((({data:o})=>{const r=o.tree;if(r.length>=2)throw TypeError("Il ne devrait y avoir qu'un seul fichier opérationsHautNiveau.yml et il y a plusieurs fichiers");const i=r[0],{url:s}=i,a=Fr(s).then((({data:{encoding:e,content:o,sha:r}})=>{if("base64"!==e)throw new TypeError(`type de fichier inconnu: ${e}. On ne sait gérer que 'base64'`);{const e=Br(o),i=Lr(e,"une liste d'opérations de haut niveau",_r,((t,e)=>"date"!==t&&"débutPériode"!==t&&"finPériode"!==t||"string"!=typeof e?e:new Date(e)));n.set(t,{"opérationsHautNiveau":i,sha:r})}}));return e.push(a),a}));e.push(i)}return Promise.all(e).then((()=>n))})),writeExercice(t,e,n,o){return Fr(`/repos/{owner}/{repo}/contents/${Rr(t)}`,{method:"PUT",message:o||`Mise à jour des opérations haut niveau de l'exercice ${t}`,sha:e,content:qr((r=n,Ar(r)))});var r},deleteExercice:(t,e,n)=>Fr(`/repos/{owner}/{repo}/contents/${Rr(t)}`,{method:"DELETE",sha:e,message:n||`Suppression de l'exercice ${t}`}),getPersonnes:Wr("personnes.yml",(t=>Lr(t,"une liste de personnes",Pr))),writePersonnes:Kr("personnes.yml","Mise à jour des personnes",(t=>Ar(t))),getSalariats:Wr("salariats.yml",(t=>Lr(t,"une liste de contrats de salariat",jr,((t,e)=>"débutContrat"!==t&&"finContrat"!==t||"string"!=typeof e?e:new Date(e))))),writeSalariats:Kr("salariats.yml","Mise à jour des salarié⋅es",(t=>Ar(t)))};function Wr(t,e){return async()=>{const{data:{encoding:n,content:o,sha:r}}=await Fr(`/repos/{owner}/{repo}/contents/${t}`);if("string"!=typeof r)throw new TypeError;if("string"!=typeof o)throw new TypeError;if("base64"===n)return{sha:r,data:e(Br(o))};throw new TypeError(`Encodage du fichier ${t} incorrect : on attendait du base64, on a du ${n}`)}}function Kr(t,e,n){return(o,r,i)=>Fr(`/repos/{owner}/{repo}/contents/${t}`,{method:"PUT",message:i||e,sha:o,content:qr(n(r))})}function Vr(t,e,n){const o=t.slice();return o[12]=e[n],o}function Jr(t){let e,n,o,r,i,s,a,c,l=t[3].login+"",u={ctx:t,current:null,token:null,hasCatch:!0,pending:ri,then:Xr,catch:Qr,value:16,error:15,blocks:[,,,]};return wt(a=t[4],u),{c(){e=A("h1"),n=O("Concernant l'organisation "),o=O(l),i=_(),s=P(),u.block.c()},m(t,r){T(t,e,r),x(e,n),x(e,o),T(t,i,r),T(t,s,r),u.block.m(t,u.anchor=r),u.mount=()=>s.parentNode,u.anchor=s,c=!0},p(e,n){t=e,(!c||8&n)&&l!==(l=t[3].login+"")&&D(o,l),u.ctx=t,16&n&&a!==(a=t[4])&&wt(a,u)||$t(u,t,n)},i(t){c||(rt((()=>{c&&(r||(r=bt(e,Gt,{},!0)),r.run(1))})),gt(u.block),c=!0)},o(t){r||(r=bt(e,Gt,{},!1)),r.run(0);for(let t=0;t<3;t+=1){yt(u.blocks[t])}c=!1},d(t){t&&E(e),t&&r&&r.end(),t&&E(i),t&&E(s),u.block.d(t),u.token=null,u=null}}}function Gr(t){let e,n,o,r,i,s,a,c,l,u={ctx:t,current:null,token:null,hasCatch:!0,pending:ci,then:si,catch:ii,value:11,error:15,blocks:[,,,]};return wt(c=t[2],u),{c(){e=A("h1"),n=O("Yello "),o=O(t[0]),r=O(", tu veux faire de la comptabilité sur quelle\n            organisation ?"),s=_(),a=P(),u.block.c()},m(t,i){T(t,e,i),x(e,n),x(e,o),x(e,r),T(t,s,i),T(t,a,i),u.block.m(t,u.anchor=i),u.mount=()=>a.parentNode,u.anchor=a,l=!0},p(e,n){t=e,(!l||1&n)&&D(o,t[0]),u.ctx=t,4&n&&c!==(c=t[2])&&wt(c,u)||$t(u,t,n)},i(t){l||(rt((()=>{l&&(i||(i=bt(e,Gt,{},!0)),i.run(1))})),gt(u.block),l=!0)},o(t){i||(i=bt(e,Gt,{},!1)),i.run(0);for(let t=0;t<3;t+=1){yt(u.blocks[t])}l=!1},d(t){t&&E(e),t&&i&&i.end(),t&&E(s),t&&E(a),u.block.d(t),u.token=null,u=null}}}function Qr(t){let e,n,r,i,s=t[15]+"";return{c(){e=A("div"),e.textContent="Erreur dans le chargement du repo de comptabilité.",n=_(),r=A("div"),i=O(s)},m(t,o){T(t,e,o),T(t,n,o),T(t,r,o),x(r,i)},p(t,e){16&e&&s!==(s=t[15]+"")&&D(i,s)},i:o,o:o,d(t){t&&E(e),t&&E(n),t&&E(r)}}}function Xr(t){let e,n,o,r;const i=[ti,Zr,zr],s=[];function a(t,e){return t[16]?0:t[5]?2:1}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),o=P()},m(t,n){s[e].m(t,n),T(t,o,n),r=!0},p(t,r){let c=e;e=a(t),e===c?s[e].p(t,r):(pt(),yt(s[c],1,1,(()=>{s[c]=null})),mt(),n=s[e],n?n.p(t,r):(n=s[e]=i[e](t),n.c()),gt(n,1),n.m(o.parentNode,o))},i(t){r||(gt(n),r=!0)},o(t){yt(n),r=!1},d(t){s[e].d(t),t&&E(o)}}}function zr(t){let e,n,o,r={ctx:t,current:null,token:null,hasCatch:!0,pending:oi,then:ni,catch:ei,value:11,error:15,blocks:[,,,]};return wt(n=t[5],r),{c(){e=P(),r.block.c()},m(t,n){T(t,e,n),r.block.m(t,r.anchor=n),r.mount=()=>e.parentNode,r.anchor=e,o=!0},p(e,o){t=e,r.ctx=t,32&o&&n!==(n=t[5])&&wt(n,r)||$t(r,t,o)},i(t){o||(gt(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){yt(r.blocks[t])}o=!1},d(t){t&&E(e),r.block.d(t),r.token=null,r=null}}}function Zr(t){let e,n,o,r,i,s,a,c,l,u,d,f,h,p,m,g,y,v=t[3].login+"";return{c(){e=A("section"),n=A("p"),n.textContent="Il n'existe pas de repo de comptabilité dans cette\n                        organisation.",o=_(),r=A("small"),i=O("(Cliquer sur le bouton va créer le repo Github "),s=A("code"),a=O(v),c=O("/"),l=O(di),u=O(")"),d=_(),f=A("p"),h=A("button"),h.textContent="Créer un repo de comptabilité",L(e,"class","svelte-j7btkr")},m(p,v){T(p,e,v),x(e,n),x(e,o),x(e,r),x(r,i),x(r,s),x(s,a),x(s,c),x(s,l),x(r,u),x(e,d),x(e,f),x(f,h),m=!0,g||(y=M(h,"click",t[10]),g=!0)},p(t,e){(!m||8&e)&&v!==(v=t[3].login+"")&&D(a,v)},i(t){m||(rt((()=>{m&&(p||(p=bt(e,Gt,{},!0)),p.run(1))})),m=!0)},o(t){p||(p=bt(e,Gt,{},!1)),p.run(0),m=!1},d(t){t&&E(e),t&&p&&p.end(),g=!1,y()}}}function ti(t){let e,n,o,r,i,s,a;return{c(){e=A("section"),n=O("La compta est là ! "),o=A("a"),r=O("Y aller =>"),L(o,"href",i="/comptabilite/?org="+t[3].login+"&repo="+t[6]),L(e,"class","svelte-j7btkr")},m(t,i){T(t,e,i),x(e,n),x(e,o),x(o,r),a=!0},p(t,e){(!a||8&e&&i!==(i="/comptabilite/?org="+t[3].login+"&repo="+t[6]))&&L(o,"href",i)},i(t){a||(rt((()=>{a&&(s||(s=bt(e,Gt,{},!0)),s.run(1))})),a=!0)},o(t){s||(s=bt(e,Gt,{},!1)),s.run(0),a=!1},d(t){t&&E(e),t&&s&&s.end()}}}function ei(t){let e,n,o,r,i,s,a,c,l,u,d,f,h,p=t[3].login+"",m=t[15]+"";return{c(){e=A("section"),n=A("div"),o=O("Erreur dans la création du repo de comptabilité "),r=A("code"),i=O(p),s=O("/"),a=O(di),c=O("."),l=_(),u=A("div"),d=O(m),L(e,"class","svelte-j7btkr")},m(t,f){T(t,e,f),x(e,n),x(n,o),x(n,r),x(r,i),x(r,s),x(r,a),x(n,c),x(e,l),x(e,u),x(u,d),h=!0},p(t,e){(!h||8&e)&&p!==(p=t[3].login+"")&&D(i,p),(!h||32&e)&&m!==(m=t[15]+"")&&D(d,m)},i(t){h||(rt((()=>{h&&(f||(f=bt(e,Gt,{},!0)),f.run(1))})),h=!0)},o(t){f||(f=bt(e,Gt,{},!1)),f.run(0),h=!1},d(t){t&&E(e),t&&f&&f.end()}}}function ni(t){let e,n,o,r,i,s,a,c;return{c(){e=A("section"),n=A("p"),n.textContent="Repo créé !",o=_(),r=A("a"),i=O("Allé, on va faire de la compta !"),L(r,"href",s="/comptabilite?org="+t[3].login+"&repo="+t[6]),L(e,"class","svelte-j7btkr")},m(t,s){T(t,e,s),x(e,n),x(e,o),x(e,r),x(r,i),c=!0},p(t,e){(!c||8&e&&s!==(s="/comptabilite?org="+t[3].login+"&repo="+t[6]))&&L(r,"href",s)},i(t){c||(rt((()=>{c&&(a||(a=bt(e,Gt,{},!0)),a.run(1))})),c=!0)},o(t){a||(a=bt(e,Gt,{},!1)),a.run(0),c=!1},d(t){t&&E(e),t&&a&&a.end()}}}function oi(t){let e,n,o,r,i,s,a,c,l,u=t[3].login+"";return{c(){e=A("section"),n=O("(Création de repo "),o=A("code"),r=O(u),i=O("/"),s=O(di),a=O("...)"),L(e,"class","svelte-j7btkr")},m(t,c){T(t,e,c),x(e,n),x(e,o),x(o,r),x(o,i),x(o,s),x(e,a),l=!0},p(t,e){(!l||8&e)&&u!==(u=t[3].login+"")&&D(r,u)},i(t){l||(rt((()=>{l&&(c||(c=bt(e,Gt,{},!0)),c.run(1))})),l=!0)},o(t){c||(c=bt(e,Gt,{},!1)),c.run(0),l=!1},d(t){t&&E(e),t&&c&&c.end()}}}function ri(t){let e,n,r;return{c(){e=A("section"),e.textContent="(Vérification de s'il existe déjà un repo de comptabilité)",L(e,"class","svelte-j7btkr")},m(t,n){T(t,e,n),r=!0},p:o,i(t){r||(rt((()=>{r&&(n||(n=bt(e,Gt,{},!0)),n.run(1))})),r=!0)},o(t){n||(n=bt(e,Gt,{},!1)),n.run(0),r=!1},d(t){t&&E(e),t&&n&&n.end()}}}function ii(t){let e,n,o,r,i,s,a,c=t[15]+"";return{c(){e=A("section"),n=A("div"),n.textContent="Erreur dans le chargement de le liste d'organisation.",o=_(),r=A("div"),i=O(c),L(e,"class","svelte-j7btkr")},m(t,s){T(t,e,s),x(e,n),x(e,o),x(e,r),x(r,i),a=!0},p(t,e){(!a||4&e)&&c!==(c=t[15]+"")&&D(i,c)},i(t){a||(rt((()=>{a&&(s||(s=bt(e,Gt,{},!0)),s.run(1))})),a=!0)},o(t){s||(s=bt(e,Gt,{},!1)),s.run(0),a=!1},d(t){t&&E(e),t&&s&&s.end()}}}function si(t){let e,n,o,r,i,s,a=t[11],c=[];for(let e=0;e<a.length;e+=1)c[e]=ai(Vr(t,a,e));return{c(){e=A("section"),n=A("p"),n.textContent="Voici les organisations possibles :",o=_(),r=A("div");for(let t=0;t<c.length;t+=1)c[t].c();L(r,"class","choices svelte-j7btkr"),L(e,"class","svelte-j7btkr")},m(t,i){T(t,e,i),x(e,n),x(e,o),x(e,r);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(r,null);s=!0},p(t,e){if(132&e){let n;for(a=t[11],n=0;n<a.length;n+=1){const o=Vr(t,a,n);c[n]?c[n].p(o,e):(c[n]=ai(o),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},i(t){s||(rt((()=>{s&&(i||(i=bt(e,Gt,{},!0)),i.run(1))})),s=!0)},o(t){i||(i=bt(e,Gt,{},!1)),i.run(0),s=!1},d(t){t&&E(e),N(c,t),t&&i&&i.end()}}}function ai(t){let e,n,o,r,i,s,a,c,l,u=t[12].login+"";function d(){return t[9](t[12])}return{c(){e=A("a"),n=A("img"),r=_(),i=A("span"),s=O(u),a=_(),L(n,"class","avatar big"),f(n.src,o=`https://github.com/${t[12].login}.png`)||L(n,"src",o),L(n,"alt",""),L(e,"href","#"),L(e,"class","svelte-j7btkr")},m(t,o){T(t,e,o),x(e,n),x(e,r),x(e,i),x(i,s),x(e,a),c||(l=M(e,"click",d),c=!0)},p(e,r){t=e,4&r&&!f(n.src,o=`https://github.com/${t[12].login}.png`)&&L(n,"src",o),4&r&&u!==(u=t[12].login+"")&&D(s,u)},d(t){t&&E(e),c=!1,l()}}}function ci(t){let e,n,r;return{c(){e=A("section"),e.textContent="(chargement des orgs possibles)",L(e,"class","svelte-j7btkr")},m(t,n){T(t,e,n),r=!0},p:o,i(t){r||(rt((()=>{r&&(n||(n=bt(e,Gt,{},!0)),n.run(1))})),r=!0)},o(t){n||(n=bt(e,Gt,{},!1)),n.run(0),r=!1},d(t){t&&E(e),t&&n&&n.end()}}}function li(t){let e,n,o,r;const i=[Gr,Jr],s=[];function a(t,e){return t[3]?1:0}return e=a(t),n=s[e]=i[e](t),{c(){n.c(),o=P()},m(t,n){s[e].m(t,n),T(t,o,n),r=!0},p(t,r){let c=e;e=a(t),e===c?s[e].p(t,r):(pt(),yt(s[c],1,1,(()=>{s[c]=null})),mt(),n=s[e],n?n.p(t,r):(n=s[e]=i[e](t),n.c()),gt(n,1),n.m(o.parentNode,o))},i(t){r||(gt(n),r=!0)},o(t){yt(n),r=!1},d(t){s[e].d(t),t&&E(o)}}}function ui(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],$$slots:{default:[li]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.login=t[0]),2&n&&(o.logout=t[1]),131133&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}const di="comptabilite";function fi(t,e,o){let r,i,s,{login:a}=e,{logout:c}=e,{possibleOrganisations:l=[]}=e,u=di;function d(t){o(3,r=t);const e=Yr.getRepo(r.login,u);o(4,i=e.then((t=>{n(`/comptabilite/?org=${r.login}&repo=${u}`)})).catch((t=>{if(404!==t.status)throw t;console.info("Expected error trying to find a repo that may not exist")})))}function f(){o(5,s=Yr.createComptabilityRepo(r.login,di))}return t.$$set=t=>{"login"in t&&o(0,a=t.login),"logout"in t&&o(1,c=t.logout),"possibleOrganisations"in t&&o(2,l=t.possibleOrganisations)},[a,c,l,r,i,s,u,d,f,t=>d(t),()=>f()]}class hi extends At{constructor(t){super(),Nt(this,t,fi,ui,u,{login:0,logout:1,possibleOrganisations:2})}}function pi(t){let e,n,o,r,i,s,a,c,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,N,P,M,j,I,U,q,B,H;return{c(){e=A("h1"),n=O("Voici la comptabilité de l'organisation "),o=A("code"),r=O(t[2]),i=_(),s=A("section"),a=A("a"),c=A("h2"),c.textContent="Personnes",u=_(),d=A("a"),f=A("h2"),f.textContent="Salariats",p=_(),m=A("a"),g=A("h2"),g.textContent="Factures (ventes)",v=_(),b=A("a"),w=A("h2"),w.textContent="Fiches de paie",k=_(),S=A("a"),C=A("h2"),C.textContent="Achats",P=_(),M=A("a"),j=A("h2"),j.textContent="Import bancaire",U=_(),q=A("a"),B=A("h2"),B.textContent="Compte de résultat et bilan comptable",L(a,"href",l="/comptabilite/personnes?org="+t[2]+"&repo="+t[3]),L(d,"href",h="/comptabilite/salariats?org="+t[2]+"&repo="+t[3]),L(m,"href",y="/comptabilite/ventes?org="+t[2]+"&repo="+t[3]),L(b,"href",$="/comptabilite/fiches-de-paie?org="+t[2]+"&repo="+t[3]),L(S,"href",N="/comptabilite/achats?org="+t[2]+"&repo="+t[3]),L(M,"href",I="/comptabilite/import-banque?org="+t[2]+"&repo="+t[3]),L(q,"href",H="/comptabilite/compte-resultat?org="+t[2]+"&repo="+t[3])},m(t,l){T(t,e,l),x(e,n),x(e,o),x(o,r),T(t,i,l),T(t,s,l),x(s,a),x(a,c),x(s,u),x(s,d),x(d,f),x(s,p),x(s,m),x(m,g),x(s,v),x(s,b),x(b,w),x(s,k),x(s,S),x(S,C),x(s,P),x(s,M),x(M,j),x(s,U),x(s,q),x(q,B)},p(t,e){4&e&&D(r,t[2]),12&e&&l!==(l="/comptabilite/personnes?org="+t[2]+"&repo="+t[3])&&L(a,"href",l),12&e&&h!==(h="/comptabilite/salariats?org="+t[2]+"&repo="+t[3])&&L(d,"href",h),12&e&&y!==(y="/comptabilite/ventes?org="+t[2]+"&repo="+t[3])&&L(m,"href",y),12&e&&$!==($="/comptabilite/fiches-de-paie?org="+t[2]+"&repo="+t[3])&&L(b,"href",$),12&e&&N!==(N="/comptabilite/achats?org="+t[2]+"&repo="+t[3])&&L(S,"href",N),12&e&&I!==(I="/comptabilite/import-banque?org="+t[2]+"&repo="+t[3])&&L(M,"href",I),12&e&&H!==(H="/comptabilite/compte-resultat?org="+t[2]+"&repo="+t[3])&&L(q,"href",H)},d(t){t&&E(e),t&&E(i),t&&E(s)}}}function mi(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],org:t[2],repo:t[3],$$slots:{default:[pi]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.login=t[0]),2&n&&(o.logout=t[1]),4&n&&(o.org=t[2]),8&n&&(o.repo=t[3]),28&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function gi(t,e,n){let{login:o}=e,{logout:r}=e,{org:i}=e,{repo:s}=e;return t.$$set=t=>{"login"in t&&n(0,o=t.login),"logout"in t&&n(1,r=t.logout),"org"in t&&n(2,i=t.org),"repo"in t&&n(3,s=t.repo)},[o,r,i,s]}class yi extends At{constructor(t){super(),Nt(this,t,gi,mi,u,{login:0,logout:1,org:2,repo:3})}}function vi(t){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vi(t)}function bi(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function wi(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function $i(t){wi(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===vi(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function ki(t,e){wi(2,arguments);var n=$i(t).getTime(),o=bi(e);return new Date(n+o)}var xi={};function Si(){return xi}function Ci(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Ti(t){wi(1,arguments);var e=$i(t);return e.setHours(0,0,0,0),e}function Ei(t,e){wi(2,arguments);var n=Ti(t),o=Ti(e),r=n.getTime()-Ci(n),i=o.getTime()-Ci(o);return Math.round((r-i)/864e5)}function Ni(t){return wi(1,arguments),t instanceof Date||"object"===vi(t)&&"[object Date]"===Object.prototype.toString.call(t)}function Ai(t){if(wi(1,arguments),!Ni(t)&&"number"!=typeof t)return!1;var e=$i(t);return!isNaN(Number(e))}function Oi(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function _i(t,e){wi(2,arguments);var n=bi(e);return ki(t,-n)}function Pi(t){wi(1,arguments);var e=1,n=$i(t),o=n.getUTCDay(),r=(o<e?7:0)+o-e;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function Mi(t){wi(1,arguments);var e=$i(t),n=e.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var r=Pi(o),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var s=Pi(i);return e.getTime()>=r.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function ji(t){wi(1,arguments);var e=Mi(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var o=Pi(n);return o}function Li(t,e){var n,o,r,i,s,a,c,l;wi(1,arguments);var u=Si(),d=bi(null!==(n=null!==(o=null!==(r=null!==(i=null==e?void 0:e.weekStartsOn)&&void 0!==i?i:null==e||null===(s=e.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==r?r:u.weekStartsOn)&&void 0!==o?o:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=$i(t),h=f.getUTCDay(),p=(h<d?7:0)+h-d;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function Ii(t,e){var n,o,r,i,s,a,c,l;wi(1,arguments);var u=$i(t),d=u.getUTCFullYear(),f=Si(),h=bi(null!==(n=null!==(o=null!==(r=null!==(i=null==e?void 0:e.firstWeekContainsDate)&&void 0!==i?i:null==e||null===(s=e.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:f.firstWeekContainsDate)&&void 0!==o?o:null===(c=f.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,h),p.setUTCHours(0,0,0,0);var m=Li(p,e),g=new Date(0);g.setUTCFullYear(d,0,h),g.setUTCHours(0,0,0,0);var y=Li(g,e);return u.getTime()>=m.getTime()?d+1:u.getTime()>=y.getTime()?d:d-1}function Di(t,e){var n,o,r,i,s,a,c,l;wi(1,arguments);var u=Si(),d=bi(null!==(n=null!==(o=null!==(r=null!==(i=null==e?void 0:e.firstWeekContainsDate)&&void 0!==i?i:null==e||null===(s=e.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==o?o:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1),f=Ii(t,e),h=new Date(0);h.setUTCFullYear(f,0,d),h.setUTCHours(0,0,0,0);var p=Li(h,e);return p}function Ui(t,e){for(var n=t<0?"-":"",o=Math.abs(t).toString();o.length<e;)o="0"+o;return n+o}var qi={y:function(t,e){var n=t.getUTCFullYear(),o=n>0?n:1-n;return Ui("yy"===e?o%100:o,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):Ui(n+1,2)},d:function(t,e){return Ui(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return Ui(t.getUTCHours()%12||12,e.length)},H:function(t,e){return Ui(t.getUTCHours(),e.length)},m:function(t,e){return Ui(t.getUTCMinutes(),e.length)},s:function(t,e){return Ui(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,o=t.getUTCMilliseconds();return Ui(Math.floor(o*Math.pow(10,n-3)),e.length)}},Bi=qi,Hi="midnight",Fi="noon",Ri="morning",Yi="afternoon",Wi="evening",Ki="night",Vi={G:function(t,e,n){var o=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});default:return n.era(o,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var o=t.getUTCFullYear(),r=o>0?o:1-o;return n.ordinalNumber(r,{unit:"year"})}return Bi.y(t,e)},Y:function(t,e,n,o){var r=Ii(t,o),i=r>0?r:1-r;return"YY"===e?Ui(i%100,2):"Yo"===e?n.ordinalNumber(i,{unit:"year"}):Ui(i,e.length)},R:function(t,e){return Ui(Mi(t),e.length)},u:function(t,e){return Ui(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return Ui(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,e,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return Ui(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,e,n){var o=t.getUTCMonth();switch(e){case"M":case"MM":return Bi.M(t,e);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,e,n){var o=t.getUTCMonth();switch(e){case"L":return String(o+1);case"LL":return Ui(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,e,n,o){var r=function(t,e){wi(1,arguments);var n=$i(t),o=Li(n,e).getTime()-Di(n,e).getTime();return Math.round(o/6048e5)+1}(t,o);return"wo"===e?n.ordinalNumber(r,{unit:"week"}):Ui(r,e.length)},I:function(t,e,n){var o=function(t){wi(1,arguments);var e=$i(t),n=Pi(e).getTime()-ji(e).getTime();return Math.round(n/6048e5)+1}(t);return"Io"===e?n.ordinalNumber(o,{unit:"week"}):Ui(o,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Bi.d(t,e)},D:function(t,e,n){var o=function(t){wi(1,arguments);var e=$i(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var o=e.getTime(),r=n-o;return Math.floor(r/864e5)+1}(t);return"Do"===e?n.ordinalNumber(o,{unit:"dayOfYear"}):Ui(o,e.length)},E:function(t,e,n){var o=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,e,n,o){var r=t.getUTCDay(),i=(r-o.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ui(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,o){var r=t.getUTCDay(),i=(r-o.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ui(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){var o=t.getUTCDay(),r=0===o?7:o;switch(e){case"i":return String(r);case"ii":return Ui(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,e,n){var o=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){var o,r=t.getUTCHours();switch(o=12===r?Fi:0===r?Hi:r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){var o,r=t.getUTCHours();switch(o=r>=17?Wi:r>=12?Yi:r>=4?Ri:Ki,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var o=t.getUTCHours()%12;return 0===o&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Bi.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Bi.H(t,e)},K:function(t,e,n){var o=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(o,{unit:"hour"}):Ui(o,e.length)},k:function(t,e,n){var o=t.getUTCHours();return 0===o&&(o=24),"ko"===e?n.ordinalNumber(o,{unit:"hour"}):Ui(o,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Bi.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Bi.s(t,e)},S:function(t,e){return Bi.S(t,e)},X:function(t,e,n,o){var r=(o._originalDate||t).getTimezoneOffset();if(0===r)return"Z";switch(e){case"X":return Gi(r);case"XXXX":case"XX":return Qi(r);default:return Qi(r,":")}},x:function(t,e,n,o){var r=(o._originalDate||t).getTimezoneOffset();switch(e){case"x":return Gi(r);case"xxxx":case"xx":return Qi(r);default:return Qi(r,":")}},O:function(t,e,n,o){var r=(o._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ji(r,":");default:return"GMT"+Qi(r,":")}},z:function(t,e,n,o){var r=(o._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ji(r,":");default:return"GMT"+Qi(r,":")}},t:function(t,e,n,o){var r=o._originalDate||t;return Ui(Math.floor(r.getTime()/1e3),e.length)},T:function(t,e,n,o){return Ui((o._originalDate||t).getTime(),e.length)}};function Ji(t,e){var n=t>0?"-":"+",o=Math.abs(t),r=Math.floor(o/60),i=o%60;if(0===i)return n+String(r);var s=e||"";return n+String(r)+s+Ui(i,2)}function Gi(t,e){return t%60==0?(t>0?"-":"+")+Ui(Math.abs(t)/60,2):Qi(t,e)}function Qi(t,e){var n=e||"",o=t>0?"-":"+",r=Math.abs(t);return o+Ui(Math.floor(r/60),2)+n+Ui(r%60,2)}var Xi=Vi,zi=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Zi=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},ts={p:Zi,P:function(t,e){var n,o=t.match(/(P+)(p+)?/)||[],r=o[1],i=o[2];if(!i)return zi(t,e);switch(r){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",zi(r,e)).replace("{{time}}",Zi(i,e))}},es=ts,ns=["D","DD"],os=["YY","YYYY"];function rs(t){return-1!==ns.indexOf(t)}function is(t){return-1!==os.indexOf(t)}function ss(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var as={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cs=function(t,e,n){var o,r=as[t];return o="string"==typeof r?r:1===e?r.one:r.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function ls(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,o=t.formats[n]||t.formats[t.defaultWidth];return o}}var us={date:ls({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ls({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ls({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ds={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fs=function(t,e,n,o){return ds[t]};function hs(t){return function(e,n){var o;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&t.formattingValues){var r=t.defaultFormattingWidth||t.defaultWidth,i=null!=n&&n.width?String(n.width):r;o=t.formattingValues[i]||t.formattingValues[r]}else{var s=t.defaultWidth,a=null!=n&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[s]}return o[t.argumentCallback?t.argumentCallback(e):e]}}function ps(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.width,r=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;var s,a=i[0],c=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(c)?gs(c,(function(t){return t.test(a)})):ms(c,(function(t){return t.test(a)}));s=t.valueCallback?t.valueCallback(l):l,s=n.valueCallback?n.valueCallback(s):s;var u=e.slice(a.length);return{value:s,rest:u}}}function ms(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function gs(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function ys(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.match(t.matchPattern);if(!o)return null;var r=o[0],i=e.match(t.parsePattern);if(!i)return null;var s=t.valueCallback?t.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;var a=e.slice(r.length);return{value:s,rest:a}}}var vs={code:"en-US",formatDistance:cs,formatLong:us,formatRelative:fs,localize:{ordinalNumber:function(t,e){var n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:hs({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:hs({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:hs({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:hs({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:hs({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:ys({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}}),era:ps({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ps({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ps({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ps({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ps({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},bs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ws=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$s=/^'([^]*?)'?$/,ks=/''/g,xs=/[a-zA-Z]/;function Ss(t,e,n){var o,r,i,s,a,c,l,u,d,f,h,p,m,g,y,v,b,w;wi(2,arguments);var $=String(e),k=Si(),x=null!==(o=null!==(r=null==n?void 0:n.locale)&&void 0!==r?r:k.locale)&&void 0!==o?o:vs,S=bi(null!==(i=null!==(s=null!==(a=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(l=n.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:k.firstWeekContainsDate)&&void 0!==s?s:null===(d=k.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==i?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=bi(null!==(h=null!==(p=null!==(m=null!==(g=null==n?void 0:n.weekStartsOn)&&void 0!==g?g:null==n||null===(y=n.locale)||void 0===y||null===(v=y.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==m?m:k.weekStartsOn)&&void 0!==p?p:null===(b=k.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==h?h:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var T=$i(t);if(!Ai(T))throw new RangeError("Invalid time value");var E=Ci(T),N=_i(T,E),A={firstWeekContainsDate:S,weekStartsOn:C,locale:x,_originalDate:T},O=$.match(ws).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,es[e])(t,x.formatLong):t})).join("").match(bs).map((function(o){if("''"===o)return"'";var r=o[0];if("'"===r)return Cs(o);var i=Xi[r];if(i)return null!=n&&n.useAdditionalWeekYearTokens||!is(o)||ss(o,e,String(t)),null!=n&&n.useAdditionalDayOfYearTokens||!rs(o)||ss(o,e,String(t)),i(N,o,x.localize,A);if(r.match(xs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return o})).join("");return O}function Cs(t){var e=t.match($s);return e?e[1].replace(ks,"'"):t}var Ts={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Es=function(t,e,n){var o,r=Ts[t];return o="string"==typeof r?r:1===e?r.one:r.other.replace("{{count}}",String(e)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+o:"il y a "+o:o},Ns={date:ls({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:ls({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:ls({formats:{full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},As={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Os=function(t,e,n,o){return As[t]},_s={code:"fr",formatDistance:Es,formatLong:Ns,formatRelative:Os,localize:{ordinalNumber:function(t,e){var n=Number(t),o=null==e?void 0:e.unit;if(0===n)return"0";return n+(1===n?o&&["year","week","hour","minute","second"].includes(o)?"ère":"er":"ème")},era:hs({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},defaultWidth:"wide"}),quarter:hs({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:hs({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},defaultWidth:"wide"}),day:hs({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:hs({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},match:{ordinalNumber:ys({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t)}}),era:ps({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:ps({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ps({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ps({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ps({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};function Ps(t){let e;return{c(){e=A("div"),L(e,"class","lds-dual-ring svelte-c2xuas")},m(t,n){T(t,e,n)},p:o,i:o,o:o,d(t){t&&E(e)}}}class Ms extends At{constructor(t){super(),Nt(this,t,null,Ps,u,{})}}function js(t){return e="comptanar_github_access_token",void 0===(n=t)?Promise.resolve().then((()=>{const t=localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){return t}})):Promise.resolve().then((()=>{let t=Object(n)===n?JSON.stringify(n):n;return localStorage.setItem(e,t),e}));var e,n}function Ls(){return t="comptanar_github_access_token",Promise.resolve().then((()=>{localStorage.removeItem(t)}));var t}const Is=function({state:t,mutations:e}){let n=t;const o=new Set;let r=!1;return{get state(){return n},mutations:function t(e,i=[]){return new Proxy(e,{get(e,n){if(n in e)return t(e[n],[...i,n]);throw new TypeError(`No ${n} property in \`mutations.${i.join(".")}\``)},apply(t,e,s){if("function"!=typeof t)throw new TypeError(`\`mutations.${i.join(".")}\` is not a function`);{const e=Reflect.apply(t,void 0,[n,...s]);return void 0!==e&&(n=e),r||(r=!0,Promise.resolve().then((()=>{for(const t of o)try{t(n)}catch(t){console.error("subscriber error",t)}r=!1}))),e}}})}(e),subscribe:t=>(o.add(t),()=>{o.delete(t)})}}({state:{githubToken:await js(),login:void 0,userOrgs:void 0,org:void 0,repo:void 0,"opérationsHautNiveauByYear":void 0,personnes:void 0,salariats:void 0},mutations:{setToken(t,e){t.githubToken=e},setLogin(t,e){t.login=e},setUserOrgs(t,e){t.userOrgs=e},logout(t){t.githubToken=void 0,t.login=void 0,t.userOrgs=void 0},setOrgAndRepo(t,e,n){t.org=e,t.repo=n},"setOpérationsHautNiveauByYear"(t,e){console.log("opérationsHautNiveauByYear",e),t.opérationsHautNiveauByYear=e},"updateOpérationsHautNiveauSha"(t,e,n){const{sha:o,"opérationsHautNiveau":r}=t.opérationsHautNiveauByYear.get(e);t.opérationsHautNiveauByYear.set(e,{sha:n,"opérationsHautNiveau":r})},"supprimerOpérationHautNiveau"(t,e,n){const{sha:o,"opérationsHautNiveau":r}=t.opérationsHautNiveauByYear.get(e);t.opérationsHautNiveauByYear.set(e,{sha:o,"opérationsHautNiveau":r.filter((t=>t.identifiant!==n))})},"supprimerAnnéeOpérationHautNiveau"(t,e){t.opérationsHautNiveauByYear.delete(e)},"addOpérationsHautNiveau"(t,e,n){let o=t.opérationsHautNiveauByYear.get(e);o||(o={sha:void 0,"opérationsHautNiveau":[]},t.opérationsHautNiveauByYear.set(e,o)),Array.isArray(n)||(n=[n]);let{sha:r,"opérationsHautNiveau":i}=o;i=i.concat(n),t.opérationsHautNiveauByYear.set(e,{sha:r,"opérationsHautNiveau":i})},"updateOpérationHautNiveau"(t,e,n){const{sha:o,"opérationsHautNiveau":r}=t.opérationsHautNiveauByYear.get(e),i=r.findIndex((t=>t.identifiant===n.identifiant));r[i]=n,t.opérationsHautNiveauByYear.set(e,{sha:o,"opérationsHautNiveau":r})},setPersonnes(t,e){t.personnes=e},addPersonne(t,e){if(t.personnes){const{sha:n,data:o}=t.personnes;o.push(e),t.personnes={sha:n,data:o}}},updatePersonne(t,e){if(t.personnes){const{sha:n,data:o}=t.personnes,r=o.findIndex((t=>t.identifiant===e.identifiant));o[r]=e,t.personnes={sha:n,data:o}}},updatePersonnesSha(t,e){t.personnes.sha=e},supprimerPersonne(t,e){if(t.personnes){const{sha:n,data:o}=t.personnes;t.personnes={sha:n,data:o.filter((t=>t.identifiant!==e.identifiant))}}},setSalariats(t,e){t.salariats=e},addSalariat(t,e){if(t.salariats){const{sha:n,data:o}=t.salariats;o.push(e),t.salariats={sha:n,data:o}}},updateSalariat(t,e){if(t.salariats){const{sha:n,data:o}=t.salariats,r=o.findIndex((t=>t.identifiant===e.identifiant));o[r]=e,t.salariats={sha:n,data:o}}},updateSalariatsSha(t,e){t.salariats.sha=e},supprimerSalariat(t,e){t.salariats&&(t.salariats.data=t.salariats.data.filter((t=>t.identifiant!==e.identifiant)))}}}),Ds=t=>e=>{const{"opérationsHautNiveauByYear":n}=e;return n?[...n.values()].map((({"opérationsHautNiveau":e})=>e.filter((e=>e.type===t)))).flat(1/0):void 0},Us=Ds("Envoi facture à client"),qs=Ds("Fiche de paie"),Bs=Ds("Réception facture fournisseur");function Hs(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let o=-1;for(let r of t)(r=+e(r,++o,t))&&(n+=r)}return n}function Fs(t){return Ss(t,"d MMMM yyyy",{locale:_s})}function Rs(t){return 0===function(t,e){wi(2,arguments);var n=$i(t),o=$i(e),r=Oi(n,o),i=Math.abs(Ei(n,o));n.setDate(n.getDate()-r*i);var s=Number(Oi(n,o)===-r),a=r*(i-s);return 0===a?0:a}(t,new Date)?"Aujourd'hui":Fs(t)}const Ys=Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}),Ws=t=>Number.isFinite(t)?Ys.format(t):"-";function Ks(t){if("44566"===t)return"dépôt TVA";for(const e of Is.state.personnes.data)if(t===e.compteAssocié·e)return e.nom;return""}class Vs extends Error{}function Js(){return console.info("logout"),Is.mutations.logout(),Yr.reset(),Ls()}const Gs=()=>Yr.getExercices().then(Is.mutations.setOpérationsHautNiveauByYear),Qs=()=>Yr.getPersonnes().then(Is.mutations.setPersonnes),Xs=()=>Yr.getSalariats().then(Is.mutations.setSalariats);function zs(t,e){return async(...n)=>{try{return await t(...n)}catch(o){if(409===o.response?.status)return await e(),await t(...n);throw o}}}function Zs(t){throw 409===t.response?.status?new Vs:t}function ta(t,e){Is.mutations.setOrgAndRepo(t,e),Yr.owner=t,Yr.repo=e;const n=Gs(),o=Qs(),r=Xs();return Promise.all([n,o,r])}function ea(t,e,n,o){const r=Is.state.opérationsHautNiveauByYear.get(t),i=!r||!r.opérationsHautNiveau.some((t=>t.identifiant===e.identifiant));let s;if(i){Is.mutations.addOpérationsHautNiveau(t,e);s=zs((()=>{const e=Is.state.opérationsHautNiveauByYear.get(t).sha;return Yr.writeExercice(t,e,Is.state.opérationsHautNiveauByYear.get(t).opérationsHautNiveau,n)}),Gs)()}else{Is.mutations.updateOpérationHautNiveau(t,e);const n=Is.state.opérationsHautNiveauByYear.get(t).sha;s=Yr.writeExercice(t,n,Is.state.opérationsHautNiveauByYear.get(t).opérationsHautNiveau,o).catch(Zs)}return s.then((({data:{content:{sha:e}}})=>Is.mutations.updateOpérationsHautNiveauSha(t,e)))}const na=zs((({identifiant:t,date:e})=>{const n=e.getFullYear(),o=Ss(e,"d MMMM yyyy",{locale:_s});Is.mutations.supprimerOpérationHautNiveau(n,t);const r=Is.state.opérationsHautNiveauByYear.get(n);return r.opérationsHautNiveau.length>=1?Yr.writeExercice(n,r.sha,r.opérationsHautNiveau,`Suppression de l'opération du ${o}`).then((({data:{content:{sha:t}}})=>Is.mutations.updateOpérationsHautNiveauSha(n,t))):Yr.deleteExercice(n,r.sha).then((()=>Is.mutations.supprimerAnnéeOpérationHautNiveau(n)))}),Gs);function oa(t){const e=new Map;for(const n of t){const t=n.date.getFullYear();let o=e.get(t);o?o.push(n):e.set(t,[n])}return Promise.all([...e].map((([t,e])=>{return n=t,o=e,r=`Création de ${e.length} lignes bancaires pour l'année ${t}`,Is.mutations.addOpérationsHautNiveau(n,o),zs((()=>{const t=Is.state.opérationsHautNiveauByYear.get(n).sha;return Yr.writeExercice(n,t,Is.state.opérationsHautNiveauByYear.get(n).opérationsHautNiveau,r)}),Gs)().then((({data:{content:{sha:t}}})=>Is.mutations.updateOpérationsHautNiveauSha(n,t)));var n,o,r})))}const ra=zs((t=>{Is.mutations.supprimerPersonne(t);const e=Is.state.personnes.sha;return Yr.writePersonnes(e,Is.state.personnes.data,`Suppression de ${t.nom}`).then((({data:{content:{sha:t}}})=>Is.mutations.updatePersonnesSha(t)))}),Qs);const ia=zs((t=>{Is.mutations.supprimerSalariat(t);const e=Is.state.salariats.sha;return Yr.writeSalariats(e,Is.state.salariats.data).then((({data:{content:{sha:t}}})=>Is.mutations.updateSalariatsSha(t)))}),Xs);function sa(t){let e,n,r,i=t[1](t[2])+"";return{c(){e=A("p"),n=O("Problème avec la sauvegarde : "),r=O(i),L(e,"class","error svelte-kw7oms")},m(t,o){T(t,e,o),x(e,n),x(e,r)},p(t,e){1&e&&i!==(i=t[1](t[2])+"")&&D(r,i)},i:o,o:o,d(t){t&&E(e)}}}function aa(t){return{c:o,m:o,p:o,i:o,o:o,d:o}}function ca(t){let e,n;return e=new Ms({}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p:o,i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function la(t){let e,n,o,r,i,s={ctx:t,current:null,token:null,hasCatch:!0,pending:ca,then:aa,catch:sa,error:2,blocks:[,,,]};return wt(r=t[0],s),{c(){e=A("div"),n=A("button"),n.textContent="Enregistrer",o=_(),s.block.c(),L(n,"type","submit"),L(n,"class","primary"),L(e,"class","button-with-loader svelte-kw7oms")},m(t,r){T(t,e,r),x(e,n),x(e,o),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,i=!0},p(e,[n]){t=e,s.ctx=t,1&n&&r!==(r=t[0])&&wt(r,s)||$t(s,t,n)},i(t){i||(gt(s.block),i=!0)},o(t){for(let t=0;t<3;t+=1){yt(s.blocks[t])}i=!1},d(t){t&&E(e),s.block.d(),s.token=null,s=null}}}function ua(t,e,n){let{promise:o}=e;return t.$$set=t=>{"promise"in t&&n(0,o=t.promise)},[o,function(t){return t instanceof Vs?"Une autre personne a modifié ces données entre temps. Recharge la page pour voir la nouvelle version.":t.toString()}]}class da extends At{constructor(t){super(),Nt(this,t,ua,la,u,{promise:0})}}function fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ha(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pa(t,e,n){return e&&ha(t.prototype,e),n&&ha(t,n),t}function ma(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ga(t){return function(t){if(Array.isArray(t))return ya(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ya(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ya(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ya(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var va={alt:"Alt",option:"Alt",control:"Control",ctrl:"Control",meta:"Meta",command:"Meta",cmd:"Meta",windows:"Meta",shift:"Shift",enter:"Enter",tab:"Tab",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",delete:"Delete",esc:"Escape"},ba={"|":"\\","}":"]","{":"[",'"':"'",":":";","<":",",">":".","?":"/","~":".","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"="},wa="1,2,3,4,5,6,7,8,9,10,11,12".split(",").reduce((function(t,e){return t["f".concat(e)]="F".concat(e),t}),{}),$a={Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey",Alt:"altKey"},ka="abcdefghijklmnopqrstuvwxyz",xa=[].concat(ga(Object.values(va)),ga(Object.values(wa)),ga(Object.values(ba)),ga(Object.keys(ba)),ga(ka),ga(ka.toUpperCase())).reduce((function(t,e){return t[e]=e,t}),{});function Sa(t){return!!$a[t]}function Ca(t){return ba[t]||(1===t.length?t.toLocaleLowerCase():t)}function Ta(t){return!!xa[t]||1===t.length}var Ea="",Na=[],Aa="",Oa=0,_a=[],Pa=function(){Ea=Na.join("")},Ma=function(t){_a.forEach((function(e){try{e(t)}catch(t){console.error(t)}}))},ja=function(){var t=document.activeElement;return t&&!t.readOnly&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)};document.addEventListener("keydown",(function(t){var e=Ca(t.key),n=Sa(e),o=-1!==Na.indexOf(e);Ta(e)&&(n?o||Na.push(e):(Aa&&(clearTimeout(Oa),Na.splice(Na.indexOf(Aa),1)),Na.push(e),Aa=e,Oa=window.setTimeout((function(){Na.splice(Na.indexOf(e),1),Aa="",Oa=0,Pa()}),60)),Na.sort(),Pa(),n&&o||Ma(t))}),!1),document.addEventListener("keyup",(function(t){var e=Ca(t.key),n=Sa(e);!Ta(e)||n&&function(t,e){return!!e[$a[t]]}(e,t)||(n||Aa!==e||(clearTimeout(Oa),Oa=0,Aa=""),Na.indexOf(e)>=0&&(Na.splice(Na.indexOf(e),1),Na.sort(),Pa()))}),!1);var La=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterEditable:!0};fa(this,t),ma(this,"disabledScope",{}),ma(this,"handlers",{}),ma(this,"options",void 0),ma(this,"dispatch",(function(t){var n=e.handlers[Ea],o=e.disabledScope;!n||0===n.length||o.all||e.options.filterEditable&&ja()||n.forEach((function(t){o[t.scope]||t.handler(e)}))})),this.options=n,_a.push(this.dispatch)}return pa(t,[{key:"pressedKey",get:function(){return Ea}}]),pa(t,[{key:"enableAllScope",value:function(){var t=this;Object.keys(this.disabledScope).forEach((function(e){delete t.disabledScope[e]}))}},{key:"findCallback",value:function(t,e,n){return t.findIndex((function(t){return t.handler===e&&t.scope===n}))}},{key:"offHotKey",value:function(t,e,n){var o=this.handlers[t];if(o){var r=this.findCallback(o,e,n);-1!==r&&o.splice(r,1)}}},{key:"onHotKey",value:function(t,e,n){(this.handlers[t]=this.handlers[t]||[]).push({handler:e,scope:n})}},{key:"parseBindkey",value:function(t){return t.toLocaleLowerCase().replace(/\s/g,"").split(",").map((function(t){return t.split("+").map((function(t){return va[e=t]||ba[e]||wa[e]||e.toLowerCase();var e})).sort().join("")}))}},{key:"destroy",value:function(){_a.splice(_a.indexOf(this.dispatch),1),delete this.handlers,delete this.disabledScope}},{key:"on",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";this.parseBindkey(t).forEach((function(t){n.onHotKey(t,e,o)}))}},{key:"off",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";this.parseBindkey(t).forEach((function(t){n.offHotKey(t,e,o)}))}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";this.disabledScope[t]=!0}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?this.enableAllScope():delete this.disabledScope[t]}}]),t}();const Ia=t=>({}),Da=t=>({});function Ua(t,e,n){const o=t.slice();return o[11]=e[n],o[13]=n,o}function qa(t,e,n){const o=t.slice();return o[14]=e[n],o}function Ba(t,e,n){const o=t.slice();return o[17]=e[n],o}function Ha(t,e,n){const o=t.slice();return o[20]=e[n],o}const Fa=t=>({}),Ra=t=>({});function Ya(t){let e,n,o,r,i,s=t[20].name+"";return{c(){e=A("button"),n=O(s),L(e,"title",o=t[20].shortcut)},m(o,s){T(o,e,s),x(e,n),r||(i=M(e,"click",(function(){l(t[20])&&t[20].apply(this,arguments)})),r=!0)},p(r,i){t=r,1&i&&s!==(s=t[20].name+"")&&D(n,s),1&i&&o!==(o=t[20].shortcut)&&L(e,"title",o)},d(t){t&&E(e),r=!1,i()}}}function Wa(t){let e,n,r;return n=new Ms({}),{c(){e=A("div"),Ct(n.$$.fragment),L(e,"class","center svelte-xjc9ej")},m(t,o){T(t,e,o),Tt(n,e,null),r=!0},p:o,i(t){r||(gt(n.$$.fragment,t),r=!0)},o(t){yt(n.$$.fragment,t),r=!1},d(t){t&&E(e),Et(n)}}}function Ka(t){let e,n,r,i,s,a=t[1],c=[];for(let e=0;e<a.length;e+=1)c[e]=Va(Ba(t,a,e));let l=t[2],u=[];for(let e=0;e<l.length;e+=1)u[e]=Ga(Ua(t,l,e));return{c(){e=A("table"),n=A("thead"),r=A("tr");for(let t=0;t<c.length;t+=1)c[t].c();i=_(),s=A("tbody");for(let t=0;t<u.length;t+=1)u[t].c();L(r,"class","svelte-xjc9ej"),L(n,"class","svelte-xjc9ej"),L(e,"class","svelte-xjc9ej")},m(t,o){T(t,e,o),x(e,n),x(n,r);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(r,null);x(e,i),x(e,s);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(s,null)},p(t,e){if(2&e){let n;for(a=t[1],n=0;n<a.length;n+=1){const o=Ba(t,a,n);c[n]?c[n].p(o,e):(c[n]=Va(o),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}if(52&e){let n;for(l=t[2],n=0;n<l.length;n+=1){const o=Ua(t,l,n);u[n]?u[n].p(o,e):(u[n]=Ga(o),u[n].c(),u[n].m(s,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=l.length}},i:o,o:o,d(t){t&&E(e),N(c,t),N(u,t)}}}function Va(t){let e,n,o=t[17]+"";return{c(){e=A("th"),n=O(o),L(e,"class","svelte-xjc9ej")},m(t,o){T(t,e,o),x(e,n)},p(t,e){2&e&&o!==(o=t[17]+"")&&D(n,o)},d(t){t&&E(e)}}}function Ja(t){let e,n,o,r=t[14].content+"";return{c(){e=A("td"),n=O(r),L(e,"title",o=t[14].title),L(e,"class","svelte-xjc9ej")},m(t,o){T(t,e,o),x(e,n)},p(t,i){4&i&&r!==(r=t[14].content+"")&&D(n,r),4&i&&o!==(o=t[14].title)&&L(e,"title",o)},d(t){t&&E(e)}}}function Ga(t){let e,n,o,r,i=t[11],s=[];for(let e=0;e<i.length;e+=1)s[e]=Ja(qa(t,i,e));function a(...e){return t[8](t[13],...e)}return{c(){e=A("tr");for(let t=0;t<s.length;t+=1)s[t].c();n=_(),L(e,"class","svelte-xjc9ej"),H(e,"edition",t[5]===t[13])},m(t,i){T(t,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);x(e,n),o||(r=M(e,"click",a),o=!0)},p(o,r){if(t=o,4&r){let o;for(i=t[11],o=0;o<i.length;o+=1){const a=qa(t,i,o);s[o]?s[o].p(a,r):(s[o]=Ja(a),s[o].c(),s[o].m(e,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}32&r&&H(e,"edition",t[5]===t[13])},d(t){t&&E(e),N(s,t),o=!1,r()}}}function Qa(t){let e,n;return{c(){e=A("p"),n=O(t[3]),L(e,"class","etat-vide svelte-xjc9ej")},m(t,o){T(t,e,o),x(e,n)},p(t,e){8&e&&D(n,t[3])},i:o,o:o,d(t){t&&E(e)}}}function Xa(t){let e,n,o,r;const i=t[7]["form-header"],s=h(i,t,t[6],Da),a=t[7].default,c=h(a,t,t[6],null);return{c(){e=A("header"),s&&s.c(),n=_(),o=A("div"),c&&c.c(),L(e,"class","form-header svelte-xjc9ej"),L(o,"class","form-body svelte-xjc9ej")},m(t,i){T(t,e,i),s&&s.m(e,null),T(t,n,i),T(t,o,i),c&&c.m(o,null),r=!0},p(t,e){s&&s.p&&(!r||64&e)&&g(s,i,t,t[6],r?m(i,t[6],e,Ia):y(t[6]),Da),c&&c.p&&(!r||64&e)&&g(c,a,t,t[6],r?m(a,t[6],e,null):y(t[6]),null)},i(t){r||(gt(s,t),gt(c,t),r=!0)},o(t){yt(s,t),yt(c,t),r=!1},d(t){t&&E(e),s&&s.d(t),t&&E(n),t&&E(o),c&&c.d(t)}}}function za(t){let e,n,o,r,i,s,a,c,l,u,d,f;const p=t[7].header,v=h(p,t,t[6],Ra);let b=t[0],w=[];for(let e=0;e<b.length;e+=1)w[e]=Ya(Ha(t,b,e));const $=[Ka,Wa],k=[];function S(t,e){return t[2]?0:1}a=S(t),c=k[a]=$[a](t);const C=[Xa,Qa],O=[];function P(t,e){return void 0!==t[5]?0:1}return u=P(t),d=O[u]=C[u](t),{c(){e=A("div"),n=A("header"),v&&v.c(),o=_(),r=A("div");for(let t=0;t<w.length;t+=1)w[t].c();i=_(),s=A("main"),c.c(),l=_(),d.c(),L(r,"class","action-group svelte-xjc9ej"),L(n,"class","table-header svelte-xjc9ej"),L(s,"class","svelte-xjc9ej"),L(e,"class","tableau-editable svelte-xjc9ej")},m(t,c){T(t,e,c),x(e,n),v&&v.m(n,null),x(n,o),x(n,r);for(let t=0;t<w.length;t+=1)w[t]&&w[t].m(r,null);x(e,i),x(e,s),k[a].m(s,null),x(e,l),O[u].m(e,null),f=!0},p(t,[n]){if(v&&v.p&&(!f||64&n)&&g(v,p,t,t[6],f?m(p,t[6],n,Fa):y(t[6]),Ra),1&n){let e;for(b=t[0],e=0;e<b.length;e+=1){const o=Ha(t,b,e);w[e]?w[e].p(o,n):(w[e]=Ya(o),w[e].c(),w[e].m(r,null))}for(;e<w.length;e+=1)w[e].d(1);w.length=b.length}let o=a;a=S(t),a===o?k[a].p(t,n):(pt(),yt(k[o],1,1,(()=>{k[o]=null})),mt(),c=k[a],c?c.p(t,n):(c=k[a]=$[a](t),c.c()),gt(c,1),c.m(s,null));let i=u;u=P(t),u===i?O[u].p(t,n):(pt(),yt(O[i],1,1,(()=>{O[i]=null})),mt(),d=O[u],d?d.p(t,n):(d=O[u]=C[u](t),d.c()),gt(d,1),d.m(e,null))},i(t){f||(gt(v,t),gt(c),gt(d),f=!0)},o(t){yt(v,t),yt(c),yt(d),f=!1},d(t){t&&E(e),v&&v.d(t),N(w,t),k[a].d(),O[u].d()}}}function Za(t,e,n){return Object.defineProperty(t,"name",{value:e}),t.shortcut=n,t}function tc(t,e,n){let o,{$$slots:r={},$$scope:i}=e,{globalActions:s}=e,{columns:a}=e,{data:c}=e,{placeholder:l="Sélectionne un élément"}=e;const u=function(){const t=G();return(e,n,{cancelable:o=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=F(e,n,{cancelable:o});return r.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}();async function d(t){n(5,o=t),u("edit",t),await ot();const e=document.querySelector(".edition");e&&e.scrollIntoView({behavior:"smooth",block:"end"})}const f=new La({filterEditable:!1});for(const t of s)t.shortcut&&f.on(t.shortcut,t);f.on("down",(()=>{let t=(o??-1)+1;t>=c.length&&(t=c.length-1),d(t)})),f.on("up",(()=>{let t=(o??c.length)-1;t<0&&(t=0),d(t)}));return t.$$set=t=>{"globalActions"in t&&n(0,s=t.globalActions),"columns"in t&&n(1,a=t.columns),"data"in t&&n(2,c=t.data),"placeholder"in t&&n(3,l=t.placeholder),"$$scope"in t&&n(6,i=t.$$scope)},[s,a,c,l,d,o,i,r,(t,e)=>d(t)]}class ec extends At{constructor(t){super(),Nt(this,t,tc,za,u,{globalActions:0,columns:1,data:2,placeholder:3,edit:4})}get edit(){return this.$$.ctx[4]}}const nc=["1","2","3","4","5","6","7"];function oc(t){return e=>{const n=e.map((e=>e.slice(t.length)));return n.sort(((t,e)=>parseInt(e)-parseInt(t))),t+function(t){if(!t)return nc[0];let e=parseInt(t)+1;for(;n=e.toString(10),![...n].every((t=>nc.includes(t)));)e++;var n;return e}(n[0])}}const rc=oc("4111C"),ic=oc("4011F"),sc=new Set([20,10,5.5,0,"Non applicable"]);function ac({montantHT:t,tauxTVA:e}){return n=t*function(t){if("Non applicable"===t)return 0;if(Number.isFinite(t))return t/100;throw new TypeError(`Taux de TVA non géré: ${t} (${typeof t})`)}(e),Math.round(100*n)/100;var n}function cc(t){return t.montantHT+ac(t)}function lc(t,e){return 0===t?0:Number((100*e/t).toFixed(1))}function uc({lignes:t}){return Hs(t.map((({montantHT:t})=>t)))}function dc({lignes:t}){return Hs(t.map(ac))}function fc({lignes:t}){return Hs(t.map(cc))}function hc(t,e,n){const o=t.slice();return o[30]=e[n],o[31]=e,o[32]=n,o}function pc(t,e,n){const o=t.slice();return o[33]=e[n],o}function mc(t,e,n){const o=t.slice();return o[8]=e[n],o}function gc(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,P,I,D,q,B,H,F,R,Y,W;function K(t,e){return t[5]&&0!==t[5].length?yc:vc}let V=K(t),J=V(t),G=t[9].lignes,Q=[];for(let e=0;e<G.length;e+=1)Q[e]=$c(hc(t,G,e));function z(e){t[27](e)}let Z={};return void 0!==t[10]&&(Z.promise=t[10]),P=new da({props:Z}),X.push((()=>St(P,"promise",z))),{c(){e=A("form"),n=A("fieldset"),o=A("label"),r=A("div"),r.textContent="Client",i=_(),J.c(),s=_(),a=A("a"),l=O("Rajouter un client"),d=_(),f=A("label"),h=A("div"),h.textContent="Numéro de facture",p=_(),m=A("input"),g=_(),y=A("label"),v=A("div"),v.textContent="Date",b=_(),w=A("input"),$=_();for(let t=0;t<Q.length;t+=1)Q[t].c();k=_(),S=A("button"),S.textContent="Ajouter ligne",C=_(),Ct(P.$$.fragment),D=_(),q=A("button"),q.textContent="Abandonner les modifications",B=_(),H=A("button"),H.textContent="Supprimer cette facture",L(a,"href",u="/comptabilite/personnes?org="+t[2]+"&repo="+t[3]),L(m,"type","text"),L(w,"type","date"),L(S,"type","button"),L(q,"type","button"),L(H,"type","button"),n.disabled=F=t[10]&&"Promise"===t[10][Symbol.toStringTag],L(e,"class","svelte-8b5jek")},m(c,u){T(c,e,u),x(e,n),x(n,o),x(o,r),x(o,i),J.m(o,null),x(o,s),x(o,a),x(a,l),x(n,d),x(n,f),x(f,h),x(f,p),x(f,m),U(m,t[9].numéroFacture),x(n,g),x(n,y),x(y,v),x(y,b),x(y,w),U(w,t[6]),x(n,$);for(let t=0;t<Q.length;t+=1)Q[t]&&Q[t].m(n,null);x(n,k),x(n,S),x(n,C),Tt(P,n,null),x(n,D),x(n,q),x(n,B),x(n,H),R=!0,Y||(W=[M(m,"input",t[20]),M(w,"input",t[21]),M(S,"click",t[26]),M(q,"click",t[16]),M(H,"click",t[17]),M(e,"submit",j(t[14]))],Y=!0)},p(t,e){if(V===(V=K(t))&&J?J.p(t,e):(J.d(1),J=V(t),J&&(J.c(),J.m(o,s))),(!R||12&e[0]&&u!==(u="/comptabilite/personnes?org="+t[2]+"&repo="+t[3]))&&L(a,"href",u),512&e[0]&&m.value!==t[9].numéroFacture&&U(m,t[9].numéroFacture),64&e[0]&&U(w,t[6]),4608&e[0]){let o;for(G=t[9].lignes,o=0;o<G.length;o+=1){const r=hc(t,G,o);Q[o]?Q[o].p(r,e):(Q[o]=$c(r),Q[o].c(),Q[o].m(n,k))}for(;o<Q.length;o+=1)Q[o].d(1);Q.length=G.length}const r={};!I&&1024&e[0]&&(I=!0,r.promise=t[10],it((()=>I=!1))),P.$set(r),(!R||1024&e[0]&&F!==(F=t[10]&&"Promise"===t[10][Symbol.toStringTag]))&&(n.disabled=F)},i(t){R||(gt(P.$$.fragment,t),R=!0)},o(t){yt(P.$$.fragment,t),R=!1},d(t){t&&E(e),J.d(),N(Q,t),Et(P),Y=!1,c(W)}}}function yc(t){let e,n,o,r,i=t[5],s=[];for(let e=0;e<i.length;e+=1)s[e]=bc(mc(t,i,e));return{c(){e=A("select"),n=A("option"),n.textContent="- ";for(let t=0;t<s.length;t+=1)s[t].c();n.__value=" - ",n.value=n.__value,void 0===t[8]&&rt((()=>t[19].call(e)))},m(i,a){T(i,e,a),x(e,n);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);q(e,t[8],!0),o||(r=M(e,"change",t[19]),o=!0)},p(t,n){if(544&n[0]){let o;for(i=t[5],o=0;o<i.length;o+=1){const r=mc(t,i,o);s[o]?s[o].p(r,n):(s[o]=bc(r),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}288&n[0]&&q(e,t[8])},d(t){t&&E(e),N(s,t),o=!1,r()}}}function vc(t){let e;return{c(){e=A("select"),e.disabled=!0},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function bc(t){let e,n,o,r,i=t[8].nom+"";return{c(){e=A("option"),n=O(i),e.__value=o=t[8],e.value=e.__value,e.selected=r=t[9].compteClient===t[8].compteClient},m(t,o){T(t,e,o),x(e,n)},p(t,s){32&s[0]&&i!==(i=t[8].nom+"")&&D(n,i),32&s[0]&&o!==(o=t[8])&&(e.__value=o,e.value=e.__value),544&s[0]&&r!==(r=t[9].compteClient===t[8].compteClient)&&(e.selected=r)},d(t){t&&E(e)}}}function wc(t){let e,n,r,i=("number"==typeof t[33]?`${t[33]}%`:t[33])+"";return{c(){e=A("option"),n=O(i),r=_(),e.__value=t[33],e.value=e.__value},m(t,o){T(t,e,o),x(e,n),x(e,r)},p:o,d(t){t&&E(e)}}}function $c(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,P,j,B,H,F,R,Y,W,K,V=Ws(ac(t[30]))+"",J=Ws(cc(t[30]))+"";function G(){t[22].call(i,t[31],t[32])}function Q(){t[23].call(d,t[31],t[32])}let X=[...sc],z=[];for(let e=0;e<X.length;e+=1)z[e]=wc(pc(t,X,e));function Z(){t[24].call(g,t[31],t[32])}function tt(...e){return t[25](t[30],...e)}return{c(){e=A("fieldset"),n=A("label"),o=A("div"),o.textContent="Compte Produit",r=_(),i=A("input"),s=_(),a=A("label"),l=A("div"),l.textContent="Montant HT (€)",u=_(),d=A("input"),f=_(),h=A("label"),p=A("div"),p.textContent="Taux TVA",m=_(),g=A("select"),y=A("option"),y.textContent="- ";for(let t=0;t<z.length;t+=1)z[t].c();v=_(),b=A("label"),w=A("div"),w.textContent="Montant TVA",$=_(),k=A("output"),S=O(V),C=_(),P=A("label"),j=A("div"),j.textContent="Montant TTC",B=_(),H=A("output"),F=O(J),R=_(),Y=A("button"),Y.textContent="Supprimer ligne",L(i,"placeholder","706xxx"),L(d,"step","0.01"),L(d,"type","number"),y.__value=" - ",y.value=y.__value,void 0===t[30].tauxTVA&&rt(Z),L(Y,"type","button"),L(e,"class","ligne-facture svelte-8b5jek")},m(c,E){T(c,e,E),x(e,n),x(n,o),x(n,r),x(n,i),U(i,t[30].compteProduit),x(e,s),x(e,a),x(a,l),x(a,u),x(a,d),U(d,t[30].montantHT),x(e,f),x(e,h),x(h,p),x(h,m),x(h,g),x(g,y);for(let t=0;t<z.length;t+=1)z[t]&&z[t].m(g,null);q(g,t[30].tauxTVA,!0),x(e,v),x(e,b),x(b,w),x(b,$),x(b,k),x(k,S),x(e,C),x(e,P),x(P,j),x(P,B),x(P,H),x(H,F),x(e,R),x(e,Y),W||(K=[M(i,"input",G),M(d,"input",Q),M(g,"change",Z),M(Y,"click",tt)],W=!0)},p(e,n){if(t=e,512&n[0]&&i.value!==t[30].compteProduit&&U(i,t[30].compteProduit),512&n[0]&&I(d.value)!==t[30].montantHT&&U(d,t[30].montantHT),0&n){let e;for(X=[...sc],e=0;e<X.length;e+=1){const o=pc(t,X,e);z[e]?z[e].p(o,n):(z[e]=wc(o),z[e].c(),z[e].m(g,null))}for(;e<z.length;e+=1)z[e].d(1);z.length=X.length}512&n[0]&&q(g,t[30].tauxTVA),512&n[0]&&V!==(V=Ws(ac(t[30]))+"")&&D(S,V),512&n[0]&&J!==(J=Ws(cc(t[30]))+"")&&D(F,J)},d(t){t&&E(e),N(z,t),W=!1,c(K)}}}function kc(t){let e,n,o=t[9]&&gc(t);return{c(){o&&o.c(),e=P()},m(t,r){o&&o.m(t,r),T(t,e,r),n=!0},p(t,n){t[9]?o?(o.p(t,n),512&n[0]&&gt(o,1)):(o=gc(t),o.c(),gt(o,1),o.m(e.parentNode,e)):o&&(pt(),yt(o,1,1,(()=>{o=null})),mt())},i(t){n||(gt(o),n=!0)},o(t){yt(o),n=!1},d(t){o&&o.d(t),t&&E(e)}}}function xc(t){let e,n,o,r;return{c(){e=A("h1"),n=O("Voici la liste des factures (ventes) pour \n            "),o=A("code"),r=O(t[2]),L(e,"slot","header"),L(e,"class","svelte-8b5jek")},m(t,i){T(t,e,i),x(e,n),x(e,o),x(o,r)},p(t,e){4&e[0]&&D(r,t[2])},d(t){t&&E(e)}}}function Sc(t){let e;return{c(){e=A("h2"),e.textContent="Facture (sans identifiant)"},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function Cc(t){let e,n,o,r,i=t[9].numéroFacture+"";return{c(){e=A("h2"),n=O("Facture « "),o=O(i),r=O(" »")},m(t,i){T(t,e,i),x(e,n),x(e,o),x(e,r)},p(t,e){512&e[0]&&i!==(i=t[9].numéroFacture+"")&&D(o,i)},d(t){t&&E(e)}}}function Tc(t){let e;function n(t,e){return t[9]&&t[9].numéroFacture?Cc:Sc}let o=n(t),r=o(t);return{c(){r.c(),e=P()},m(t,n){r.m(t,n),T(t,e,n)},p(t,i){o===(o=n(t))&&r?r.p(t,i):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&E(e)}}}function Ec(t){let e,n;const o=[t[11]];let r={$$slots:{"form-header":[Tc],header:[xc],default:[kc]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=i(r,o[t]);return e=new ec({props:r}),t[28](e),e.$on("edit",t[29]),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const r=2048&n[0]?kt(o,[xt(t[11])]):{};1900&n[0]|128&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(n){t[28](null),Et(e,n)}}}function Nc(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],org:t[2],repo:t[3],fullwidth:!0,$$slots:{default:[Ec]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.login=t[0]),2&n[0]&&(o.logout=t[1]),4&n[0]&&(o.org=t[2]),8&n[0]&&(o.repo=t[3]),4092&n[0]|128&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Ac(t,e,n){let o,r,i,s,a,{login:c}=e,{logout:l}=e,{org:u}=e,{repo:d}=e,{"envoiFactureàClients":f}=e,{personnes:h}=e,p=Ir(),m=Ss(p.date,"yyyy-MM-dd");function g(t){const e=p.lignes.indexOf(t);e>=0&&(p.lignes.splice(e,1),n(9,p),n(6,m),n(8,r))}function y(){p.lignes.push({montantHT:void 0,tauxTVA:void 0,compteProduit:void 0}),n(9,p),n(6,m),n(8,r)}async function v(t){n(9,p=void 0===t?Ir():t),n(6,m=Ss(p.date,"yyyy-MM-dd")),await ot()}return t.$$set=t=>{"login"in t&&n(0,c=t.login),"logout"in t&&n(1,l=t.logout),"org"in t&&n(2,u=t.org),"repo"in t&&n(3,d=t.repo),"envoiFactureàClients"in t&&n(4,f=t.envoiFactureàClients),"personnes"in t&&n(18,h=t.personnes)},t.$$.update=()=>{262144&t.$$.dirty[0]&&n(5,o=h?.filter((({compteClient:t})=>!!t))),64&t.$$.dirty[0]&&n(9,p.date=new Date(m),p),256&t.$$.dirty[0]&&n(9,p.compteClient=r?.compteClient,p),176&t.$$.dirty[0]&&n(11,a={placeholder:"Sélectionne une facture dans la liste pour voir toutes ses informations ou les modifier.",globalActions:[Za((()=>s.edit(-1)),"Nouvelle facture","Alt+N")],columns:["Date","Client","Montant total","(dont montant HT)"],data:void 0===f?[]:f.sort(((t,e)=>e.date.getTime()-t.date.getTime())).map((t=>[{content:Rs(t.date),title:Ss(t.date,"d MMMM yyyy",{locale:_s})},{content:o.find((e=>e.compteClient===t.compteClient))?.nom||`client non trouvé (${t.compteClient})`},{content:Ws(fc(t))},{content:Ws(uc(t))}]))})},[c,l,u,d,f,o,m,s,r,p,i,a,g,y,function(){n(10,i=function(t){const e=t.date,n=Fs(e);return ea(e.getFullYear(),t,`Création de la facture ${t.numéroFacture} envoyée au client ${t.compteClient} le ${n}`,`Modification de la facture ${t.numéroFacture} envoyée au client ${t.compteClient} le ${n}`)}(p)),i.then((()=>{n(10,i=void 0),s.edit(f.findIndex((t=>t.identifiant===p.identifiant)))}))},v,function(){s.edit(void 0)},function(){na(p),s.edit(void 0)},h,function(){r=B(this),n(8,r),n(5,o),n(18,h)},function(){p.numéroFacture=this.value,n(9,p),n(6,m),n(8,r)},function(){m=this.value,n(6,m)},function(t,e){t[e].compteProduit=this.value,n(9,p),n(6,m),n(8,r)},function(t,e){t[e].montantHT=I(this.value),n(9,p),n(6,m),n(8,r)},function(t,e){t[e].tauxTVA=B(this),n(9,p),n(6,m),n(8,r)},(t,e)=>g(t),t=>y(),function(t){i=t,n(10,i)},function(t){X[t?"unshift":"push"]((()=>{s=t,n(7,s)}))},t=>{v(f[t.detail])}]}class Oc extends At{constructor(t){super(),Nt(this,t,Ac,Nc,u,{login:0,logout:1,org:2,repo:3,"envoiFactureàClients":4,personnes:18},null,[-1,-1])}}function _c(t){let e,n,r;return{c(){e=A("input"),L(e,"type","date")},m(o,i){T(o,e,i),U(e,t[0]),n||(r=M(e,"input",t[2]),n=!0)},p(t,[n]){1&n&&U(e,t[0])},i:o,o:o,d(t){t&&E(e),n=!1,r()}}}function Pc(t,e,n){let o,{date:r=new Date}=e;return t.$$set=t=>{"date"in t&&n(1,r=t.date)},t.$$.update=()=>{2&t.$$.dirty&&n(0,o=Ss(r,"yyyy-MM-dd")),1&t.$$.dirty&&(t=>{t&&n(1,r=new Date(t))})(o)},[o,r,function(){o=this.value,n(0,o)}]}class Mc extends At{constructor(t){super(),Nt(this,t,Pc,_c,u,{date:1})}}function jc(t,e,n){const o=t.slice();return o[9]=e[n],o}function Lc(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,O,P,D,B,H,F,R,Y,W,K,V,J,G,Q,z,Z,tt,et,nt,ot,st,at,ct,lt,ut,dt,ft,ht,pt,mt,vt,bt,wt,$t,kt,xt,Nt,At,Ot,_t,Pt,Mt,jt,Lt,It,Dt,Ut,qt,Bt,Ht,Ft,Rt;function Yt(e){t[19](e)}let Wt={};function Kt(e){t[22](e)}void 0!==t[6].date&&(Wt.date=t[6].date),s=new Mc({props:Wt}),X.push((()=>St(s,"date",Yt)));let Vt={};function Jt(e){t[23](e)}void 0!==t[6].débutPériode&&(Vt.date=t[6].débutPériode),G=new Mc({props:Vt}),X.push((()=>St(G,"date",Kt)));let Gt={};void 0!==t[6].finPériode&&(Gt.date=t[6].finPériode),nt=new Mc({props:Gt}),X.push((()=>St(nt,"date",Jt)));let Qt=t[11],Xt=[];for(let e=0;e<Qt.length;e+=1)Xt[e]=Ic(jc(t,Qt,e));function zt(e){t[28](e)}let Zt={};return void 0!==t[10]&&(Zt.promise=t[10]),jt=new da({props:Zt}),X.push((()=>St(jt,"promise",zt))),{c(){e=A("form"),n=A("fieldset"),o=A("label"),r=A("div"),r.textContent="Date d'émission de la fiche de paie",i=_(),Ct(s.$$.fragment),l=_(),u=A("div"),d=A("label"),f=A("div"),f.textContent="Mois",h=_(),p=A("select"),m=A("option"),m.textContent="Janvier",g=A("option"),g.textContent="Février",y=A("option"),y.textContent="Mars",v=A("option"),v.textContent="Avril",b=A("option"),b.textContent="Mai",w=A("option"),w.textContent="Juin",$=A("option"),$.textContent="Juillet",k=A("option"),k.textContent="Août",S=A("option"),S.textContent="Septembre",C=A("option"),C.textContent="Octobre",O=A("option"),O.textContent="Novembre",P=A("option"),P.textContent="Décembre",D=_(),B=A("label"),H=A("div"),H.textContent="Année",F=_(),R=A("input"),Y=_(),W=A("div"),K=A("label"),V=A("div"),V.textContent="Début de la période",J=_(),Ct(G.$$.fragment),z=_(),Z=A("label"),tt=A("div"),tt.textContent="Fin de la période",et=_(),Ct(nt.$$.fragment),st=_(),at=A("label"),ct=A("div"),ct.textContent="Salarié⋅e",lt=_(),ut=A("select"),dt=A("option"),dt.textContent="- ";for(let t=0;t<Xt.length;t+=1)Xt[t].c();ft=_(),ht=A("label"),pt=A("div"),pt.textContent="Net payé (€)",mt=_(),vt=A("input"),bt=_(),wt=A("label"),$t=A("div"),$t.textContent="Total des cotisations et contributions (à calculer dans la fiche de paie) (€)",kt=_(),xt=A("input"),Nt=_(),At=A("label"),Ot=A("div"),Ot.textContent="Impôt sur le revenu prélevé à la source (€)",_t=_(),Pt=A("input"),Mt=_(),Ct(jt.$$.fragment),It=_(),Dt=A("button"),Dt.textContent="Abandonner les modifications",Ut=_(),qt=A("button"),qt.textContent="Supprimer",m.__value=0,m.value=m.__value,g.__value=1,g.value=g.__value,y.__value=2,y.value=y.__value,v.__value=3,v.value=v.__value,b.__value=4,b.value=b.__value,w.__value=5,w.value=w.__value,$.__value=6,$.value=$.__value,k.__value=7,k.value=k.__value,S.__value=8,S.value=S.__value,C.__value=9,C.value=C.__value,O.__value=10,O.value=O.__value,P.__value=11,P.value=P.__value,void 0===t[8]&&rt((()=>t[20].call(p))),L(R,"type","number"),L(R,"step","1"),L(u,"class","input-group"),L(W,"class","input-group"),dt.__value=" - ",dt.value=dt.__value,void 0===t[9]&&rt((()=>t[24].call(ut))),L(vt,"step","0.01"),L(vt,"type","number"),L(xt,"step","0.01"),L(xt,"type","number"),L(Pt,"step","0.01"),L(Pt,"type","number"),L(Dt,"type","button"),L(qt,"type","button"),n.disabled=Bt=t[10]&&"Promise"===t[10][Symbol.toStringTag]},m(a,c){T(a,e,c),x(e,n),x(n,o),x(o,r),x(o,i),Tt(s,o,null),x(n,l),x(n,u),x(u,d),x(d,f),x(d,h),x(d,p),x(p,m),x(p,g),x(p,y),x(p,v),x(p,b),x(p,w),x(p,$),x(p,k),x(p,S),x(p,C),x(p,O),x(p,P),q(p,t[8],!0),x(u,D),x(u,B),x(B,H),x(B,F),x(B,R),U(R,t[7]),x(n,Y),x(n,W),x(W,K),x(K,V),x(K,J),Tt(G,K,null),x(W,z),x(W,Z),x(Z,tt),x(Z,et),Tt(nt,Z,null),x(n,st),x(n,at),x(at,ct),x(at,lt),x(at,ut),x(ut,dt);for(let t=0;t<Xt.length;t+=1)Xt[t]&&Xt[t].m(ut,null);q(ut,t[9],!0),x(n,ft),x(n,ht),x(ht,pt),x(ht,mt),x(ht,vt),U(vt,t[6].rémunération),x(n,bt),x(n,wt),x(wt,$t),x(wt,kt),x(wt,xt),U(xt,t[6].cotisations),x(n,Nt),x(n,At),x(At,Ot),x(At,_t),x(At,Pt),U(Pt,t[6].prélèvementÀLaSource),x(n,Mt),Tt(jt,n,null),x(n,It),x(n,Dt),x(n,Ut),x(n,qt),Ht=!0,Ft||(Rt=[M(p,"change",t[20]),M(R,"input",t[21]),M(ut,"change",t[24]),M(vt,"input",t[25]),M(xt,"input",t[26]),M(Pt,"input",t[27]),M(Dt,"click",t[29]),M(qt,"click",t[15]),M(e,"submit",j(t[13]))],Ft=!0)},p(t,e){const o={};!a&&64&e[0]&&(a=!0,o.date=t[6].date,it((()=>a=!1))),s.$set(o),256&e[0]&&q(p,t[8]),128&e[0]&&I(R.value)!==t[7]&&U(R,t[7]);const r={};!Q&&64&e[0]&&(Q=!0,r.date=t[6].débutPériode,it((()=>Q=!1))),G.$set(r);const i={};if(!ot&&64&e[0]&&(ot=!0,i.date=t[6].finPériode,it((()=>ot=!1))),nt.$set(i),2112&e[0]){let n;for(Qt=t[11],n=0;n<Qt.length;n+=1){const o=jc(t,Qt,n);Xt[n]?Xt[n].p(o,e):(Xt[n]=Ic(o),Xt[n].c(),Xt[n].m(ut,null))}for(;n<Xt.length;n+=1)Xt[n].d(1);Xt.length=Qt.length}2560&e[0]&&q(ut,t[9]),64&e[0]&&I(vt.value)!==t[6].rémunération&&U(vt,t[6].rémunération),64&e[0]&&I(xt.value)!==t[6].cotisations&&U(xt,t[6].cotisations),64&e[0]&&I(Pt.value)!==t[6].prélèvementÀLaSource&&U(Pt,t[6].prélèvementÀLaSource);const c={};!Lt&&1024&e[0]&&(Lt=!0,c.promise=t[10],it((()=>Lt=!1))),jt.$set(c),(!Ht||1024&e[0]&&Bt!==(Bt=t[10]&&"Promise"===t[10][Symbol.toStringTag]))&&(n.disabled=Bt)},i(t){Ht||(gt(s.$$.fragment,t),gt(G.$$.fragment,t),gt(nt.$$.fragment,t),gt(jt.$$.fragment,t),Ht=!0)},o(t){yt(s.$$.fragment,t),yt(G.$$.fragment,t),yt(nt.$$.fragment,t),yt(jt.$$.fragment,t),Ht=!1},d(t){t&&E(e),Et(s),Et(G),Et(nt),N(Xt,t),Et(jt),Ft=!1,c(Rt)}}}function Ic(t){let e,n,o,r,i=t[9].nom+"";return{c(){e=A("option"),n=O(i),e.__value=o=t[9],e.value=e.__value,e.selected=r=t[6].salarié·e===t[9].identifiant},m(t,o){T(t,e,o),x(e,n)},p(t,s){2048&s[0]&&i!==(i=t[9].nom+"")&&D(n,i),2048&s[0]&&o!==(o=t[9])&&(e.__value=o,e.value=e.__value),2112&s[0]&&r!==(r=t[6].salarié·e===t[9].identifiant)&&(e.selected=r)},d(t){t&&E(e)}}}function Dc(t){let e,n,o=t[6]&&Lc(t);return{c(){o&&o.c(),e=P()},m(t,r){o&&o.m(t,r),T(t,e,r),n=!0},p(t,n){t[6]?o?(o.p(t,n),64&n[0]&&gt(o,1)):(o=Lc(t),o.c(),gt(o,1),o.m(e.parentNode,e)):o&&(pt(),yt(o,1,1,(()=>{o=null})),mt())},i(t){n||(gt(o),n=!0)},o(t){yt(o),n=!1},d(t){o&&o.d(t),t&&E(e)}}}function Uc(t){let e,n,o,r;return{c(){e=A("h1"),n=O("Voici les fiches de paie pour "),o=A("code"),r=O(t[2]),L(e,"slot","header")},m(t,i){T(t,e,i),x(e,n),x(e,o),x(o,r)},p(t,e){4&e[0]&&D(r,t[2])},d(t){t&&E(e)}}}function qc(t){let e;return{c(){e=A("h1"),e.textContent="Détails de la fiche",L(e,"slot","form-header")},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function Bc(t){let e,n;const o=[t[12]];let r={$$slots:{"form-header":[qc],header:[Uc],default:[Dc]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=i(r,o[t]);return e=new ec({props:r}),t[30](e),e.$on("edit",t[31]),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const r=4096&n[0]?kt(o,[xt(t[12])]):{};4068&n[0]|128&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(n){t[30](null),Et(e,n)}}}function Hc(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],org:t[2],repo:t[3],fullwidth:!0,$$slots:{default:[Bc]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.login=t[0]),2&n[0]&&(o.logout=t[1]),4&n[0]&&(o.org=t[2]),8&n[0]&&(o.repo=t[3]),8180&n[0]|128&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Fc(t,e,n){let o,r,i,s,a,c,l,u,{login:d}=e,{logout:f}=e,{org:h}=e,{repo:p}=e,{personnes:m=[]}=e,{salariats:g=[]}=e,{fichesDePaie:y}=e,v=Dr();function b(t,e){n(6,v.débutPériode=function(t){wi(1,arguments);var e=$i(t);return e.setDate(1),e.setHours(0,0,0,0),e}(new Date(e,t)),v),n(6,v.finPériode=function(t){wi(1,arguments);var e=$i(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}(new Date(e,t)),v)}function w(t){return s.find((({identifiant:e})=>t.salarié·e===e))?.nom}async function $(t){n(6,v=t||Dr()),await ot()}return t.$$set=t=>{"login"in t&&n(0,d=t.login),"logout"in t&&n(1,f=t.logout),"org"in t&&n(2,h=t.org),"repo"in t&&n(3,p=t.repo),"personnes"in t&&n(16,m=t.personnes),"salariats"in t&&n(17,g=t.salariats),"fichesDePaie"in t&&n(4,y=t.fichesDePaie)},t.$$.update=()=>{var e;131072&t.$$.dirty[0]&&n(18,i=new Set(g.map((({idPersonne:t})=>t)))),327680&t.$$.dirty[0]&&n(11,s=m.filter((({identifiant:t})=>i.has(t)))),512&t.$$.dirty[0]&&n(6,v.salarié·e=a?.identifiant,v),64&t.$$.dirty[0]&&function(t){n(9,a=s.find((({identifiant:e})=>t.salarié·e===e)))}(v),64&t.$$.dirty[0]&&(e=v.débutPériode,n(7,c=e.getFullYear()),n(8,l=e.getMonth())),384&t.$$.dirty[0]&&b(l,c),48&t.$$.dirty[0]&&n(12,u={placeholder:"Sélectionne une fiche de paie pour en voir le détail et la modifier",columns:["Date d'émission","Période","Salarié⋅e","Net après prélèvement à la source","Coût pour l'entreprise"],globalActions:[Za((()=>r.edit(-1)),"Nouvelle fiche","Alt+N")],data:y?.map((t=>[{content:Rs(t.date),title:Fs(t.date)},{content:`${Rs(t.débutPériode)} → ${Rs(t.finPériode)}`,title:`${Fs(t.débutPériode)} → ${Fs(t.finPériode)}`},{content:w(t)},{content:Ws(t.rémunération)},{content:Ws(t.rémunération+t.cotisations+t.prélèvementÀLaSource)}]))})},[d,f,h,p,y,r,v,c,l,a,o,s,u,function(){n(10,o=function(t,e){const n=Fs(t.débutPériode),o=Fs(t.finPériode);return ea(t.date.getFullYear(),t,`Création de la fiche de paie de ${e.nom} pour la période du ${n} au ${o}`,`Modification de la fiche de paie de ${e.nom} pour la période du ${n} au ${o}`)}(v,m.find((({identifiant:t})=>v.salarié·e===t)))),o.then((()=>{n(10,o=void 0),r.edit(y.findIndex((t=>t.identifiant===v.identifiant)))}))},$,function(){na(v),r.edit(void 0)},m,g,i,function(e){t.$$.not_equal(v.date,e)&&(v.date=e,n(6,v),n(9,a))},function(){l=B(this),n(8,l)},function(){c=I(this.value),n(7,c)},function(e){t.$$.not_equal(v.débutPériode,e)&&(v.débutPériode=e,n(6,v),n(9,a))},function(e){t.$$.not_equal(v.finPériode,e)&&(v.finPériode=e,n(6,v),n(9,a))},function(){a=B(this),n(9,a),n(11,s),n(16,m),n(18,i),n(17,g)},function(){v.rémunération=I(this.value),n(6,v),n(9,a)},function(){v.cotisations=I(this.value),n(6,v),n(9,a)},function(){v.prélèvementÀLaSource=I(this.value),n(6,v),n(9,a)},function(t){o=t,n(10,o)},()=>r.edit(void 0),function(t){X[t?"unshift":"push"]((()=>{r=t,n(5,r)}))},t=>$(y[t.detail])]}class Rc extends At{constructor(t){super(),Nt(this,t,Fc,Hc,u,{login:0,logout:1,org:2,repo:3,personnes:16,salariats:17,fichesDePaie:4},null,[-1,-1])}}function Yc(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,N,O,P,I,D;function B(t,e){return t[7].compteClient?Kc:Wc}let H=B(t),F=H(t);function R(t,e){return t[7].compteFournisseur?Jc:Vc}let Y=R(t),W=Y(t);function K(e){t[20](e)}let V={};return void 0!==t[6]&&(V.promise=t[6]),w=new da({props:V}),X.push((()=>St(w,"promise",K))),{c(){e=A("form"),n=A("fieldset"),o=A("label"),r=A("div"),r.textContent="Nom",i=_(),s=A("input"),a=_(),l=A("label"),u=A("div"),u.textContent="Type",d=_(),f=A("select"),h=A("option"),h.textContent="Morale",p=A("option"),p.textContent="Physique",m=_(),g=A("section"),F.c(),y=_(),v=A("section"),W.c(),b=_(),Ct(w.$$.fragment),k=_(),S=A("button"),S.textContent="Abandonner les modifications",C=_(),N=A("button"),N.textContent="Supprimer",L(s,"type","text"),h.__value="Morale",h.value=h.__value,p.__value="Physique",p.value=p.__value,void 0===t[11]&&rt((()=>t[19].call(f))),L(S,"type","button"),L(N,"type","button"),n.disabled=O=t[6]&&"Promise"===t[6][Symbol.toStringTag]},m(c,$){T(c,e,$),x(e,n),x(n,o),x(o,r),x(o,i),x(o,s),t[17](s),U(s,t[8]),x(n,a),x(n,l),x(l,u),x(l,d),x(l,f),x(f,h),x(f,p),q(f,t[11],!0),x(n,m),x(n,g),F.m(g,null),x(n,y),x(n,v),W.m(v,null),x(n,b),Tt(w,n,null),x(n,k),x(n,S),x(n,C),x(n,N),P=!0,I||(D=[M(s,"input",t[18]),M(f,"change",t[19]),M(S,"click",t[21]),M(N,"click",t[16]),M(e,"submit",j(t[14]))],I=!0)},p(t,e){256&e&&s.value!==t[8]&&U(s,t[8]),2048&e&&q(f,t[11]),H===(H=B(t))&&F?F.p(t,e):(F.d(1),F=H(t),F&&(F.c(),F.m(g,null))),Y===(Y=R(t))&&W?W.p(t,e):(W.d(1),W=Y(t),W&&(W.c(),W.m(v,null)));const o={};!$&&64&e&&($=!0,o.promise=t[6],it((()=>$=!1))),w.$set(o),(!P||64&e&&O!==(O=t[6]&&"Promise"===t[6][Symbol.toStringTag]))&&(n.disabled=O)},i(t){P||(gt(w.$$.fragment,t),P=!0)},o(t){yt(w.$$.fragment,t),P=!1},d(n){n&&E(e),t[17](null),F.d(),W.d(),Et(w),I=!1,c(D)}}}function Wc(t){let e,n,r,i,s;return{c(){e=A("div"),e.textContent="Cette personne n'est pas un.e client.e",n=_(),r=A("button"),r.textContent="En faire un.e client.e",L(r,"type","button")},m(o,a){T(o,e,a),T(o,n,a),T(o,r,a),i||(s=M(r,"click",t[12]),i=!0)},p:o,d(t){t&&E(e),t&&E(n),t&&E(r),i=!1,s()}}}function Kc(t){let e,n,o,r,i,s,a=t[7].compteClient+"";return{c(){e=A("div"),e.textContent="Cette personne est un.e client.e",n=_(),o=A("p"),r=O("Compte client: "),i=A("code"),s=O(a)},m(t,a){T(t,e,a),T(t,n,a),T(t,o,a),x(o,r),x(o,i),x(i,s)},p(t,e){128&e&&a!==(a=t[7].compteClient+"")&&D(s,a)},d(t){t&&E(e),t&&E(n),t&&E(o)}}}function Vc(t){let e,n,r,i,s;return{c(){e=A("div"),e.textContent="Cette personne n'est pas un fournisseur",n=_(),r=A("button"),r.textContent="En faire un fournisseur",L(r,"type","button")},m(o,a){T(o,e,a),T(o,n,a),T(o,r,a),i||(s=M(r,"click",t[13]),i=!0)},p:o,d(t){t&&E(e),t&&E(n),t&&E(r),i=!1,s()}}}function Jc(t){let e,n,o,r,i,s,a=t[7].compteFournisseur+"";return{c(){e=A("div"),e.textContent="Cette personne est un fournisseur",n=_(),o=A("p"),r=O("Compte fournisseur: "),i=A("code"),s=O(a)},m(t,a){T(t,e,a),T(t,n,a),T(t,o,a),x(o,r),x(o,i),x(i,s)},p(t,e){128&e&&a!==(a=t[7].compteFournisseur+"")&&D(s,a)},d(t){t&&E(e),t&&E(n),t&&E(o)}}}function Gc(t){let e,n,o=t[7]&&Yc(t);return{c(){o&&o.c(),e=P()},m(t,r){o&&o.m(t,r),T(t,e,r),n=!0},p(t,n){t[7]?o?(o.p(t,n),128&n&&gt(o,1)):(o=Yc(t),o.c(),gt(o,1),o.m(e.parentNode,e)):o&&(pt(),yt(o,1,1,(()=>{o=null})),mt())},i(t){n||(gt(o),n=!0)},o(t){yt(o),n=!1},d(t){o&&o.d(t),t&&E(e)}}}function Qc(t){let e;return{c(){e=A("h1"),e.textContent="Liste des personnes connues",L(e,"slot","header")},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function Xc(t){let e;return{c(){e=A("h1"),e.textContent="Modifier une personne",L(e,"slot","form-header")},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function zc(t){let e,n;const o=[t[10]];let r={$$slots:{"form-header":[Xc],header:[Qc],default:[Gc]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=i(r,o[t]);return e=new ec({props:r}),t[22](e),e.$on("edit",t[23]),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const r=1024&n?kt(o,[xt(t[10])]):{};16780256&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(n){t[22](null),Et(e,n)}}}function Zc(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],org:t[2],repo:t[3],fullwidth:!0,$$slots:{default:[zc]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.login=t[0]),2&n&&(o.logout=t[1]),4&n&&(o.org=t[2]),8&n&&(o.repo=t[3]),16781296&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function tl(t,e,n){let o,r,i,s,a,c,l,{login:u}=e,{logout:d}=e,{org:f}=e,{repo:h}=e,{personnes:p}=e;async function m(t){n(7,r=t??{identifiant:Math.random().toString(32).slice(2),nom:"",type:"Physique",adresse:null,"compteAssocié·e":null,compteClient:null,compteFournisseur:null,siret:null}),n(8,i=r.nom),await ot(),s?.focus()}return t.$$set=t=>{"login"in t&&n(0,u=t.login),"logout"in t&&n(1,d=t.logout),"org"in t&&n(2,f=t.org),"repo"in t&&n(3,h=t.repo),"personnes"in t&&n(4,p=t.personnes)},t.$$.update=()=>{48&t.$$.dirty&&n(10,c={globalActions:[Za((()=>a.edit(-1)),"Nouvelle personne","Alt+N")],columns:["Nom"],data:p.map((t=>[{content:t.nom}]))}),16&t.$$.dirty&&console.log(p)},[u,d,f,h,p,a,o,r,i,s,c,l,function(t){const e=rc(p.map((({compteClient:t})=>t)).filter((t=>!!t)));n(7,r.compteClient=e,r)},function(t){const e=ic(p.map((({compteFournisseur:t})=>t)).filter((t=>!!t)));n(7,r.compteFournisseur=e,r)},function(){n(6,o=function(t){const e=!Is.state.personnes.data.some((e=>e.identifiant===t.identifiant));let n;if(e)Is.mutations.addPersonne(t),n=zs((()=>{const e=Is.state.personnes.sha;return Yr.writePersonnes(e,Is.state.personnes.data,`Ajout de ${t.nom}`)}),Qs)();else{Is.mutations.updatePersonne(t);const e=Is.state.personnes.sha;n=Yr.writePersonnes(e,Is.state.personnes.data,`Modification de ${t.nom}`).catch(Zs)}return n.then((({data:{content:{sha:t}}})=>Is.mutations.updatePersonnesSha(t)))}({...r,type:l,nom:i})),o.then((()=>{n(6,o=void 0),a.edit(p.findIndex((t=>t.identifiant===r.identifiant)))}))},m,function(){ra(r),a.edit(void 0)},function(t){X[t?"unshift":"push"]((()=>{s=t,n(9,s)}))},function(){i=this.value,n(8,i)},function(){l=B(this),n(11,l)},function(t){o=t,n(6,o)},()=>a.edit(void 0),function(t){X[t?"unshift":"push"]((()=>{a=t,n(5,a)}))},t=>m(p[t.detail])]}class el extends At{constructor(t){super(),Nt(this,t,tl,Zc,u,{login:0,logout:1,org:2,repo:3,personnes:4})}}function nl(t,e,n){const o=t.slice();return o[27]=e[n],o}function ol(t){let e,n,o,r=t[27].nom+"";return{c(){e=A("option"),n=O(r),e.__value=o=t[27],e.value=e.__value},m(t,o){T(t,e,o),x(e,n)},p(t,i){64&i&&r!==(r=t[27].nom+"")&&D(n,r),64&i&&o!==(o=t[27])&&(e.__value=o,e.value=e.__value)},d(t){t&&E(e)}}}function rl(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,O,P,I,D,B=t[6],H=[];for(let e=0;e<B.length;e+=1)H[e]=ol(nl(t,B,e));function F(e){t[23](e)}let R={};return void 0!==t[10]&&(R.promise=t[10]),b=new da({props:R}),X.push((()=>St(b,"promise",F))),{c(){e=A("form"),n=A("fieldset"),o=A("label"),r=A("div"),r.textContent="Personne",i=_(),s=A("select");for(let t=0;t<H.length;t+=1)H[t].c();a=_(),l=A("label"),u=A("div"),u.textContent="Début du contrat",d=_(),f=A("input"),h=_(),p=A("label"),m=A("div"),m.textContent="Fin du contrat",g=_(),y=A("input"),v=_(),Ct(b.$$.fragment),$=_(),k=A("button"),k.textContent="Abandonner les modifications",S=_(),C=A("button"),C.textContent="Supprimer",void 0===t[11]&&rt((()=>t[19].call(s))),L(f,"type","date"),L(y,"type","date"),L(k,"type","button"),L(C,"type","button"),n.disabled=O=t[10]&&"Promise"===t[10][Symbol.toStringTag]},m(c,w){T(c,e,w),x(e,n),x(n,o),x(o,r),x(o,i),x(o,s);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(s,null);q(s,t[11],!0),t[20](s),x(n,a),x(n,l),x(l,u),x(l,d),x(l,f),U(f,t[12]),x(n,h),x(n,p),x(p,m),x(p,g),x(p,y),U(y,t[13]),x(n,v),Tt(b,n,null),x(n,$),x(n,k),x(n,S),x(n,C),P=!0,I||(D=[M(s,"change",t[19]),M(f,"input",t[21]),M(y,"input",t[22]),M(k,"click",t[24]),M(C,"click",t[16]),M(e,"submit",j(t[14]))],I=!0)},p(t,e){if(64&e){let n;for(B=t[6],n=0;n<B.length;n+=1){const o=nl(t,B,n);H[n]?H[n].p(o,e):(H[n]=ol(o),H[n].c(),H[n].m(s,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=B.length}2048&e&&q(s,t[11]),4096&e&&U(f,t[12]),8192&e&&U(y,t[13]);const o={};!w&&1024&e&&(w=!0,o.promise=t[10],it((()=>w=!1))),b.$set(o),(!P||1024&e&&O!==(O=t[10]&&"Promise"===t[10][Symbol.toStringTag]))&&(n.disabled=O)},i(t){P||(gt(b.$$.fragment,t),P=!0)},o(t){yt(b.$$.fragment,t),P=!1},d(n){n&&E(e),N(H,n),t[20](null),Et(b),I=!1,c(D)}}}function il(t){let e;return{c(){e=A("h1"),e.textContent="Liste des salariats",L(e,"slot","header")},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function sl(t){let e;return{c(){e=A("h1"),e.textContent="Ajouter un salariat"},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function al(t){let e,n,o,r,i=t[17](t[9]).nom+"";return{c(){e=A("h1"),n=O("Modifier « "),o=O(i),r=O(" »")},m(t,i){T(t,e,i),x(e,n),x(e,o),x(e,r)},p(t,e){512&e&&i!==(i=t[17](t[9]).nom+"")&&D(o,i)},d(t){t&&E(e)}}}function cl(t){let e;function n(t,e){return t[9]&&""!==t[9].idPersonne?al:sl}let o=n(t),r=o(t);return{c(){r.c(),e=P()},m(t,n){r.m(t,n),T(t,e,n)},p(t,i){o===(o=n(t))&&r?r.p(t,i):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&E(e)}}}function ll(t){let e,n;const o=[t[7]];let r={$$slots:{"form-header":[cl],header:[il],default:[rl]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=i(r,o[t]);return e=new ec({props:r}),t[25](e),e.$on("edit",t[26]),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const r=128&n?kt(o,[xt(t[7])]):{};1073758048&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(n){t[25](null),Et(e,n)}}}function ul(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],org:t[2],repo:t[3],fullwidth:!0,$$slots:{default:[ll]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.login=t[0]),2&n&&(o.logout=t[1]),4&n&&(o.org=t[2]),8&n&&(o.repo=t[3]),1073758192&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function dl(t,e,n){let o,r,i,s,a,c,l,u,d,{login:f}=e,{logout:h}=e,{org:p}=e,{repo:m}=e,{personnes:g}=e,{salariats:y}=e;async function v(t){n(9,a=t??{idPersonne:"",identifiant:Math.random().toString(32).slice(2),"débutContrat":new Date,finContrat:null}),n(11,l=b(a)),n(12,u=Ss(a.débutContrat,"yyyy-MM-dd")),n(13,d=a.finContrat?Ss(t.finContrat,"yyyy-MM-dd"):void 0),await ot(),s?.focus()}const b=t=>g.find((e=>e.identifiant===t.idPersonne));return t.$$set=t=>{"login"in t&&n(0,f=t.login),"logout"in t&&n(1,h=t.logout),"org"in t&&n(2,p=t.org),"repo"in t&&n(3,m=t.repo),"personnes"in t&&n(18,g=t.personnes),"salariats"in t&&n(4,y=t.salariats)},t.$$.update=()=>{262144&t.$$.dirty&&n(6,o=g.filter((({type:t})=>"Physique"===t))),48&t.$$.dirty&&n(7,i={globalActions:[Za((()=>r.edit(-1)),"Ajouter un salariat","Alt+N")],columns:["Personne","Période du contrat"],data:y.map((t=>[{content:b(t)?.nom||"⚠️ Données corrompues (personne introuvable)"},{content:`${Rs(t.débutContrat)} - ${t.finContrat?Rs(t.finContrat):"Toujours en cours"}`,title:`${Ss(t.débutContrat,"d MMMM yyyy",{locale:_s})} - ${t.finContrat?Ss(t.finContrat,"d MMMM yyyy",{locale:_s}):"Toujours en cours"}`}]))})},[f,h,p,m,y,r,o,i,s,a,c,l,u,d,function(){n(10,c=function(t){const e=!Is.state.salariats.data.some((e=>e.identifiant===t.identifiant));let n;if(e)Is.mutations.addSalariat(t),n=zs((()=>{const t=Is.state.salariats.sha;return Yr.writeSalariats(t,Is.state.salariats.data)}),Qs)();else{Is.mutations.updateSalariat(t);const e=Is.state.salariats.sha;n=Yr.writeSalariats(e,Is.state.salariats.data).catch(Zs)}return n.then((({data:{content:{sha:t}}})=>Is.mutations.updateSalariatsSha(t)))}({identifiant:a.identifiant,idPersonne:l.identifiant,"débutContrat":new Date(u),finContrat:new Date(d)})),c.then((()=>{n(10,c=void 0),r.edit(y.findIndex((t=>t.identifiant===a.identifiant)))}))},v,function(){ia(a),r.edit(void 0)},b,g,function(){l=B(this),n(11,l)},function(t){X[t?"unshift":"push"]((()=>{s=t,n(8,s),n(6,o),n(18,g)}))},function(){u=this.value,n(12,u)},function(){d=this.value,n(13,d)},function(t){c=t,n(10,c)},()=>r.edit(void 0),function(t){X[t?"unshift":"push"]((()=>{r=t,n(5,r)}))},t=>v(y[t.detail])]}class fl extends At{constructor(t){super(),Nt(this,t,dl,ul,u,{login:0,logout:1,org:2,repo:3,personnes:18,salariats:4})}}function hl(t){return t.startsWith("2")||t.startsWith("3")||t.startsWith("5")}function pl(t){return t.startsWith("1")}function ml(t){return t.startsWith("4")}function gl(t){return t.startsWith("7")}function yl(t){return t.startsWith("6")}const vl=new Map(Object.entries({6061:"Fournitures non stockables (eau, énergie…)",60611:"Eau",6063:"Fournitures d’entretien et petit équipement",6064:"Fournitures administratives",607:"Achats de marchandises",608:"Frais accessoires d’achat",609:"Rabais, remises et ristournes obtenus sur achat",6132:"Locations immobilières",61321:"Loyers box garage",6135:"Locations mobilières",616:"Primes d'assurances",6226:"Honoraires",6251:"Voyages et déplacements",6252:"Hôtels",626:"Frais postaux et de télécommunications",627:"Services bancaires et assimilés"}));function bl(t,e,n){const o=t.slice();return o[36]=e[n],o[37]=e,o[38]=n,o}function wl(t,e,n){const o=t.slice();return o[39]=e[n][0],o[40]=e[n][1],o}function $l(t,e,n){const o=t.slice();return o[9]=e[n],o}function kl(t){let e,n,o,r,i=t[7],s=[];for(let e=0;e<i.length;e+=1)s[e]=Sl($l(t,i,e));return{c(){e=A("select"),n=A("option"),n.textContent="- ";for(let t=0;t<s.length;t+=1)s[t].c();n.__value=" - ",n.value=n.__value,void 0===t[9]&&rt((()=>t[22].call(e)))},m(i,a){T(i,e,a),x(e,n);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);q(e,t[9],!0),o||(r=M(e,"change",t[22]),o=!0)},p(t,n){if(192&n[0]){let o;for(i=t[7],o=0;o<i.length;o+=1){const r=$l(t,i,o);s[o]?s[o].p(r,n):(s[o]=Sl(r),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}640&n[0]&&q(e,t[9])},d(t){t&&E(e),N(s,t),o=!1,r()}}}function xl(t){let e;return{c(){e=A("select"),e.disabled=!0},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function Sl(t){let e,n,o,r,i=t[9].nom+"";return{c(){e=A("option"),n=O(i),e.__value=o=t[9],e.value=e.__value,e.selected=r=t[6].compteFournisseur===t[9].compteFournisseur},m(t,o){T(t,e,o),x(e,n)},p(t,s){128&s[0]&&i!==(i=t[9].nom+"")&&D(n,i),128&s[0]&&o!==(o=t[9])&&(e.__value=o,e.value=e.__value),192&s[0]&&r!==(r=t[6].compteFournisseur===t[9].compteFournisseur)&&(e.selected=r)},d(t){t&&E(e)}}}function Cl(t){let e,n,r=t[40]+"";return{c(){e=A("option"),n=O(r),e.__value=t[39],e.value=e.__value},m(t,o){T(t,e,o),x(e,n)},p:o,d(t){t&&E(e)}}}function Tl(t){let e,n,o,r=t[13](t[36]).tauxTVA+"";return{c(){e=O("⚠️ attontion, ça fait un taux de TVA chelou ("),n=O(r),o=O("%)")},m(t,r){T(t,e,r),T(t,n,r),T(t,o,r)},p(t,e){256&e[0]&&r!==(r=t[13](t[36]).tauxTVA+"")&&D(n,r)},d(t){t&&E(e),t&&E(n),t&&E(o)}}}function El(t){let e,n,o;function r(...e){return t[26](t[36],...e)}return{c(){e=A("button"),e.textContent="Supprimer ligne",L(e,"type","button")},m(t,i){T(t,e,i),n||(o=M(e,"click",r),n=!0)},p(e,n){t=e},d(t){t&&E(e),n=!1,o()}}}function Nl(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$=t[14](t[36]),k=[...t[12].entries()],S=[];for(let e=0;e<k.length;e+=1)S[e]=Cl(wl(t,k,e));function C(){t[23].call(i,t[37],t[38])}function O(){t[24].call(d,t[37],t[38])}function P(){t[25].call(g,t[37],t[38])}let j=$&&Tl(t),D=t[8].length>=2&&El(t);return{c(){e=A("fieldset"),n=A("label"),o=A("div"),o.textContent="Catégorie",r=_(),i=A("select");for(let t=0;t<S.length;t+=1)S[t].c();s=_(),a=A("label"),l=A("div"),l.textContent="Montant TTC (€)",u=_(),d=A("input"),f=_(),h=A("label"),p=A("div"),p.textContent="Montant TVA (€) (à récupérer)",m=_(),g=A("input"),y=_(),j&&j.c(),v=_(),D&&D.c(),void 0===t[36].compteProduit&&rt(C),L(d,"step","0.01"),L(d,"min","0"),L(d,"type","number"),L(g,"step","0.01"),L(g,"min","0"),L(g,"type","number"),L(e,"class","ligne-achat svelte-174mpqi")},m(c,$){T(c,e,$),x(e,n),x(n,o),x(n,r),x(n,i);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(i,null);q(i,t[36].compteProduit,!0),x(e,s),x(e,a),x(a,l),x(a,u),x(a,d),U(d,t[36].montantTTC),x(e,f),x(e,h),x(h,p),x(h,m),x(h,g),U(g,t[36].montantTVA),x(e,y),j&&j.m(e,null),x(e,v),D&&D.m(e,null),b||(w=[M(i,"change",C),M(d,"input",O),M(g,"input",P)],b=!0)},p(n,o){if(t=n,4096&o[0]){let e;for(k=[...t[12].entries()],e=0;e<k.length;e+=1){const n=wl(t,k,e);S[e]?S[e].p(n,o):(S[e]=Cl(n),S[e].c(),S[e].m(i,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=k.length}4352&o[0]&&q(i,t[36].compteProduit),4352&o[0]&&I(d.value)!==t[36].montantTTC&&U(d,t[36].montantTTC),4352&o[0]&&I(g.value)!==t[36].montantTVA&&U(g,t[36].montantTVA),256&o[0]&&($=t[14](t[36])),$?j?j.p(t,o):(j=Tl(t),j.c(),j.m(e,v)):j&&(j.d(1),j=null),t[8].length>=2?D?D.p(t,o):(D=El(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&E(e),N(S,t),j&&j.d(),D&&D.d(),b=!1,c(w)}}}function Al(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,P,I,D,U,q,B;function H(e){t[21](e)}let F={};function R(t,e){return t[7]&&0!==t[7].length?kl:xl}void 0!==t[6].date&&(F.date=t[6].date),s=new Mc({props:F}),X.push((()=>St(s,"date",H)));let Y=R(t),W=Y(t),K=t[8]||[],V=[];for(let e=0;e<K.length;e+=1)V[e]=Nl(bl(t,K,e));function J(e){t[28](e)}let G={};return void 0!==t[10]&&(G.promise=t[10]),$=new da({props:G}),X.push((()=>St($,"promise",J))),{c(){e=A("form"),n=A("fieldset"),o=A("label"),r=A("div"),r.textContent="Date de la facture",i=_(),Ct(s.$$.fragment),l=_(),u=A("label"),d=A("div"),d.textContent="Fournisseur",f=_(),W.c(),h=_(),p=A("a"),m=O("Rajouter un fournisseur"),y=_();for(let t=0;t<V.length;t+=1)V[t].c();v=_(),b=A("button"),b.textContent="Ajouter ligne",w=_(),Ct($.$$.fragment),S=_(),C=A("button"),C.textContent="Abandonner les modifications",P=_(),I=A("button"),I.textContent="Supprimer",L(p,"href",g="/comptabilite/personnes?org="+t[3]+"&repo="+t[4]),L(b,"type","button"),L(C,"type","button"),L(I,"type","button"),n.disabled=D=t[10]&&"Promise"===t[10][Symbol.toStringTag],L(e,"class","svelte-174mpqi")},m(a,c){T(a,e,c),x(e,n),x(n,o),x(o,r),x(o,i),Tt(s,o,null),x(n,l),x(n,u),x(u,d),x(u,f),W.m(u,null),x(u,h),x(u,p),x(p,m),x(n,y);for(let t=0;t<V.length;t+=1)V[t]&&V[t].m(n,null);x(n,v),x(n,b),x(n,w),Tt($,n,null),x(n,S),x(n,C),x(n,P),x(n,I),U=!0,q||(B=[M(b,"click",t[27]),M(C,"click",t[29]),M(I,"click",t[19]),M(e,"submit",j(t[15]))],q=!0)},p(t,e){const o={};if(!a&&64&e[0]&&(a=!0,o.date=t[6].date,it((()=>a=!1))),s.$set(o),Y===(Y=R(t))&&W?W.p(t,e):(W.d(1),W=Y(t),W&&(W.c(),W.m(u,h))),(!U||24&e[0]&&g!==(g="/comptabilite/personnes?org="+t[3]+"&repo="+t[4]))&&L(p,"href",g),291072&e[0]){let o;for(K=t[8]||[],o=0;o<K.length;o+=1){const r=bl(t,K,o);V[o]?V[o].p(r,e):(V[o]=Nl(r),V[o].c(),V[o].m(n,v))}for(;o<V.length;o+=1)V[o].d(1);V.length=K.length}const r={};!k&&1024&e[0]&&(k=!0,r.promise=t[10],it((()=>k=!1))),$.$set(r),(!U||1024&e[0]&&D!==(D=t[10]&&"Promise"===t[10][Symbol.toStringTag]))&&(n.disabled=D)},i(t){U||(gt(s.$$.fragment,t),gt($.$$.fragment,t),U=!0)},o(t){yt(s.$$.fragment,t),yt($.$$.fragment,t),U=!1},d(t){t&&E(e),Et(s),W.d(),N(V,t),Et($),q=!1,c(B)}}}function Ol(t){let e,n,o;return{c(){e=A("h1"),n=O("Achats réalisés par "),o=O(t[3]),L(e,"slot","header"),L(e,"class","svelte-174mpqi")},m(t,r){T(t,e,r),x(e,n),x(e,o)},p(t,e){8&e[0]&&D(o,t[3])},d(t){t&&E(e)}}}function _l(t){let e;return{c(){e=A("h2"),e.textContent="Achat",L(e,"slot","form-header")},m(t,n){T(t,e,n)},p:o,d(t){t&&E(e)}}}function Pl(t){let e,n;const o=[t[11]];let r={$$slots:{"form-header":[_l],header:[Ol],default:[Al]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=i(r,o[t]);return e=new ec({props:r}),t[30](e),e.$on("edit",t[31]),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const r=2048&n[0]?kt(o,[xt(t[11])]):{};2040&n[0]|16384&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(n){t[30](null),Et(e,n)}}}function Ml(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],org:t[3],repo:t[4],fullwidth:!0,$$slots:{default:[Pl]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.login=t[0]),2&n[0]&&(o.logout=t[1]),8&n[0]&&(o.org=t[3]),16&n[0]&&(o.repo=t[4]),4092&n[0]|16384&n[1]&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function jl(t,e,n){let o,r,{login:i}=e,{logout:s}=e,{achats:a}=e,{org:c}=e,{repo:l}=e,{personnes:u}=e,d=Ur();const f=new Map([...vl.entries()].filter((([t])=>function(t){return t.startsWith("60")||t.startsWith("61")||t.startsWith("62")}(t))));let h,p,m,g;function y({montantHT:t,tauxTVA:e,compteProduit:n}){const o=ac({montantHT:t,tauxTVA:e,compteProduit:n});return{compteProduit:n,montantTVA:o,montantTTC:t+o}}function v({compteProduit:t,montantTVA:e,montantTTC:n}){const o=n-e;return{montantHT:o,tauxTVA:lc(o,e),compteProduit:t}}async function b(t){n(6,d=t??Ur()),await ot()}function w(){p.push({montantTTC:void 0,montantTVA:void 0,compteProduit:void 0}),n(8,p)}function $(t){const e=p.indexOf(t);e>=0&&(p.splice(e,1),n(8,p))}return t.$$set=t=>{"login"in t&&n(0,i=t.login),"logout"in t&&n(1,s=t.logout),"achats"in t&&n(2,a=t.achats),"org"in t&&n(3,c=t.org),"repo"in t&&n(4,l=t.repo),"personnes"in t&&n(20,u=t.personnes)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&n(7,h=u?.filter((({compteFournisseur:t})=>!!t))),512&t.$$.dirty[0]&&n(6,d.compteFournisseur=m?.compteFournisseur,d),64&t.$$.dirty[0]&&function(t){n(8,p=t?t.lignes.map(y):void 0)}(d),256&t.$$.dirty[0]&&function(t){t&&d&&n(6,d.lignes=t.map(v),d)}(p),164&t.$$.dirty[0]&&n(11,g={globalActions:[Za((()=>o.edit(-1)),"Nouvel achat","Alt+N")],placeholder:"Sélectionne un achat dans la liste pour en voir le détail ou le modifier",columns:["Date","Fournisseur","Montant TTC","Montant TVA"],data:a.map((t=>[{content:Rs(t.date),title:Fs(t.date)},{content:h.find((e=>e.compteFournisseur===t.compteFournisseur))?.nom||`client non trouvé (${t.compteFournisseur})`},{content:Ws(fc(t))},{content:Ws(dc(t))}]))})},[i,s,a,c,l,o,d,h,p,m,r,g,f,v,function({montantTVA:t,montantTTC:e}){const n=lc(e-t,t),o=[...sc].filter((t=>"number"==typeof t));return!!o.every((t=>Math.abs(n-t)>=.2))},function(){n(10,r=function(t){const e=t.date,n=Fs(e);return ea(e.getFullYear(),t,`Création de l'achat du ${n}`,`Modification de l'achat du ${n}`)}(d)),r.then((()=>{n(10,r=void 0),o.edit(a.findIndex((t=>t.identifiant===d.identifiant)))}))},b,w,$,function(){na(d),o.edit(void 0)},u,function(e){t.$$.not_equal(d.date,e)&&(d.date=e,n(6,d),n(9,m))},function(){m=B(this),n(9,m),n(7,h),n(20,u)},function(t,e){t[e].compteProduit=B(this),n(8,p),n(12,f)},function(t,e){t[e].montantTTC=I(this.value),n(8,p),n(12,f)},function(t,e){t[e].montantTVA=I(this.value),n(8,p),n(12,f)},(t,e)=>$(t),t=>w(),function(t){r=t,n(10,r)},t=>o.edit(void 0),function(t){X[t?"unshift":"push"]((()=>{o=t,n(5,o)}))},t=>b(a[t.detail])]}class Ll extends At{constructor(t){super(),Nt(this,t,jl,Ml,u,{login:0,logout:1,achats:2,org:3,repo:4,personnes:20},null,[-1,-1])}}const Il=t=>Hs(t.map((t=>t.montantHT*t.tauxTVA/100)));function Dl(t){if(0==t.lignes.length)return[];const e={compte:t.compteClient,montant:(n=t.lignes,Hs(n.map((t=>t.montantHT)))),sens:"Débit"};var n;return[e,{compte:"44566",montant:Il(t.lignes),sens:"Crédit"}]}function Ul(t){return[{compte:t.compteBancaire,montant:Hs(t.opérations.map((t=>t.montant))),sens:"Crédit"}].concat(t.opérations)}function ql(t){let e=[];return t.opérations?.forEach((t=>{const n={compte:t.compte,montant:t.montant,sens:"Crédit"};e.push(n)})),e}function Bl(t,e,n){const o=t.slice();return o[8]=e[n],o}function Hl(t,e,n){const o=t.slice();return o[11]=e[n],o}function Fl(t){let e,n,o,r=t[11]+"";return{c(){e=A("option"),n=O(r),e.__value=o=t[11],e.value=e.__value},m(t,o){T(t,e,o),x(e,n)},p(t,i){8&i&&r!==(r=t[11]+"")&&D(n,r),8&i&&o!==(o=t[11])&&(e.__value=o,e.value=e.__value)},d(t){t&&E(e)}}}function Rl(t){let e,n,o,r,i,s,a,c,l,u,d=t[8][0]+"",f=Ks(t[8][0])+"",h=Ws(t[8][1])+"";return{c(){e=A("tr"),n=A("td"),o=O(d),r=_(),i=A("td"),s=O(f),a=_(),c=A("td"),l=O(h),u=_()},m(t,d){T(t,e,d),x(e,n),x(n,o),x(e,r),x(e,i),x(i,s),x(e,a),x(e,c),x(c,l),x(e,u)},p(t,e){16&e&&d!==(d=t[8][0]+"")&&D(o,d),16&e&&f!==(f=Ks(t[8][0])+"")&&D(s,f),16&e&&h!==(h=Ws(t[8][1])+"")&&D(l,h)},d(t){t&&E(e)}}}function Yl(t){let e,n,o,r,i,s,a,c,l,u,d,f=t[3],h=[];for(let e=0;e<f.length;e+=1)h[e]=Fl(Hl(t,f,e));let p=[...t[4]],m=[];for(let e=0;e<p.length;e+=1)m[e]=Rl(Bl(t,p,e));return{c(){e=A("label"),n=A("div"),n.textContent="Année",o=_(),r=A("select");for(let t=0;t<h.length;t+=1)h[t].c();i=_(),s=A("table"),a=A("thead"),a.innerHTML="<tr><th>Numéro de compte</th> \n        <th>Propriétaire</th> \n        <th>Montant</th></tr>",c=_(),l=A("tbody");for(let t=0;t<m.length;t+=1)m[t].c();void 0===t[2]&&rt((()=>t[6].call(r)))},m(f,p){T(f,e,p),x(e,n),x(e,o),x(e,r);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(r,null);q(r,t[2],!0),T(f,i,p),T(f,s,p),x(s,a),x(s,c),x(s,l);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(l,null);u||(d=M(r,"change",t[6]),u=!0)},p(t,e){if(8&e){let n;for(f=t[3],n=0;n<f.length;n+=1){const o=Hl(t,f,n);h[n]?h[n].p(o,e):(h[n]=Fl(o),h[n].c(),h[n].m(r,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=f.length}if(12&e&&q(r,t[2]),16&e){let n;for(p=[...t[4]],n=0;n<p.length;n+=1){const o=Bl(t,p,n);m[n]?m[n].p(o,e):(m[n]=Rl(o),m[n].c(),m[n].m(l,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=p.length}},d(t){t&&E(e),N(h,t),t&&E(i),t&&E(s),N(m,t),u=!1,d()}}}function Wl(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],fullwidth:!0,$$slots:{default:[Yl]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.login=t[0]),2&n&&(o.logout=t[1]),16412&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function Kl(t,e,n){let o,r,{login:i}=e,{logout:s}=e,{opHautNiveau:a}=e,c=[];function l(){if(void 0!==a){let t=(t=>{let e=[];for(const o of t){let t;switch(o.type){case"Envoi facture à client":t=Dl(o);break;case"Paiement facture client":throw"pas implémenté";case"Réception facture fournisseur":t=[{compte:(n=o).compteFournisseur,montant:Hs(n.opérations.map((t=>t.montant))),sens:"Crédit"}];break;case"Paiement facture fournisseur":t=Ul(o);break;case"Fiche de paie":t=ql(o);break;default:return o}e=e.concat(t)}var n;return e})(a.get(r).opérationsHautNiveau);try{n(4,o=(t=>{const e=new Map;console.log(t);for(const{sens:n,compte:o,montant:r}of t){if(null==o||""==o)throw new Error("Nom de compte vide");const t=e.get(o)||0;if(hl(o)||yl(o))"Débit"===n?e.set(o,t+r):e.set(o,t-r);else{if(!(pl(o)||gl(o)||ml(o)))throw new Error(`Compte inconnu: ${o}`);"Crédit"===n?e.set(o,t+r):e.set(o,t-r)}}return e})(t))}catch(t){console.error(t)}}else n(4,o=[])}return t.$$set=t=>{"login"in t&&n(0,i=t.login),"logout"in t&&n(1,s=t.logout),"opHautNiveau"in t&&n(5,a=t.opHautNiveau)},t.$$.update=()=>{44&t.$$.dirty&&(void 0!==a&&void 0===r&&(n(3,c=[...a.keys()]),n(2,r=c.at(-1))),l())},[i,s,r,c,o,a,function(){r=B(this),n(2,r),n(5,a),n(3,c),n(3,c),n(5,a),n(2,r)}]}class Vl extends At{constructor(t){super(),Nt(this,t,Kl,Wl,u,{login:0,logout:1,opHautNiveau:5})}}function Jl(t,e,n){const o=t.slice();return o[14]=e[n],o[15]=e,o[16]=n,o}function Gl(t,e,n){const o=t.slice();return o[17]=e[n][0],o[18]=e[n][1],o}function Ql(t,e,n){const o=t.slice();return o[21]=e[n].date,o[22]=e[n].montant,o[23]=e[n].description,o[24]=e[n].commentaire,o}function Xl(t){let e,n,o,r,i,s,a,c,l,u,d,f,h,p=Rs(t[21])+"",m=Ws(t[22])+"",g=t[23]+"",y=t[24]+"";return{c(){e=A("tr"),n=A("td"),o=O(p),r=_(),i=A("td"),s=O(m),a=_(),c=A("td"),l=O(g),u=_(),d=A("td"),f=O(y),h=_()},m(t,p){T(t,e,p),x(e,n),x(n,o),x(e,r),x(e,i),x(i,s),x(e,a),x(e,c),x(c,l),x(e,u),x(e,d),x(d,f),x(e,h)},p(t,e){16&e&&p!==(p=Rs(t[21])+"")&&D(o,p),16&e&&m!==(m=Ws(t[22])+"")&&D(s,m),16&e&&g!==(g=t[23]+"")&&D(l,g),16&e&&y!==(y=t[24]+"")&&D(f,y)},d(t){t&&E(e)}}}function zl(t){let e,n,o,r,i,s,a,c,l,u,d,f,h=t[17]+"",p=t[18].length+"",m=t[18],g=[];for(let e=0;e<m.length;e+=1)g[e]=Xl(Ql(t,m,e));return{c(){e=A("details"),n=A("summary"),o=O(h),r=O(" ("),i=O(p),s=O(")"),a=_(),c=A("table"),l=A("thead"),l.innerHTML="<th>Date</th><th>Montant</th><th>Description (relevé)</th><th>Commentaire (nous)</th>",u=_(),d=A("tbody");for(let t=0;t<g.length;t+=1)g[t].c();f=_()},m(t,h){T(t,e,h),x(e,n),x(n,o),x(n,r),x(n,i),x(n,s),x(e,a),x(e,c),x(c,l),x(c,u),x(c,d);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(d,null);x(e,f)},p(t,e){if(16&e&&h!==(h=t[17]+"")&&D(o,h),16&e&&p!==(p=t[18].length+"")&&D(i,p),16&e){let n;for(m=t[18],n=0;n<m.length;n+=1){const o=Ql(t,m,n);g[n]?g[n].p(o,e):(g[n]=Xl(o),g[n].c(),g[n].m(d,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=m.length}},d(t){t&&E(e),N(g,t)}}}function Zl(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$;function k(e){t[9](e,t[14])}let S={};function C(){t[10].call(a,t[15],t[16])}function N(){t[11].call(d,t[15],t[16])}function O(){t[12].call(p,t[15],t[16])}function P(){return t[13](t[14])}return void 0!==t[14].date&&(S.date=t[14].date),o=new Mc({props:S}),X.push((()=>St(o,"date",k))),{c(){e=A("tr"),n=A("td"),Ct(o.$$.fragment),i=_(),s=A("td"),a=A("input"),l=_(),u=A("td"),d=A("input"),f=_(),h=A("td"),p=A("input"),m=_(),g=A("td"),y=A("button"),y.textContent="Supprimer",v=_(),L(a,"type","number"),L(d,"type","text"),L(p,"type","text")},m(r,c){T(r,e,c),x(e,n),Tt(o,n,null),x(e,i),x(e,s),x(s,a),U(a,t[14].montant),x(e,l),x(e,u),x(u,d),U(d,t[14].description),x(e,f),x(e,h),x(h,p),U(p,t[14].commentaire),x(e,m),x(e,g),x(g,y),x(e,v),b=!0,w||($=[M(a,"input",C),M(d,"input",N),M(p,"input",O),M(y,"click",P)],w=!0)},p(e,n){t=e;const i={};!r&&32&n&&(r=!0,i.date=t[14].date,it((()=>r=!1))),o.$set(i),32&n&&I(a.value)!==t[14].montant&&U(a,t[14].montant),32&n&&d.value!==t[14].description&&U(d,t[14].description),32&n&&p.value!==t[14].commentaire&&U(p,t[14].commentaire)},i(t){b||(gt(o.$$.fragment,t),b=!0)},o(t){yt(o.$$.fragment,t),b=!1},d(t){t&&E(e),Et(o),w=!1,c($)}}}function tu(t){let e,n,o,r,i,s,a,l,u,d,f,h,p,m,g,y,v,b,w,$,k,S,C,O,P,j,L=[...t[4]||[]],I=[];for(let e=0;e<L.length;e+=1)I[e]=zl(Gl(t,L,e));let D=t[5],U=[];for(let e=0;e<D.length;e+=1)U[e]=Zl(Jl(t,D,e));const q=t=>yt(U[t],1,1,(()=>{U[t]=null}));return{c(){e=A("h1"),e.textContent="Import bancaire",n=_(),o=A("p"),o.textContent="Par ici, on importe les données bancaires et on essaye de les classifier",r=_(),i=A("p"),i.textContent="Pour le moment, y'a que un import Anytime qui fonctionne. L'idée, c'est d'ouvrir un pdf et de copier/coller le tableau en texte",s=_(),a=A("p"),a.textContent="Ensuite, ça convertit en tableau et on valide le tableau",l=_(),u=A("h2"),u.textContent="Lignes de compte historiques",d=_();for(let t=0;t<I.length;t+=1)I[t].c();f=_(),h=A("h2"),h.textContent="Ajout de lignes de compte",p=_(),m=A("p"),m.textContent="Ce qui a été compris automatiquement",g=_(),y=A("table"),v=A("thead"),v.innerHTML="<tr><th>Date</th> \n                <th>Montant</th> \n                <th>Description (sur le relevé bancaire)</th> \n                <th>Commentaire (libre)</th> \n                <th>Supprimer</th></tr>",b=_(),w=A("tbody");for(let t=0;t<U.length;t+=1)U[t].c();$=_(),k=A("button"),k.textContent="Ajouter une ligne",S=_(),C=A("button"),C.textContent="Sauvegarder"},m(c,E){T(c,e,E),T(c,n,E),T(c,o,E),T(c,r,E),T(c,i,E),T(c,s,E),T(c,a,E),T(c,l,E),T(c,u,E),T(c,d,E);for(let t=0;t<I.length;t+=1)I[t]&&I[t].m(c,E);T(c,f,E),T(c,h,E),T(c,p,E),T(c,m,E),T(c,g,E),T(c,y,E),x(y,v),x(y,b),x(y,w);for(let t=0;t<U.length;t+=1)U[t]&&U[t].m(w,null);T(c,$,E),T(c,k,E),T(c,S,E),T(c,C,E),O=!0,P||(j=[M(k,"click",t[6]),M(C,"click",t[8])],P=!0)},p(t,e){if(16&e){let n;for(L=[...t[4]||[]],n=0;n<L.length;n+=1){const o=Gl(t,L,n);I[n]?I[n].p(o,e):(I[n]=zl(o),I[n].c(),I[n].m(f.parentNode,f))}for(;n<I.length;n+=1)I[n].d(1);I.length=L.length}if(160&e){let n;for(D=t[5],n=0;n<D.length;n+=1){const o=Jl(t,D,n);U[n]?(U[n].p(o,e),gt(U[n],1)):(U[n]=Zl(o),U[n].c(),gt(U[n],1),U[n].m(w,null))}for(pt(),n=D.length;n<U.length;n+=1)q(n);mt()}},i(t){if(!O){for(let t=0;t<D.length;t+=1)gt(U[t]);O=!0}},o(t){U=U.filter(Boolean);for(let t=0;t<U.length;t+=1)yt(U[t]);O=!1},d(t){t&&E(e),t&&E(n),t&&E(o),t&&E(r),t&&E(i),t&&E(s),t&&E(a),t&&E(l),t&&E(u),t&&E(d),N(I,t),t&&E(f),t&&E(h),t&&E(p),t&&E(m),t&&E(g),t&&E(y),N(U,t),t&&E($),t&&E(k),t&&E(S),t&&E(C),P=!1,c(j)}}}function eu(t){let e,n;return e=new Yt({props:{login:t[0],logout:t[1],org:t[2],repo:t[3],$$slots:{default:[tu]},$$scope:{ctx:t}}}),{c(){Ct(e.$$.fragment)},m(t,o){Tt(e,t,o),n=!0},p(t,[n]){const o={};1&n&&(o.login=t[0]),2&n&&(o.logout=t[1]),4&n&&(o.org=t[2]),8&n&&(o.repo=t[3]),134217776&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(gt(e.$$.fragment,t),n=!0)},o(t){yt(e.$$.fragment,t),n=!1},d(t){Et(e,t)}}}function nu(t,e,n){let{login:o}=e,{logout:r}=e,{org:i}=e,{repo:s}=e,{"lignesBancairesParAnnée":a=new Map}=e,c=[];function l(t){const e=c.indexOf(t);e>=0&&(c.splice(e,1),n(5,c))}return t.$$set=t=>{"login"in t&&n(0,o=t.login),"logout"in t&&n(1,r=t.logout),"org"in t&&n(2,i=t.org),"repo"in t&&n(3,s=t.repo),"lignesBancairesParAnnée"in t&&n(4,a=t.lignesBancairesParAnnée)},[o,r,i,s,a,c,function(){const t=function(){const t=new Date;return{identifiant:Math.random().toString(32).slice(2),type:"Ligne bancaire",date:t,compteBancaire:"",description:"",montant:0}}();t.compteBancaire="512",c.push(t),n(5,c)},l,async function(){await oa(c),n(5,c=[])},function(e,o){t.$$.not_equal(o.date,e)&&(o.date=e,n(5,c))},function(t,e){t[e].montant=I(this.value),n(5,c)},function(t,e){t[e].description=this.value,n(5,c)},function(t,e){t[e].commentaire=this.value,n(5,c)},t=>l(t)]}class ou extends At{constructor(t){super(),Nt(this,t,nu,eu,u,{login:0,logout:1,org:2,repo:3,"lignesBancairesParAnnée":4})}}console.info("start");const ru=document.body;let iu,su=t=>{};function au(t,e){if(!e)throw new Error("Missing _mapStateToProps in replaceComponent");iu&&iu.$destroy(),iu=t,su=e}function cu(){Js().then((()=>n("/")))}Is.subscribe((function(t){const e=su(t);e&&iu.$set(e)})),n("/",(()=>{function t(t){return{login:t.login,logout:cu}}console.info("route","/"),Is.state.login&&(Is.state.repoName,Promise.resolve(Is.state.login).then((t=>{console.info("Logged in as",t,"Moving to /choose-organisation"),n("/choose-organisation")})));au(new Jt({target:ru,props:t(Is.state)}),t)})),n("/choose-organisation",(()=>{function t(t){return{login:t.login,logout:cu,possibleOrganisations:t.userOrgs}}console.info("route","/choose-organisation"),function(){const t=Yr.getOrgs().then((t=>(Is.mutations.setUserOrgs(t),t)));Is.mutations.setUserOrgs(t)}();au(new hi({target:ru,props:t(Is.state)}),t)})),n("/comptabilite/",(({querystring:t})=>{console.info("route","/comptabilite/",t);const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){return{login:t.login,logout:cu,org:n,repo:o}}ta(n,o);au(new yi({target:ru,props:r(Is.state)}),r)})),n("/comptabilite/ventes",(({querystring:t})=>{console.info("route","/comptabilite/ventes",t);const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){return{login:t.login,logout:cu,org:n,repo:o,personnes:t.personnes?.data??[],"envoiFactureàClients":Us(t)}}ta(n,o);au(new Oc({target:ru,props:r(Is.state)}),r)})),n("/comptabilite/fiches-de-paie",(({querystring:t})=>{const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){return{login:t.login,logout:cu,org:n,repo:o,personnes:t.personnes?.data??[],salariats:t.salariats?.data??[],fichesDePaie:qs(t)}}ta(n,o);au(new Rc({target:ru,props:r(Is.state)}),r)})),n("/comptabilite/personnes",(({querystring:t})=>{const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){return{login:t.login,logout:cu,org:n,repo:o,personnes:t.personnes?.data??[],fichesDePaie:qs(t)}}ta(n,o);au(new el({target:ru,props:r(Is.state)}),r)})),n("/comptabilite/achats",(({querystring:t})=>{const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){return{login:t.login,logout:cu,achats:Bs(t)??[],org:n,repo:o,personnes:t.personnes?.data??[]}}ta(n,o);au(new Ll({target:ru,props:r(Is.state)}),r)})),n("/comptabilite/salariats",(({querystring:t})=>{const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){return{login:t.login,logout:cu,org:n,repo:o,personnes:t.personnes?.data??[],salariats:t.salariats?.data??[]}}ta(n,o);au(new fl({target:ru,props:r(Is.state)}),r)})),n("/comptabilite/compte-resultat",(({querystring:t})=>{const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){return{login:t.login,logout:cu,achats:Bs(t)??[],org:n,repo:o,opHautNiveau:t.opérationsHautNiveauByYear}}ta(n,o);au(new Vl({target:ru,props:r(Is.state)}),r)})),n("/comptabilite/import-banque",(({querystring:t})=>{const e=new URLSearchParams(t),n=e.get("org"),o=e.get("repo");function r(t){const e=t.opérationsHautNiveauByYear&&new Map([...t.opérationsHautNiveauByYear].map((([t,{"opérationsHautNiveau":e}])=>[t,e.filter((({type:t})=>"Ligne bancaire"===t))])).filter((([t,e])=>e.length>=1)).toSorted((([t],[e])=>e-t)));return{login:t.login,logout:cu,org:n,repo:o,"lignesBancairesParAnnée":e}}ta(n,o);au(new ou({target:ru,props:r(Is.state)}),r)}));const lu=new URL(location.href),uu=lu.searchParams.get("access_token");var du;uu&&(du=uu,Is.mutations.setToken(du),Yr.token=du,js(du)).then((()=>{lu.searchParams.delete("access_token"),history.replaceState(void 0,"",lu)})).catch((t=>{console.error("Saving token failed",t)})),async function(){if(Is.state.githubToken){Yr.token=Is.state.githubToken;const t=Yr.getAuthenticatedUser().then((({login:t})=>(Is.mutations.setLogin(t),t)));return Is.mutations.setLogin(t),t}return Promise.resolve(void 0)}().catch((t=>{console.error("init dance error",t)})).then((t=>{t?n.start():(n.start({dispatch:!1}),console.info("no valid login found, redirected to / route"),Js().then((()=>n("/"))))}));
