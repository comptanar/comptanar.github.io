var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var n=t((function(e,t){e.exports=function(){var e=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t=b,n=a,r=c,o=l,i=y,s=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e){for(var t,n=[],r=0,o=0,i="";null!=(t=s.exec(e));){var a=t[0],c=t[1],l=t.index;if(i+=e.slice(o,l),o=l+a.length,c)i+=c[1];else{i&&(n.push(i),i="");var u=t[2],f=t[3],d=t[4],p=t[5],m=t[6],g=t[7],y="+"===m||"*"===m,b="?"===m||"*"===m,v=u||"/",w=d||p||(g?".*":"[^"+v+"]+?");n.push({name:f||r++,prefix:u||"",delimiter:v,optional:b,repeat:y,pattern:h(w)})}}return o<e.length&&(i+=e.substr(o)),i&&n.push(i),n}function c(e){return l(a(e))}function l(t){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(n[r]=new RegExp("^"+t[r].pattern+"$"));return function(r){for(var o="",i=r||{},s=0;s<t.length;s++){var a=t[s];if("string"!=typeof a){var c,l=i[a.name];if(null==l){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(e(l)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+l+'"');if(0===l.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<l.length;u++){if(c=encodeURIComponent(l[u]),!n[s].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');o+=(0===u?a.prefix:a.delimiter)+c}}else{if(c=encodeURIComponent(l),!n[s].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');o+=a.prefix+c}}else o+=a}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function h(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function p(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return f(e,t)}function m(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(b(e[o],t,n).source);return f(new RegExp("(?:"+r.join("|")+")",d(n)),t)}function g(e,t,n){for(var r=a(e),o=y(r,n),i=0;i<r.length;i++)"string"!=typeof r[i]&&t.push(r[i]);return f(o,t)}function y(e,t){for(var n=(t=t||{}).strict,r=!1!==t.end,o="",i=e[e.length-1],s="string"==typeof i&&/\/$/.test(i),a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)o+=u(c);else{var l=u(c.prefix),h=c.pattern;c.repeat&&(h+="(?:"+l+h+")*"),o+=h=c.optional?l?"(?:"+l+"("+h+"))?":"("+h+")?":l+"("+h+")"}}return n||(o=(s?o.slice(0,-2):o)+"(?:\\/(?=$))?"),o+=r?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+o,d(t))}function b(t,n,r){return e(n=n||[])?r||(r={}):(r=n,n=[]),t instanceof RegExp?p(t,n):e(t)?m(t,n,r):g(t,n,r)}t.parse=n,t.compile=r,t.tokensToFunction=o,t.tokensToRegExp=i;var v,w="undefined"!=typeof document,k="undefined"!=typeof window,E="undefined"!=typeof history,S="undefined"!=typeof process,x=w&&document.ontouchstart?"touchstart":"click",T=k&&!(!window.history.location&&!window.location);function N(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function $(){var e=new N;function t(){return O.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=$,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(t){e.len=t}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(t){e.current=t}}),t.Context=M,t.Route=_,t}function O(e,t){if("function"==typeof e)return O.call(this,"*",e);if("function"==typeof t)for(var n=new _(e,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function C(e){if(!e.handled){var t=this,n=t._window;(t._hashbang?T&&this._getBase()+n.location.hash.replace("#!",""):T&&n.location.pathname+n.location.search)!==e.canonicalPath&&(t.stop(),e.handled=!1,T&&(n.location.href=e.canonicalPath))}}function A(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function M(e,t,n){var r=this.page=n||O,o=r._window,i=r._hashbang,s=r._getBase();"/"===e[0]&&0!==e.indexOf(s)&&(e=s+(i?"#!":"")+e);var a=e.indexOf("?");this.canonicalPath=e;var c=new RegExp("^"+A(s));if(this.path=e.replace(c,"")||"/",i&&(this.path=this.path.replace("#!","")||"/"),this.title=w&&o.document.title,this.state=t||{},this.state.path=e,this.querystring=~a?r._decodeURLEncodedURIComponent(e.slice(a+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~a?e.slice(0,a):e),this.params={},this.hash="",!i){if(!~this.path.indexOf("#"))return;var l=this.path.split("#");this.path=this.pathname=l[0],this.hash=r._decodeURLEncodedURIComponent(l[1])||"",this.querystring=this.querystring.split("#")[0]}}function _(e,n,r){var o=this.page=r||L,i=n||{};i.strict=i.strict||o._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=t(this.path,this.keys=[],i)}N.prototype.configure=function(e){var t=e||{};this._window=t.window||k&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&k,this._click=!1!==t.click&&w,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):k&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(x,this.clickHandler,!1):w&&n.document.removeEventListener(x,this.clickHandler,!1),this._hashbang&&k&&!E?n.addEventListener("hashchange",this._onpopstate,!1):k&&n.removeEventListener("hashchange",this._onpopstate,!1)},N.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},N.prototype._getBase=function(){var e=this._base;if(e)return e;var t=k&&this._window&&this._window.location;return k&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},N.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},N.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var n;if(this._running=!0,T){var r=this._window.location;n=this._hashbang&&~r.hash.indexOf("#!")?r.hash.substr(2)+r.search:this._hashbang?r.search+r.hash:r.pathname+r.search+r.hash}this.replace(n,null,!0,t.dispatch)}},N.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(x,this.clickHandler,!1),k&&e.removeEventListener("popstate",this._onpopstate,!1),k&&e.removeEventListener("hashchange",this._onpopstate,!1)}},N.prototype.show=function(e,t,n,r){var o=new M(e,t,this),i=this.prevContext;return this.prevContext=o,this.current=o.path,!1!==n&&this.dispatch(o,i),!1!==o.handled&&!1!==r&&o.pushState(),o},N.prototype.back=function(e,t){var n=this;if(this.len>0){var r=this._window;E&&r.history.back(),this.len--}else e?setTimeout((function(){n.show(e,t)})):setTimeout((function(){n.show(n._getBase(),t)}))},N.prototype.redirect=function(e,t){var n=this;"string"==typeof e&&"string"==typeof t&&O.call(this,e,(function(e){setTimeout((function(){n.replace(t)}),0)})),"string"==typeof e&&void 0===t&&setTimeout((function(){n.replace(e)}),0)},N.prototype.replace=function(e,t,n,r){var o=new M(e,t,this),i=this.prevContext;return this.prevContext=o,this.current=o.path,o.init=n,o.save(),!1!==r&&this.dispatch(o,i),o},N.prototype.dispatch=function(e,t){var n=0,r=0,o=this;function i(){var e=o.exits[r++];if(!e)return s();e(t,i)}function s(){var t=o.callbacks[n++];if(e.path===o.current)return t?void t(e,s):C.call(o,e);e.handled=!1}t?i():s()},N.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var n=new _(e,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))},N.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName&&"A"===n[r].nodeName.toUpperCase()&&n[r].href){t=n[r];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var o="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var i=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==i)&&!(i&&i.indexOf("mailto:")>-1)&&!(o?t.target.baseVal:t.target)&&(o||this.sameOrigin(t.href))){var s=o?t.href.baseVal:t.pathname+t.search+(t.hash||"");s="/"!==s[0]?"/"+s:s,S&&s.match(/^\/[a-zA-Z]:\//)&&(s=s.replace(/^\/[a-zA-Z]:\//,"/"));var a=s,c=this._getBase();0===s.indexOf(c)&&(s=s.substr(c.length)),this._hashbang&&(s=s.replace("#!","")),(!c||a!==s||T&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(a))}}}}},N.prototype._onpopstate=(v=!1,k?(w&&"complete"===document.readyState?v=!0:window.addEventListener("load",(function(){setTimeout((function(){v=!0}),0)})),function(e){if(v){var t=this;if(e.state){var n=e.state.path;t.replace(n,e.state)}else if(T){var r=t._window.location;t.show(r.pathname+r.search+r.hash,void 0,void 0,!1)}}}):function(){}),N.prototype._which=function(e){return null==(e=e||k&&this._window.event).which?e.button:e.which},N.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&T)return new URL(e,t.location.toString());if(w){var n=t.document.createElement("a");return n.href=e,n}},N.prototype.sameOrigin=function(e){if(!e||!T)return!1;var t=this._toURL(e),n=this._window.location;return n.protocol===t.protocol&&n.hostname===t.hostname&&(n.port===t.port||""===n.port&&(80==t.port||443==t.port))},N.prototype._samePath=function(e){if(!T)return!1;var t=this._window.location;return e.pathname===t.pathname&&e.search===t.search},N.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},M.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,E&&t.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},M.prototype.save=function(){var e=this.page;E&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},_.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,r);r()}},_.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),o=~r?e.slice(0,r):e,i=this.regexp.exec(decodeURIComponent(o));if(!i)return!1;delete t[0];for(var s=1,a=i.length;s<a;++s){var c=n[s-1],l=this.page._decodeURLEncodedURIComponent(i[s]);void 0===l&&hasOwnProperty.call(t,c.name)||(t[c.name]=l)}return!0};var L=$(),I=L,j=L;return I.default=j,I}()}));function r(){}const o=e=>e;function i(e){return e()}function s(){return Object.create(null)}function a(e){e.forEach(i)}function c(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}const h="undefined"!=typeof window;let f=h?()=>window.performance.now():()=>Date.now(),d=h?e=>requestAnimationFrame(e):r;const p=new Set;function m(e){p.forEach((t=>{t.c(e)||(p.delete(t),t.f())})),0!==p.size&&d(m)}function g(e,t){e.appendChild(t)}function y(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function b(e){const t=E("style");return function(e,t){g(e.head||e,t),t.sheet}(y(e),t),t.sheet}function v(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function k(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function x(){return S(" ")}function T(){return S("")}function N(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function O(e){return""===e?null:+e}function C(e,t){t=""+t,e.data!==t&&(e.data=t)}function A(e,t){e.value=null==t?"":t}function M(e,t,n){e.classList[n?"add":"remove"](t)}const _=new Map;let L,I=0;function j(e,t,n,r,o,i,s,a=0){const c=16.666/r;let l="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*i(e);l+=100*e+`%{${s(r,1-r)}}\n`}const u=l+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=y(e),{stylesheet:d,rules:p}=_.get(f)||function(e,t){const n={stylesheet:b(t),rules:{}};return _.set(e,n),n}(f,e);p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${r}ms linear ${o}ms 1 both`,I+=1,h}function D(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),I-=o,I||d((()=>{I||(_.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&w(t)})),_.clear())})))}function P(e){L=e}function U(){if(!L)throw new Error("Function called outside component initialization");return L}const B=[],q=[];let F=[];const R=[],H=Promise.resolve();let Y=!1;function K(){Y||(Y=!0,H.then(G))}function W(e){F.push(e)}const J=new Set;let z,V=0;function G(){if(0!==V)return;const e=L;do{try{for(;V<B.length;){const e=B[V];V++,P(e),X(e.$$)}}catch(e){throw B.length=0,V=0,e}for(P(null),B.length=0,V=0;q.length;)q.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];J.has(t)||(J.add(t),t())}F.length=0}while(B.length);for(;R.length;)R.pop()();Y=!1,J.clear(),P(e)}function X(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}function Q(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,r,t),o}(`${t?"intro":"outro"}${n}`))}const Z=new Set;let ee;function te(){ee={r:0,c:[],p:ee}}function ne(){ee.r||a(ee.c),ee=ee.p}function re(e,t){e&&e.i&&(Z.delete(e),e.i(t))}function oe(e,t,n,r){if(e&&e.o){if(Z.has(e))return;Z.add(e),ee.c.push((()=>{Z.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const ie={duration:0};function se(e,t,n,i){const s={direction:"both"};let l=t(e,n,s),u=i?0:1,h=null,g=null,y=null;function b(){y&&D(e,y)}function v(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function w(t){const{delay:n=0,duration:i=300,easing:s=o,tick:c=r,css:w}=l||ie,k={start:f()+n,b:t};t||(k.group=ee,ee.r+=1),h||g?g=k:(w&&(b(),y=j(e,u,t,i,n,s,w)),t&&c(0,1),h=v(k,i),W((()=>Q(e,t,"start"))),function(e){let t;0===p.size&&d(m),new Promise((n=>{p.add(t={c:e,f:n})}))}((t=>{if(g&&t>g.start&&(h=v(g,i),g=null,Q(e,h.b,"start"),w&&(b(),y=j(e,u,h.b,h.duration,0,s,l.css))),h)if(t>=h.end)c(u=h.b,1-u),Q(e,h.b,"end"),g||(h.b?b():--h.group.r||a(h.group.c)),h=null;else if(t>=h.start){const e=t-h.start;u=h.a+h.d*s(e/h.duration),c(u,1-u)}return!(!h&&!g)})))}return{run(e){c(l)?(z||(z=Promise.resolve(),z.then((()=>{z=null}))),z).then((()=>{l=l(s),w(e)})):w(e)},end(){b(),h=g=null}}}function ae(e,t){const n=t.token={};function r(e,r,o,i){if(t.token!==n)return;t.resolved=i;let s=t.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=e&&(t.current=e)(s);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(te(),oe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),ne())})):t.block.d(1),a.c(),re(a,1),a.m(t.mount(),t.anchor),c=!0),t.block=a,t.blocks&&(t.blocks[r]=a),c&&G()}if(!(o=e)||"object"!=typeof o&&"function"!=typeof o||"function"!=typeof o.then){if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}else{const n=U();if(e.then((e=>{P(n),r(t.then,1,t.value,e),P(null)}),(e=>{if(P(n),r(t.catch,2,t.error,e),P(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}var o}function ce(e,t,n){const r=t.slice(),{resolved:o}=e;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}function le(e){e&&e.c()}function ue(e,t,n,r){const{fragment:o,after_update:s}=e.$$;o&&o.m(t,n),r||W((()=>{const t=e.$$.on_mount.map(i).filter(c);e.$$.on_destroy?e.$$.on_destroy.push(...t):a(t),e.$$.on_mount=[]})),s.forEach(W)}function he(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];F.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),F=t}(n.after_update),a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function fe(e,t,n,o,i,c,l,u=[-1]){const h=L;P(e);const f=e.$$={fragment:null,ctx:[],props:c,update:r,not_equal:i,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:t.target||h.$$.root};l&&l(f.root);let d=!1;if(f.ctx=n?n(e,t.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),d&&function(e,t){-1===e.$$.dirty[0]&&(B.push(e),K(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],f.update(),d=!0,a(f.before_update),f.fragment=!!o&&o(f.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);f.fragment&&f.fragment.l(e),e.forEach(w)}else f.fragment&&f.fragment.c();t.intro&&re(e.$$.fragment),ue(e,t.target,t.anchor,t.customElement),G()}P(h)}class de{$destroy(){he(this,1),this.$destroy=r}$on(e,t){if(!c(t))return r;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function pe(e){let t,n,o,i;return{c(){t=E("p"),n=S("Si tu es de l'Échappée Belle, "),o=E("a"),i=S("connecte-toi via github"),$(o,"href",e[2])},m(e,r){v(e,t,r),g(t,n),g(t,o),g(o,i)},p:r,d(e){e&&w(t)}}}function me(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!0,pending:be,then:ye,catch:ge,value:7,error:8};return ae(n=e[0],r),{c(){t=T(),r.block.c()},m(e,n){v(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t},p(t,o){e=t,r.ctx=e,1&o&&n!==(n=e[0])&&ae(n,r)||ce(r,e,o)},d(e){e&&w(t),r.block.d(e),r.token=null,r=null}}}function ge(e){let t,n,r=e[8]+"";return{c(){t=S("Problème de connexion à Github ! "),n=S(r)},m(e,r){v(e,t,r),v(e,n,r)},p(e,t){1&t&&r!==(r=e[8]+"")&&C(n,r)},d(e){e&&w(t),e&&w(n)}}}function ye(e){let t,n,r,o,i,s,a=e[7]+"";return{c(){t=S("connecté.e en tant que "),n=S(a),r=x(),o=E("button"),o.textContent="Se déconnecter"},m(a,l){v(a,t,l),v(a,n,l),v(a,r,l),v(a,o,l),i||(s=N(o,"click",(function(){c(e[1])&&e[1].apply(this,arguments)})),i=!0)},p(t,r){e=t,1&r&&a!==(a=e[7]+"")&&C(n,a)},d(e){e&&w(t),e&&w(n),e&&w(r),e&&w(o),i=!1,s()}}}function be(e){let t;return{c(){t=S("... recherche du nom d'utilisateur.rice Github ...")},m(e,n){v(e,t,n)},p:r,d(e){e&&w(t)}}}function ve(e){let t,n,o,i;function s(e,t){return e[0]?me:pe}let a=s(e),c=a(e);return{c(){t=E("header"),n=E("h1"),n.textContent="🏴‍☠️ Compt'anar 🤓 🔢",o=x(),i=E("div"),c.c(),$(t,"class","svelte-xp3vgv")},m(e,r){v(e,t,r),g(t,n),g(t,o),g(t,i),c.m(i,null)},p(e,[t]){a===(a=s(e))&&c?c.p(e,t):(c.d(1),c=a(e),c&&(c.c(),c.m(i,null)))},i:r,o:r,d(e){e&&w(t),c.d()}}}function we(e,t,n){let{login:r}=t,{logout:o}=t;const i=`https://github.com/login/oauth/authorize?client_id=fe09b09c65edef4ec9cc&scope=${["public_repo","read:org"].join(",")}&redirect_uri=${`https://ttt.olibri.us/github-callback?destination=${`${location.origin}/`}`}`;return e.$$set=e=>{"login"in e&&n(0,r=e.login),"logout"in e&&n(1,o=e.logout)},[r,o,i]}class ke extends de{constructor(e){super(),fe(this,e,we,ve,l,{login:0,logout:1})}}function Ee(e){let t;return{c(){t=E("footer"),t.innerHTML='<a href="https://github.com/comptanar/comptanar.github.io">Code source sur github</a>'},m(e,n){v(e,t,n)},p:r,i:r,o:r,d(e){e&&w(t)}}}class Se extends de{constructor(e){super(),fe(this,e,null,Ee,l,{})}}function xe(e){let t,n,r,o,i,s;t=new ke({props:{login:e[0],logout:e[1]}});const a=e[4].default,c=function(e,t,n,r){if(e){const o=u(e,t,n,r);return e[0](o)}}(a,e,e[3],null);return i=new Se({}),{c(){le(t.$$.fragment),n=x(),r=E("main"),c&&c.c(),o=x(),le(i.$$.fragment),M(r,"fullwidth",e[2])},m(e,a){ue(t,e,a),v(e,n,a),v(e,r,a),c&&c.m(r,null),v(e,o,a),ue(i,e,a),s=!0},p(e,[n]){const o={};1&n&&(o.login=e[0]),2&n&&(o.logout=e[1]),t.$set(o),c&&c.p&&(!s||8&n)&&function(e,t,n,r,o,i){if(o){const s=u(t,n,r,i);e.p(s,o)}}(c,a,e,e[3],s?function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(a,e[3],n,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[3]),null),(!s||4&n)&&M(r,"fullwidth",e[2])},i(e){s||(re(t.$$.fragment,e),re(c,e),re(i.$$.fragment,e),s=!0)},o(e){oe(t.$$.fragment,e),oe(c,e),oe(i.$$.fragment,e),s=!1},d(e){he(t,e),e&&w(n),e&&w(r),c&&c.d(e),e&&w(o),he(i,e)}}}function Te(e,t,n){let{$$slots:r={},$$scope:o}=t,{login:i}=t,{logout:s}=t,{fullwidth:a=!1}=t;return e.$$set=e=>{"login"in e&&n(0,i=e.login),"logout"in e&&n(1,s=e.logout),"fullwidth"in e&&n(2,a=e.fullwidth),"$$scope"in e&&n(3,o=e.$$scope)},[i,s,a,o,r]}class Ne extends de{constructor(e){super(),fe(this,e,Te,xe,l,{login:0,logout:1,fullwidth:2})}}function $e(e){let t,n,o;return{c(){t=E("p"),t.textContent="Bienvenue ! Comptanar, c'est pour faire sa comptabilité en toute autonomie !",n=x(),o=E("p"),o.innerHTML="Pour le moment comptanar est en alpha ultra-privée, ultra-select, \n            pour [l&#39;Échappée Belle](https://lechappeebelle.team/) seulement\n            <small>on créé un outil pour nous, mais on fait tout pour que ça soit utile pour d&#39;autres un jour :-)</small>"},m(e,r){v(e,t,r),v(e,n,r),v(e,o,r)},p:r,d(e){e&&w(t),e&&w(n),e&&w(o)}}}function Oe(e){let t,n;return t=new Ne({props:{login:e[0],logout:e[1],$$slots:{default:[$e]},$$scope:{ctx:e}}}),{c(){le(t.$$.fragment)},m(e,r){ue(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.login=e[0]),2&n&&(r.logout=e[1]),4&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(re(t.$$.fragment,e),n=!0)},o(e){oe(t.$$.fragment,e),n=!1},d(e){he(t,e)}}}function Ce(e,t,n){let{login:r}=t,{logout:o}=t;return e.$$set=e=>{"login"in e&&n(0,r=e.login),"logout"in e&&n(1,o=e.logout)},[r,o]}class Ae extends de{constructor(e){super(),fe(this,e,Ce,Oe,l,{login:0,logout:1})}}function Me(e,{delay:t=0,duration:n=400,easing:r=o}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:e=>"opacity: "+e*i}}
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function _e(e){return"[object Object]"===Object.prototype.toString.call(e)}function Le(e){var t,n;return!1!==_e(e)&&(void 0===(t=e.constructor)||!1!==_e(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}function Ie(){return"object"==typeof navigator&&"userAgent"in navigator?navigator.userAgent:"object"==typeof process&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function je(e,t){const n=Object.assign({},e);return Object.keys(t).forEach((r=>{Le(t[r])?r in e?n[r]=je(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}function De(e){for(const t in e)void 0===e[t]&&delete e[t];return e}function Pe(e,t,n){if("string"==typeof t){let[e,r]=t.split(" ");n=Object.assign(r?{method:e,url:r}:{url:e},n)}else n=Object.assign({},t);var r;n.headers=(r=n.headers)?Object.keys(r).reduce(((e,t)=>(e[t.toLowerCase()]=r[t],e)),{}):{},De(n),De(n.headers);const o=je(e||{},n);return e&&e.mediaType.previews.length&&(o.mediaType.previews=e.mediaType.previews.filter((e=>!o.mediaType.previews.includes(e))).concat(o.mediaType.previews)),o.mediaType.previews=o.mediaType.previews.map((e=>e.replace(/-preview/,""))),o}const Ue=/\{[^}]+\}/g;function Be(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function qe(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{})}function Fe(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map((function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e})).join("")}function Re(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function He(e,t,n){return t="+"===e||"#"===e?Fe(t):Re(t),n?Re(n)+"="+t:t}function Ye(e){return null!=e}function Ke(e){return";"===e||"&"===e||"?"===e}function We(e,t){var n=["+","#",".","/",";","?","&"];return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(function(e,r,o){if(r){let e="";const o=[];if(-1!==n.indexOf(r.charAt(0))&&(e=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach((function(n){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(n);o.push(function(e,t,n,r){var o=e[n],i=[];if(Ye(o)&&""!==o)if("string"==typeof o||"number"==typeof o||"boolean"==typeof o)o=o.toString(),r&&"*"!==r&&(o=o.substring(0,parseInt(r,10))),i.push(He(t,o,Ke(t)?n:""));else if("*"===r)Array.isArray(o)?o.filter(Ye).forEach((function(e){i.push(He(t,e,Ke(t)?n:""))})):Object.keys(o).forEach((function(e){Ye(o[e])&&i.push(He(t,o[e],e))}));else{const e=[];Array.isArray(o)?o.filter(Ye).forEach((function(n){e.push(He(t,n))})):Object.keys(o).forEach((function(n){Ye(o[n])&&(e.push(Re(n)),e.push(He(t,o[n].toString())))})),Ke(t)?i.push(Re(n)+"="+e.join(",")):0!==e.length&&i.push(e.join(","))}else";"===t?Ye(o)&&i.push(Re(n)):""!==o||"&"!==t&&"?"!==t?""===o&&i.push(""):i.push(Re(n)+"=");return i}(t,e,r[1],r[2]||r[3]))})),e&&"+"!==e){var i=",";return"?"===e?i="&":"#"!==e&&(i=e),(0!==o.length?e:"")+o.join(i)}return o.join(",")}return Fe(o)}))}function Je(e){let t,n=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),o=Object.assign({},e.headers),i=qe(e,["method","baseUrl","url","headers","request","mediaType"]);const s=function(e){const t=e.match(Ue);return t?t.map(Be).reduce(((e,t)=>e.concat(t)),[]):[]}(r);var a;r=(a=r,{expand:We.bind(null,a)}).expand(i),/^http/.test(r)||(r=e.baseUrl+r);const c=qe(i,Object.keys(e).filter((e=>s.includes(e))).concat("baseUrl"));if(!/application\/octet-stream/i.test(o.accept)&&(e.mediaType.format&&(o.accept=o.accept.split(/,/).map((t=>t.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`))).join(",")),e.mediaType.previews.length)){const t=o.accept.match(/[\w-]+(?=-preview)/g)||[];o.accept=t.concat(e.mediaType.previews).map((t=>`application/vnd.github.${t}-preview${e.mediaType.format?`.${e.mediaType.format}`:"+json"}`)).join(",")}return["GET","HEAD"].includes(n)?r=function(e,t){const n=/\?/.test(e)?"&":"?",r=Object.keys(t);return 0===r.length?e:e+n+r.map((e=>"q"===e?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${e}=${encodeURIComponent(t[e])}`)).join("&")}(r,c):"data"in c?t=c.data:Object.keys(c).length&&(t=c),o["content-type"]||void 0===t||(o["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(n)&&void 0===t&&(t=""),Object.assign({method:n,url:r,headers:o},void 0!==t?{body:t}:null,e.request?{request:e.request}:null)}function ze(e,t,n){return Je(Pe(e,t,n))}const Ve=function e(t,n){const r=Pe(t,n),o=ze.bind(null,r);return Object.assign(o,{DEFAULTS:r,defaults:e.bind(null,r),merge:Pe.bind(null,r),parse:Je})}(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":`octokit-endpoint.js/7.0.5 ${Ie()}`},mediaType:{format:"",previews:[]}});var Ge=t((function(t,n){var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();t.exports=n=r.fetch,r.fetch&&(n.default=r.fetch.bind(r)),n.Headers=r.Headers,n.Request=r.Request,n.Response=r.Response}));Ge.Headers,Ge.Request,Ge.Response;class Xe extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Qe=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),o=e[e.length-1];return"function"==typeof r&&r!==o&&Object.keys(o).forEach((function(e){r[e]=o[e]})),r}};var Ze=Qe(tt),et=Qe(nt);function tt(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function nt(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}tt.proto=tt((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return tt(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return nt(this)},configurable:!0})})),Ze.strict=et;const rt=Ze((e=>console.warn(e))),ot=Ze((e=>console.warn(e)));class it extends Error{constructor(e,t,n){let r;super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=t,"headers"in n&&void 0!==n.headers&&(r=n.headers),"response"in n&&(this.response=n.response,r=n.response.headers);const o=Object.assign({},n.request);n.request.headers.authorization&&(o.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),o.url=o.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=o,Object.defineProperty(this,"code",{get:()=>(rt(new Xe("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),t)}),Object.defineProperty(this,"headers",{get:()=>(ot(new Xe("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),r||{})})}}function st(e){const t=e.request&&e.request.log?e.request.log:console;(Le(e.body)||Array.isArray(e.body))&&(e.body=JSON.stringify(e.body));let n,r,o={};return(e.request&&e.request.fetch||globalThis.fetch||Ge)(e.url,Object.assign({method:e.method,body:e.body,headers:e.headers,redirect:e.redirect},e.request)).then((async i=>{r=i.url,n=i.status;for(const e of i.headers)o[e[0]]=e[1];if("deprecation"in o){const n=o.link&&o.link.match(/<([^>]+)>; rel="deprecation"/),r=n&&n.pop();t.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${o.sunset}${r?`. See ${r}`:""}`)}if(204!==n&&205!==n){if("HEAD"===e.method){if(n<400)return;throw new it(i.statusText,n,{response:{url:r,status:n,headers:o,data:void 0},request:e})}if(304===n)throw new it("Not modified",n,{response:{url:r,status:n,headers:o,data:await at(i)},request:e});if(n>=400){const t=await at(i),s=new it(function(e){if("string"==typeof e)return e;if("message"in e)return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(JSON.stringify).join(", ")}`:e.message;return`Unknown error: ${JSON.stringify(e)}`}(t),n,{response:{url:r,status:n,headers:o,data:t},request:e});throw s}return at(i)}})).then((e=>({status:n,url:r,headers:o,data:e}))).catch((t=>{if(t instanceof it)throw t;if("AbortError"===t.name)throw t;throw new it(t.message,500,{request:e})}))}async function at(e){const t=e.headers.get("content-type");return/application\/json/.test(t)?e.json():!t||/^text\/|charset=utf-8$/.test(t)?e.text():function(e){return e.arrayBuffer()}(e)}const ct=function e(t,n){const r=t.defaults(n);return Object.assign((function(t,n){const o=r.merge(t,n);if(!o.request||!o.request.hook)return st(r.parse(o));const i=(e,t)=>st(r.parse(r.merge(e,t)));return Object.assign(i,{endpoint:r,defaults:e.bind(null,r)}),o.request.hook(i,o)}),{endpoint:r,defaults:e.bind(null,r)})}(Ve,{headers:{"user-agent":`octokit-request.js/6.2.3 ${Ie()}`}}),lt=Symbol.for("yaml.alias"),ut=Symbol.for("yaml.document"),ht=Symbol.for("yaml.map"),ft=Symbol.for("yaml.pair"),dt=Symbol.for("yaml.scalar"),pt=Symbol.for("yaml.seq"),mt=Symbol.for("yaml.node.type"),gt=e=>!!e&&"object"==typeof e&&e[mt]===lt,yt=e=>!!e&&"object"==typeof e&&e[mt]===ut,bt=e=>!!e&&"object"==typeof e&&e[mt]===ht,vt=e=>!!e&&"object"==typeof e&&e[mt]===ft,wt=e=>!!e&&"object"==typeof e&&e[mt]===dt,kt=e=>!!e&&"object"==typeof e&&e[mt]===pt;function Et(e){if(e&&"object"==typeof e)switch(e[mt]){case ht:case pt:return!0}return!1}function St(e){if(e&&"object"==typeof e)switch(e[mt]){case lt:case ht:case dt:case pt:return!0}return!1}class xt{constructor(e){Object.defineProperty(this,mt,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}}const Tt=Symbol("break visit"),Nt=Symbol("skip children"),$t=Symbol("remove node");function Ot(e,t){const n=function(e){if("object"==typeof e&&(e.Collection||e.Node||e.Value))return Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e);return e}(t);if(yt(e)){Ct(null,e.contents,n,Object.freeze([e]))===$t&&(e.contents=null)}else Ct(null,e,n,Object.freeze([]))}function Ct(e,t,n,r){const o=function(e,t,n,r){return"function"==typeof n?n(e,t,r):bt(t)?n.Map?.(e,t,r):kt(t)?n.Seq?.(e,t,r):vt(t)?n.Pair?.(e,t,r):wt(t)?n.Scalar?.(e,t,r):gt(t)?n.Alias?.(e,t,r):void 0}(e,t,n,r);if(St(o)||vt(o))return function(e,t,n){const r=t[t.length-1];if(Et(r))r.items[e]=n;else if(vt(r))"key"===e?r.key=n:r.value=n;else{if(!yt(r)){const e=gt(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}r.contents=n}}(e,r,o),Ct(e,o,n,r);if("symbol"!=typeof o)if(Et(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const o=Ct(e,t.items[e],n,r);if("number"==typeof o)e=o-1;else{if(o===Tt)return Tt;o===$t&&(t.items.splice(e,1),e-=1)}}}else if(vt(t)){r=Object.freeze(r.concat(t));const e=Ct("key",t.key,n,r);if(e===Tt)return Tt;e===$t&&(t.key=null);const o=Ct("value",t.value,n,r);if(o===Tt)return Tt;o===$t&&(t.value=null)}return o}Ot.BREAK=Tt,Ot.SKIP=Nt,Ot.REMOVE=$t;const At={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Mt{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Mt.defaultYaml,e),this.tags=Object.assign({},Mt.defaultTags,t)}clone(){const e=new Mt(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Mt(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Mt.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Mt.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:Mt.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Mt.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;return t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/);r||t(`The ${e} tag has no suffix`);const o=this.tags[n];return o?o+decodeURIComponent(r):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>At[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&St(e.contents)){const t={};Ot(e.contents,((e,n)=>{St(n)&&n.tag&&(t[n.tag]=!0)})),r=Object.keys(t)}else r=[];for(const[o,i]of n)"!!"===o&&"tag:yaml.org,2002:"===i||e&&!r.some((e=>e.startsWith(i)))||t.push(`%TAG ${o} ${i}`);return t.join("\n")}}function _t(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function Lt(e){const t=new Set;return Ot(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function It(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}Mt.defaultYaml={explicit:!1,version:"1.2"},Mt.defaultTags={"!!":"tag:yaml.org,2002:"};class jt extends xt{constructor(e){super(lt),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return Ot(e,{Node:(e,n)=>{if(n===this)return Ot.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:o}=t,i=this.resolve(r);if(!i){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}const s=n.get(i);if(!s||void 0===s.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(o>=0&&(s.count+=1,0===s.aliasCount&&(s.aliasCount=Dt(r,i,n)),s.count*s.aliasCount>o)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return s.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(_t(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function Dt(e,t,n){if(gt(t)){const r=t.resolve(e),o=n&&r&&n.get(r);return o?o.count*o.aliasCount:0}if(Et(t)){let r=0;for(const o of t.items){const t=Dt(e,o,n);t>r&&(r=t)}return r}if(vt(t)){const r=Dt(e,t.key,n),o=Dt(e,t.value,n);return Math.max(r,o)}return 1}function Pt(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>Pt(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||(!wt(r=e)&&!Et(r)||!r.anchor))return e.toJSON(t,n);const o={aliasCount:0,count:1,res:void 0};n.anchors.set(e,o),n.onCreate=e=>{o.res=e,delete n.onCreate};const i=e.toJSON(t,n);return n.onCreate&&n.onCreate(i),i}var r;return"bigint"!=typeof e||n?.keep?e:Number(e)}const Ut=e=>!e||"function"!=typeof e&&"object"!=typeof e;class Bt extends xt{constructor(e){super(dt),this.value=e}toJSON(e,t){return t?.keep?this.value:Pt(this.value,e,t)}toString(){return String(this.value)}}Bt.BLOCK_FOLDED="BLOCK_FOLDED",Bt.BLOCK_LITERAL="BLOCK_LITERAL",Bt.PLAIN="PLAIN",Bt.QUOTE_DOUBLE="QUOTE_DOUBLE",Bt.QUOTE_SINGLE="QUOTE_SINGLE";function qt(e,t,n){if(yt(e)&&(e=e.contents),St(e))return e;if(vt(e)){const t=n.schema[ht].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:o,onTagObj:i,schema:s,sourceObjects:a}=n;let c;if(r&&e&&"object"==typeof e){if(c=a.get(e),c)return c.anchor||(c.anchor=o(e)),new jt(c.anchor);c={anchor:null,node:null},a.set(e,c)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let l=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),r=e.find((e=>!e.format))??e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find((t=>t.identify?.(e)&&!t.format))}(e,t,s.tags);if(!l){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new Bt(e);return c&&(c.node=t),t}l=e instanceof Map?s[ht]:Symbol.iterator in Object(e)?s[pt]:s[ht]}i&&(i(l),delete n.onTagObj);const u=l?.createNode?l.createNode(n.schema,e,n):new Bt(e);return t&&(u.tag=t),c&&(c.node=u),u}function Ft(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=r,r=e}else r=new Map([[n,r]])}return qt(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const Rt=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class Ht extends xt{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map((t=>St(t)||vt(t)?t.clone(e):t)),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Rt(e))this.add(t);else{const[n,...r]=e,o=this.get(n,!0);if(Et(o))o.addIn(r,t);else{if(void 0!==o||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Ft(this.schema,r,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const r=this.get(t,!0);if(Et(r))return r.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...r]=e,o=this.get(n,!0);return 0===r.length?!t&&wt(o)?o.value:o:Et(o)?o.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!vt(t))return!1;const n=t.value;return null==n||e&&wt(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const r=this.get(t,!0);return!!Et(r)&&r.hasIn(n)}setIn(e,t){const[n,...r]=e;if(0===r.length)this.set(n,t);else{const e=this.get(n,!0);if(Et(e))e.setIn(r,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Ft(this.schema,r,t))}}}}Ht.maxFlowStringSingleLineLength=60;const Yt=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Kt(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const Wt=(e,t,n)=>e.endsWith("\n")?Kt(n,t):n.includes("\n")?"\n"+Kt(n,t):(e.endsWith(" ")?"":" ")+n;function Jt(e,t,n="flow",{indentAtStart:r,lineWidth:o=80,minContentWidth:i=20,onFold:s,onOverflow:a}={}){if(!o||o<0)return e;const c=Math.max(1+i,1+o-t.length);if(e.length<=c)return e;const l=[],u={};let h,f,d=o-t.length;"number"==typeof r&&(r>o-Math.max(2,i)?l.push(0):d=o-r);let p,m=!1,g=-1,y=-1,b=-1;for("block"===n&&(g=zt(e,g),-1!==g&&(d=g+c));p=e[g+=1];){if("quoted"===n&&"\\"===p){switch(y=g,e[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}b=g}if("\n"===p)"block"===n&&(g=zt(e,g)),d=g+c,h=void 0;else{if(" "===p&&f&&" "!==f&&"\n"!==f&&"\t"!==f){const t=e[g+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(h=g)}if(g>=d)if(h)l.push(h),d=h+c,h=void 0;else if("quoted"===n){for(;" "===f||"\t"===f;)f=p,p=e[g+=1],m=!0;const t=g>b+1?g-2:y-1;if(u[t])return e;l.push(t),u[t]=!0,d=t+c,h=void 0}else m=!0}f=p}if(m&&a&&a(),0===l.length)return e;s&&s();let v=e.slice(0,l[0]);for(let r=0;r<l.length;++r){const o=l[r],i=l[r+1]||e.length;0===o?v=`\n${t}${e.slice(0,i)}`:("quoted"===n&&u[o]&&(v+=`${e[o]}\\`),v+=`\n${t}${e.slice(o+1,i)}`)}return v}function zt(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const Vt=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),Gt=e=>/^(%|---|\.\.\.)/m.test(e);function Xt(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,o=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(Gt(e)?"  ":"");let s="",a=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(s+=n.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{s+=n.slice(a,e);const t=n.substr(e+2,4);switch(t){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:"00"===t.substr(0,2)?s+="\\x"+t.substr(2):s+=n.substr(e,6)}e+=5,a=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<o)e+=1;else{for(s+=n.slice(a,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)s+="\n",e+=2;s+=i," "===n[e+2]&&(s+="\\"),e+=1,a=e+1}break;default:e+=1}return s=a?s+n.slice(a):n,r?s:Jt(s,i,"quoted",Vt(t,!1))}function Qt(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return Xt(e,t);const n=t.indent||(Gt(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:Jt(r,n,"flow",Vt(t,!1))}function Zt(e,t){const{singleQuote:n}=t.options;let r;if(!1===n)r=Xt;else{const t=e.includes('"'),o=e.includes("'");r=t&&!o?Qt:o&&!t?Xt:n?Qt:Xt}return r(e,t)}function en({comment:e,type:t,value:n},r,o,i){const{blockQuote:s,commentString:a,lineWidth:c}=r.options;if(!s||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Zt(n,r);const l=r.indent||(r.forceBlockIndent||Gt(n)?"  ":""),u="literal"===s||"folded"!==s&&t!==Bt.BLOCK_FOLDED&&(t===Bt.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,o=e.length;if(o<=r)return!1;for(let t=0,n=0;t<o;++t)if("\n"===e[t]){if(t-n>r)return!0;if(n=t+1,o-n<=r)return!1}return!0}(n,c,l.length));if(!n)return u?"|\n":">\n";let h,f;for(f=n.length;f>0;--f){const e=n[f-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let d=n.substring(f);const p=d.indexOf("\n");-1===p?h="-":n===d||p!==d.length-1?(h="+",i&&i()):h="",d&&(n=n.slice(0,-d.length),"\n"===d[d.length-1]&&(d=d.slice(0,-1)),d=d.replace(/\n+(?!\n|$)/g,`$&${l}`));let m,g=!1,y=-1;for(m=0;m<n.length;++m){const e=n[m];if(" "===e)g=!0;else{if("\n"!==e)break;y=m}}let b=n.substring(0,y<m?y+1:m);b&&(n=n.substring(b.length),b=b.replace(/\n+/g,`$&${l}`));let v=(u?"|":">")+(g?l?"2":"1":"")+h;if(e&&(v+=" "+a(e.replace(/ ?[\r\n]+/g," ")),o&&o()),u)return`${v}\n${l}${b}${n=n.replace(/\n+/g,`$&${l}`)}${d}`;return`${v}\n${l}${Jt(`${b}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`)}${d}`,l,"block",Vt(r,!0))}`}function tn(e,t,n,r){const{implicitKey:o,inFlow:i}=t,s="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==Bt.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=Bt.QUOTE_DOUBLE);const c=e=>{switch(e){case Bt.BLOCK_FOLDED:case Bt.BLOCK_LITERAL:return o||i?Zt(s.value,t):en(s,t,n,r);case Bt.QUOTE_DOUBLE:return Xt(s.value,t);case Bt.QUOTE_SINGLE:return Qt(s.value,t);case Bt.PLAIN:return function(e,t,n,r){const{type:o,value:i}=e,{actualString:s,implicitKey:a,indent:c,indentStep:l,inFlow:u}=t;if(a&&/[\n[\]{},]/.test(i)||u&&/[[\]{},]/.test(i))return Zt(i,t);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes("\n")?Zt(i,t):en(e,t,n,r);if(!a&&!u&&o!==Bt.PLAIN&&i.includes("\n"))return en(e,t,n,r);if(Gt(i)){if(""===c)return t.forceBlockIndent=!0,en(e,t,n,r);if(a&&c===l)return Zt(i,t)}const h=i.replace(/\n+/g,`$&\n${c}`);if(s){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(h),{compat:n,tags:r}=t.doc.schema;if(r.some(e)||n?.some(e))return Zt(i,t)}return a?h:Jt(h,c,"flow",Vt(t,!1))}(s,t,n,r);default:return null}};let l=c(a);if(null===l){const{defaultKeyType:e,defaultStringType:n}=t.options,r=o&&e||n;if(l=c(r),null===l)throw new Error(`Unsupported default string type ${r}`)}return l}function nn(e,t){const n=Object.assign({blockQuote:!0,commentString:Yt,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function rn(e,t,n,r){if(vt(e))return e.toString(t,n,r);if(gt(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let o;const i=St(e)?e:t.doc.createNode(e,{onTagObj:e=>o=e});o||(o=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))??n[0]}let n,r;if(wt(t)){r=t.value;const o=e.filter((e=>e.identify?.(r)));n=o.find((e=>e.format===t.format))??o.find((e=>!e.format))}else r=t,n=e.find((e=>e.nodeClass&&r instanceof e.nodeClass));if(!n)throw new Error(`Tag not resolved for ${r?.constructor?.name??typeof r} value`);return n}(t.doc.schema.tags,i));const s=function(e,t,{anchors:n,doc:r}){if(!r.directives)return"";const o=[],i=(wt(e)||Et(e))&&e.anchor;i&&_t(i)&&(n.add(i),o.push(`&${i}`));const s=e.tag?e.tag:t.default?null:t.tag;return s&&o.push(r.directives.tagString(s)),o.join(" ")}(i,o,t);s.length>0&&(t.indentAtStart=(t.indentAtStart??0)+s.length+1);const a="function"==typeof o.stringify?o.stringify(i,t,n,r):wt(i)?tn(i,t,n,r):i.toString(t,n,r);return s?wt(i)||"{"===a[0]||"["===a[0]?`${s} ${a}`:`${s}\n${t.indent}${a}`:a}function on(e,t){"debug"!==e&&"warn"!==e||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(t):console.warn(t))}function sn(e,t,{key:n,value:r}){if(e?.doc.schema.merge&&an(n))if(r=gt(r)?r.resolve(e.doc):r,kt(r))for(const n of r.items)cn(e,t,n);else if(Array.isArray(r))for(const n of r)cn(e,t,n);else cn(e,t,r);else{const o=Pt(n,"",e);if(t instanceof Map)t.set(o,Pt(r,o,e));else if(t instanceof Set)t.add(o);else{const i=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(St(e)&&n&&n.doc){const t=nn(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const r=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(r);e.length>40&&(e=e.substring(0,36)+'..."'),on(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}(n,o,e),s=Pt(r,i,e);i in t?Object.defineProperty(t,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):t[i]=s}}return t}const an=e=>"<<"===e||wt(e)&&"<<"===e.value&&(!e.type||e.type===Bt.PLAIN);function cn(e,t,n){const r=e&&gt(n)?n.resolve(e.doc):n;if(!bt(r))throw new Error("Merge sources must be maps or map aliases");const o=r.toJSON(null,e,Map);for(const[e,n]of o)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function ln(e,t,n){const r=qt(e,void 0,n),o=qt(t,void 0,n);return new un(r,o)}class un{constructor(e,t=null){Object.defineProperty(this,mt,{value:ft}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return St(t)&&(t=t.clone(e)),St(n)&&(n=n.clone(e)),new un(t,n)}toJSON(e,t){return sn(t,t?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,r,o){const{allNullValues:i,doc:s,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:h}}=n;let f=St(e)&&e.comment||null;if(h){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(Et(e))throw new Error("With simple keys, collection cannot be used as a key value")}let d=!h&&(!e||f&&null==t&&!n.inFlow||Et(e)||(wt(e)?e.type===Bt.BLOCK_FOLDED||e.type===Bt.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!d&&(h||!i),indent:a+c});let p,m,g,y=!1,b=!1,v=rn(e,n,(()=>y=!0),(()=>b=!0));if(!d&&!n.inFlow&&v.length>1024){if(h)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(n.inFlow){if(i||null==t)return y&&r&&r(),""===v?"?":d?`? ${v}`:v}else if(i&&!h||null==t&&d)return v=`? ${v}`,f&&!y?v+=Wt(v,n.indent,l(f)):b&&o&&o(),v;y&&(f=null),d?(f&&(v+=Wt(v,n.indent,l(f))),v=`? ${v}\n${a}:`):(v=`${v}:`,f&&(v+=Wt(v,n.indent,l(f)))),St(t)?(p=!!t.spaceBefore,m=t.commentBefore,g=t.comment):(p=!1,m=null,g=null,t&&"object"==typeof t&&(t=s.createNode(t))),n.implicitKey=!1,d||f||!wt(t)||(n.indentAtStart=v.length+1),b=!1,u||!(c.length>=2)||n.inFlow||d||!kt(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let w=!1;const k=rn(t,n,(()=>w=!0),(()=>b=!0));let E=" ";if(f||p||m)E=p?"\n":"",m&&(E+=`\n${Kt(l(m),n.indent)}`),""!==k||n.inFlow?E+=`\n${n.indent}`:"\n"===E&&(E="\n\n");else if(!d&&Et(t)){const e=k[0],r=k.indexOf("\n"),o=-1!==r,i=n.inFlow??t.flow??0===t.items.length;if(o||!i){let t=!1;if(o&&("&"===e||"!"===e)){let n=k.indexOf(" ");"&"===e&&-1!==n&&n<r&&"!"===k[n+1]&&(n=k.indexOf(" ",n+1)),(-1===n||r<n)&&(t=!0)}t||(E=`\n${n.indent}`)}}else""!==k&&"\n"!==k[0]||(E="");return v+=E+k,n.inFlow?w&&r&&r():g&&!w?v+=Wt(v,n.indent,l(g)):b&&o&&o(),v}(this,e,t,n):JSON.stringify(this)}}function hn(e,t,n){return(t.inFlow??e.flow?dn:fn)(e,t,n)}function fn({comment:e,items:t},n,{blockItemPrefix:r,flowChars:o,itemIndent:i,onChompKeep:s,onComment:a}){const{indent:c,options:{commentString:l}}=n,u=Object.assign({},n,{indent:i,type:null});let h=!1;const f=[];for(let e=0;e<t.length;++e){const o=t[e];let s=null;if(St(o))!h&&o.spaceBefore&&f.push(""),pn(n,f,o.commentBefore,h),o.comment&&(s=o.comment);else if(vt(o)){const e=St(o.key)?o.key:null;e&&(!h&&e.spaceBefore&&f.push(""),pn(n,f,e.commentBefore,h))}h=!1;let a=rn(o,u,(()=>s=null),(()=>h=!0));s&&(a+=Wt(a,i,l(s))),h&&s&&(h=!1),f.push(r+a)}let d;if(0===f.length)d=o.start+o.end;else{d=f[0];for(let e=1;e<f.length;++e){const t=f[e];d+=t?`\n${c}${t}`:"\n"}}return e?(d+="\n"+Kt(l(e),c),a&&a()):h&&s&&s(),d}function dn({comment:e,items:t},n,{flowChars:r,itemIndent:o,onComment:i}){const{indent:s,indentStep:a,flowCollectionPadding:c,options:{commentString:l}}=n;o+=a;const u=Object.assign({},n,{indent:o,inFlow:!0,type:null});let h=!1,f=0;const d=[];for(let e=0;e<t.length;++e){const r=t[e];let i=null;if(St(r))r.spaceBefore&&d.push(""),pn(n,d,r.commentBefore,!1),r.comment&&(i=r.comment);else if(vt(r)){const e=St(r.key)?r.key:null;e&&(e.spaceBefore&&d.push(""),pn(n,d,e.commentBefore,!1),e.comment&&(h=!0));const t=St(r.value)?r.value:null;t?(t.comment&&(i=t.comment),t.commentBefore&&(h=!0)):null==r.value&&e&&e.comment&&(i=e.comment)}i&&(h=!0);let s=rn(r,u,(()=>i=null));e<t.length-1&&(s+=","),i&&(s+=Wt(s,o,l(i))),!h&&(d.length>f||s.includes("\n"))&&(h=!0),d.push(s),f=d.length}let p;const{start:m,end:g}=r;if(0===d.length)p=m+g;else{if(!h){const e=d.reduce(((e,t)=>e+t.length+2),2);h=e>Ht.maxFlowStringSingleLineLength}if(h){p=m;for(const e of d)p+=e?`\n${a}${s}${e}`:"\n";p+=`\n${s}${g}`}else p=`${m}${c}${d.join(" ")}${c}${g}`}return e&&(p+=Wt(p,s,l(e)),i&&i()),p}function pn({indent:e,options:{commentString:t}},n,r,o){if(r&&o&&(r=r.replace(/^\n+/,"")),r){const o=Kt(t(r),e);n.push(o.trimStart())}}function mn(e,t){const n=wt(t)?t.value:t;for(const r of e)if(vt(r)){if(r.key===t||r.key===n)return r;if(wt(r.key)&&r.key.value===n)return r}}class gn extends Ht{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ht,e),this.items=[]}add(e,t){let n;n=vt(e)?e:e&&"object"==typeof e&&"key"in e?new un(e.key,e.value):new un(e,e?.value);const r=mn(this.items,n.key),o=this.schema?.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);wt(r.value)&&Ut(n.value)?r.value.value=n.value:r.value=n.value}else if(o){const e=this.items.findIndex((e=>o(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=mn(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=mn(this.items,e)?.value;return(!t&&wt(n)?n.value:n)??void 0}has(e){return!!mn(this.items,e)}set(e,t){this.add(new un(e,t),!0)}toJSON(e,t,n){const r=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(r);for(const e of this.items)sn(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!vt(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),hn(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const yn={collection:"map",createNode:function(e,t,n){const{keepUndefined:r,replacer:o}=n,i=new gn(e),s=(e,s)=>{if("function"==typeof o)s=o.call(t,e,s);else if(Array.isArray(o)&&!o.includes(e))return;(void 0!==s||r)&&i.items.push(ln(e,s,n))};if(t instanceof Map)for(const[e,n]of t)s(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))s(e,t[e]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i},default:!0,nodeClass:gn,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(bt(e)||t("Expected a mapping for this tag"),e)};class bn extends Ht{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(pt,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=vn(e);if("number"!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=vn(e);if("number"!=typeof n)return;const r=this.items[n];return!t&&wt(r)?r.value:r}has(e){const t=vn(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=vn(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];wt(r)&&Ut(t)?r.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let r=0;for(const e of this.items)n.push(Pt(e,String(r++),t));return n}toString(e,t,n){return e?hn(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}}function vn(e){let t=wt(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const wn={collection:"seq",createNode:function(e,t,n){const{replacer:r}=n,o=new bn(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let i of t){if("function"==typeof r){const n=t instanceof Set?i:String(e++);i=r.call(t,n,i)}o.items.push(qt(i,void 0,n))}}return o},default:!0,nodeClass:bn,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(kt(e)||t("Expected a sequence for this tag"),e)},kn={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,r)=>tn(e,t=Object.assign({actualString:!0},t),n,r)},En={identify:e=>null==e,createNode:()=>new Bt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Bt(null),stringify:({source:e},t)=>"string"==typeof e&&En.test.test(e)?e:t.options.nullStr},Sn={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Bt("t"===e[0]||"T"===e[0]),stringify({source:e,value:t},n){if(e&&Sn.test.test(e)){if(t===("t"===e[0]||"T"===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}};function xn({format:e,minFractionDigits:t,tag:n,value:r}){if("bigint"==typeof r)return String(r);const o="number"==typeof r?r:Number(r);if(!isFinite(o))return isNaN(o)?".nan":o<0?"-.inf":".inf";let i=JSON.stringify(r);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(i)){let e=i.indexOf(".");e<0&&(e=i.length,i+=".");let n=t-(i.length-e-1);for(;n-- >0;)i+="0"}return i}const Tn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:xn},Nn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():xn(e)}},$n={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Bt(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:xn},On=e=>"bigint"==typeof e||Number.isInteger(e),Cn=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function An(e,t,n){const{value:r}=e;return On(r)&&r>=0?n+r.toString(t):xn(e)}const Mn={identify:e=>On(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Cn(e,2,8,n),stringify:e=>An(e,8,"0o")},_n={identify:On,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Cn(e,0,10,n),stringify:xn},Ln={identify:e=>On(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Cn(e,2,16,n),stringify:e=>An(e,16,"0x")},In=[yn,wn,kn,En,Sn,Mn,_n,Ln,Tn,Nn,$n];function jn(e){return"bigint"==typeof e||Number.isInteger(e)}const Dn=({value:e})=>JSON.stringify(e),Pn=[yn,wn].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Dn},{identify:e=>null==e,createNode:()=>new Bt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Dn},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:Dn},{identify:jn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>jn(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Dn}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),Un={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Buffer)return Buffer.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,o,i){const s=n;let a;if("function"==typeof Buffer)a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<s.length;++t)e+=String.fromCharCode(s[t]);a=btoa(e)}}if(t||(t=Bt.BLOCK_LITERAL),t!==Bt.QUOTE_DOUBLE){const e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(a.length/e),o=new Array(n);for(let t=0,r=0;t<n;++t,r+=e)o[t]=a.substr(r,e);a=o.join(t===Bt.BLOCK_LITERAL?"\n":" ")}return tn({comment:e,type:t,value:a},r,o,i)}};function Bn(e,t){if(kt(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!vt(r)){if(bt(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const e=r.items[0]||new un(new Bt(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}\n${e.key.commentBefore}`:r.commentBefore),r.comment){const t=e.value??e.key;t.comment=t.comment?`${r.comment}\n${t.comment}`:r.comment}r=e}e.items[n]=vt(r)?r:new un(r)}}else t("Expected a sequence for this tag");return e}function qn(e,t,n){const{replacer:r}=n,o=new bn(e);o.tag="tag:yaml.org,2002:pairs";let i=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let s,a;if("function"==typeof r&&(e=r.call(t,String(i++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);s=e[0],a=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected { key: value } tuple: ${e}`);s=t[0],a=e[s]}else s=e;o.items.push(ln(s,a,n))}return o}const Fn={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Bn,createNode:qn};class Rn extends bn{constructor(){super(),this.add=gn.prototype.add.bind(this),this.delete=gn.prototype.delete.bind(this),this.get=gn.prototype.get.bind(this),this.has=gn.prototype.has.bind(this),this.set=gn.prototype.set.bind(this),this.tag=Rn.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const e of this.items){let r,o;if(vt(e)?(r=Pt(e.key,"",t),o=Pt(e.value,r,t)):r=Pt(e,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,o)}return n}}Rn.tag="tag:yaml.org,2002:omap";const Hn={collection:"seq",identify:e=>e instanceof Map,nodeClass:Rn,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=Bn(e,t),r=[];for(const{key:e}of n.items)wt(e)&&(r.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):r.push(e.value));return Object.assign(new Rn,n)},createNode(e,t,n){const r=qn(e,t,n),o=new Rn;return o.items=r.items,o}};function Yn({value:e,source:t},n){return t&&(e?Kn:Wn).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const Kn={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Bt(!0),stringify:Yn},Wn={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Bt(!1),stringify:Yn},Jn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:xn},zn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():xn(e)}},Vn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Bt(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const r=e.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:xn},Gn=e=>"bigint"==typeof e||Number.isInteger(e);function Xn(e,t,n,{intAsBigInt:r}){const o=e[0];if("-"!==o&&"+"!==o||(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===o?BigInt(-1)*t:t}const i=parseInt(e,n);return"-"===o?-1*i:i}function Qn(e,t,n){const{value:r}=e;if(Gn(r)){const e=r.toString(t);return r<0?"-"+n+e.substr(1):n+e}return xn(e)}const Zn={identify:Gn,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>Xn(e,2,2,n),stringify:e=>Qn(e,2,"0b")},er={identify:Gn,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>Xn(e,1,8,n),stringify:e=>Qn(e,8,"0")},tr={identify:Gn,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>Xn(e,0,10,n),stringify:xn},nr={identify:Gn,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>Xn(e,2,16,n),stringify:e=>Qn(e,16,"0x")};class rr extends gn{constructor(e){super(e),this.tag=rr.tag}add(e){let t;t=vt(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new un(e.key,null):new un(e,null);mn(this.items,t.key)||this.items.push(t)}get(e,t){const n=mn(this.items,e);return!t&&vt(n)?wt(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=mn(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new un(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}rr.tag="tag:yaml.org,2002:set";const or={collection:"map",identify:e=>e instanceof Set,nodeClass:rr,default:!1,tag:"tag:yaml.org,2002:set",resolve(e,t){if(bt(e)){if(e.hasAllNullValues(!0))return Object.assign(new rr,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:r}=n,o=new rr(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof r&&(e=r.call(t,e,e)),o.items.push(ln(e,null,n));return o}};function ir(e,t){const n=e[0],r="-"===n||"+"===n?e.substring(1):e,o=e=>t?BigInt(e):Number(e),i=r.replace(/_/g,"").split(":").reduce(((e,t)=>e*o(60)+o(t)),o(0));return"-"===n?o(-1)*i:i}function sr(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return xn(e);let r="";t<0&&(r="-",t*=n(-1));const o=n(60),i=[t%o];return t<60?i.unshift(0):(t=(t-i[0])/o,i.unshift(t%o),t>=60&&(t=(t-i[0])/o,i.unshift(t))),r+i.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const ar={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>ir(e,n),stringify:sr},cr={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>ir(e,!1),stringify:sr},lr={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(lr.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,o,i,s,a]=t.map(Number),c=t[7]?Number((t[7]+"00").substr(1,3)):0;let l=Date.UTC(n,r-1,o,i||0,s||0,a||0,c);const u=t[8];if(u&&"Z"!==u){let e=ir(u,!1);Math.abs(e)<30&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},ur=[yn,wn,kn,En,Kn,Wn,Zn,er,tr,nr,Jn,zn,Vn,Un,Hn,Fn,or,ar,cr,lr],hr=new Map([["core",In],["failsafe",[yn,wn,kn]],["json",Pn],["yaml11",ur],["yaml-1.1",ur]]),fr={binary:Un,bool:Sn,float:$n,floatExp:Nn,floatNaN:Tn,floatTime:cr,int:_n,intHex:Ln,intOct:Mn,intTime:ar,map:yn,null:En,omap:Hn,pairs:Fn,seq:wn,set:or,timestamp:lr},dr={"tag:yaml.org,2002:binary":Un,"tag:yaml.org,2002:omap":Hn,"tag:yaml.org,2002:pairs":Fn,"tag:yaml.org,2002:set":or,"tag:yaml.org,2002:timestamp":lr};function pr(e,t){let n=hr.get(t);if(!n){if(!Array.isArray(e)){const e=Array.from(hr.keys()).filter((e=>"yaml11"!==e)).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}n=[]}if(Array.isArray(e))for(const t of e)n=n.concat(t);else"function"==typeof e&&(n=e(n.slice()));return n.map((e=>{if("string"!=typeof e)return e;const t=fr[e];if(t)return t;const n=Object.keys(fr).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${n}`)}))}const mr=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class gr{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:r,schema:o,sortMapEntries:i,toStringDefaults:s}){this.compat=Array.isArray(e)?pr(e,"compat"):e?pr(null,e):null,this.merge=!!n,this.name="string"==typeof o&&o||"core",this.knownTags=r?dr:{},this.tags=pr(t,this.name),this.toStringOptions=s??null,Object.defineProperty(this,ht,{value:yn}),Object.defineProperty(this,dt,{value:kn}),Object.defineProperty(this,pt,{value:wn}),this.sortMapEntries="function"==typeof i?i:!0===i?mr:null}clone(){const e=Object.create(gr.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function yr(e,t,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t){const n=r[t],o=yr(e,r,String(t),n);void 0===o?delete r[t]:o!==n&&(r[t]=o)}else if(r instanceof Map)for(const t of Array.from(r.keys())){const n=r.get(t),o=yr(e,r,t,n);void 0===o?r.delete(t):o!==n&&r.set(t,o)}else if(r instanceof Set)for(const t of Array.from(r)){const n=yr(e,r,t,t);void 0===n?r.delete(t):n!==t&&(r.delete(t),r.add(n))}else for(const[t,n]of Object.entries(r)){const o=yr(e,r,t,n);void 0===o?delete r[t]:o!==n&&(r[t]=o)}return e.call(t,n,r)}class br{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,mt,{value:ut});let r=null;"function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t,t=void 0);const o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=o;let{version:i}=o;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new Mt({version:i}),this.setSchema(i,n),this.contents=void 0===e?null:this.createNode(e,r,n)}clone(){const e=Object.create(br.prototype,{[mt]:{value:ut}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=St(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){vr(this.contents)&&this.contents.add(e)}addIn(e,t){vr(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=Lt(this);e.anchor=!t||n.has(t)?It(t||"a",n):t}return new jt(e.anchor)}createNode(e,t,n){let r;if("function"==typeof t)e=t.call({"":e},"",e),r=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),r=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:o,anchorPrefix:i,flow:s,keepUndefined:a,onTagObj:c,tag:l}=n??{},{onAnchor:u,setAnchors:h,sourceObjects:f}=function(e,t){const n=[],r=new Map;let o=null;return{onAnchor:r=>{n.push(r),o||(o=Lt(e));const i=It(t,o);return o.add(i),i},setAnchors:()=>{for(const e of n){const t=r.get(e);if("object"!=typeof t||!t.anchor||!wt(t.node)&&!Et(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:r}}(this,i||"a"),d=qt(e,l,{aliasDuplicateObjects:o??!0,keepUndefined:a??!1,onAnchor:u,onTagObj:c,replacer:r,schema:this.schema,sourceObjects:f});return s&&Et(d)&&(d.flow=!0),h(),d}createPair(e,t,n={}){const r=this.createNode(e,null,n),o=this.createNode(t,null,n);return new un(r,o)}delete(e){return!!vr(this.contents)&&this.contents.delete(e)}deleteIn(e){return Rt(e)?null!=this.contents&&(this.contents=null,!0):!!vr(this.contents)&&this.contents.deleteIn(e)}get(e,t){return Et(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Rt(e)?!t&&wt(this.contents)?this.contents.value:this.contents:Et(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!Et(this.contents)&&this.contents.has(e)}hasIn(e){return Rt(e)?void 0!==this.contents:!!Et(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=Ft(this.schema,[e],t):vr(this.contents)&&this.contents.set(e,t)}setIn(e,t){Rt(e)?this.contents=t:null==this.contents?this.contents=Ft(this.schema,Array.from(e),t):vr(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Mt({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Mt({version:e}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new gr(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:o,reviver:i}={}){const s={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100,stringify:rn},a=Pt(this.contents,t??"",s);if("function"==typeof o)for(const{count:e,res:t}of s.anchors.values())o(t,e);return"function"==typeof i?yr(i,{"":a},"",a):a}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let r=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");const o=nn(e,t),{commentString:i}=o.options;if(e.commentBefore){1!==n.length&&n.unshift("");const t=i(e.commentBefore);n.unshift(Kt(t,""))}let s=!1,a=null;if(e.contents){if(St(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){const t=i(e.contents.commentBefore);n.push(Kt(t,""))}o.forceBlockIndent=!!e.comment,a=e.contents.comment}const t=a?void 0:()=>s=!0;let c=rn(e.contents,o,(()=>a=null),t);a&&(c+=Wt(c,"",i(a))),"|"!==c[0]&&">"!==c[0]||"---"!==n[n.length-1]?n.push(c):n[n.length-1]=`--- ${c}`}else n.push(rn(e.contents,o));if(e.directives?.docEnd)if(e.comment){const t=i(e.comment);t.includes("\n")?(n.push("..."),n.push(Kt(t,""))):n.push(`... ${t}`)}else n.push("...");else{let t=e.comment;t&&s&&(t=t.replace(/^\n+/,"")),t&&(s&&!a||""===n[n.length-1]||n.push(""),n.push(Kt(i(t),"")))}return n.join("\n")+"\n"}(this,e)}}function vr(e){if(Et(e))return!0;throw new Error("Expected a YAML collection as document contents")}class wr extends Error{constructor(e,t,n,r){super(),this.name=e,this.code=n,this.message=r,this.pos=t}}class kr extends wr{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class Er extends wr{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const Sr=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:r,col:o}=n.linePos[0];n.message+=` at line ${r}, column ${o}`;let i=o-1,s=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(i>=60&&s.length>80){const e=Math.min(i-39,s.length-79);s="…"+s.substring(e),i-=e-1}if(s.length>80&&(s=s.substring(0,79)+"…"),r>1&&/^ *$/.test(s.substring(0,i))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),s=n+s}if(/[^ ]/.test(s)){let e=1;const t=n.linePos[1];t&&t.line===r&&t.col>o&&(e=Math.max(1,Math.min(t.col-o,80-i)));const a=" ".repeat(i)+"^".repeat(e);n.message+=`:\n\n${s}\n${a}\n`}};function xr(e,{flow:t,indicator:n,next:r,offset:o,onError:i,startOnNewline:s}){let a=!1,c=s,l=s,u="",h="",f=!1,d=!1,p=!1,m=null,g=null,y=null,b=null,v=null;for(const r of e)switch(p&&("space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&i(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),r.type){case"space":!t&&c&&"doc-start"!==n&&"\t"===r.source[0]&&i(r,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||i(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=r.source.substring(1)||" ";u?u+=h+e:u=e,h="",c=!1;break}case"newline":c?u?u+=r.source:a=!0:h+=r.source,c=!0,f=!0,(m||g)&&(d=!0),l=!0;break;case"anchor":m&&i(r,"MULTIPLE_ANCHORS","A node can have at most one anchor"),r.source.endsWith(":")&&i(r.offset+r.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=r,null===v&&(v=r.offset),c=!1,l=!1,p=!0;break;case"tag":g&&i(r,"MULTIPLE_TAGS","A node can have at most one tag"),g=r,null===v&&(v=r.offset),c=!1,l=!1,p=!0;break;case n:(m||g)&&i(r,"BAD_PROP_ORDER",`Anchors and tags must be after the ${r.source} indicator`),b&&i(r,"UNEXPECTED_TOKEN",`Unexpected ${r.source} in ${t??"collection"}`),b=r,c=!1,l=!1;break;case"comma":if(t){y&&i(r,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),y=r,c=!1,l=!1;break}default:i(r,"UNEXPECTED_TOKEN",`Unexpected ${r.type} token`),c=!1,l=!1}const w=e[e.length-1],k=w?w.offset+w.source.length:o;return p&&r&&"space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&("scalar"!==r.type||""!==r.source)&&i(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:y,found:b,spaceBefore:a,comment:u,hasNewline:f,hasNewlineAfterProp:d,anchor:m,tag:g,end:k,start:v??k}}function Tr(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(Tr(t.key)||Tr(t.value))return!0}return!1;default:return!0}}function Nr(e,t,n){if("flow-collection"===t?.type){const r=t.end[0];if(r.indent===e&&("]"===r.source||"}"===r.source)&&Tr(t)){n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}}function $r(e,t,n){const{uniqueKeys:r}=e.options;if(!1===r)return!1;const o="function"==typeof r?r:(t,n)=>t===n||wt(t)&&wt(n)&&t.value===n.value&&!("<<"===t.value&&e.schema.merge);return t.some((e=>o(e.key,n)))}const Or="All mapping items must start at the same column";function Cr(e,t,n,r){let o="";if(e){let i=!1,s="";for(const a of e){const{source:e,type:c}=a;switch(c){case"space":i=!0;break;case"comment":{n&&!i&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";o?o+=s+t:o=t,s="";break}case"newline":o&&(s+=e),i=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}t+=e.length}}return{comment:o,offset:t}}const Ar="Block collections are not allowed within flow collections",Mr=e=>e&&("block-map"===e.type||"block-seq"===e.type);function _r(e,t,n,r,o){let i;switch(n.type){case"block-map":i=function({composeNode:e,composeEmptyNode:t},n,r,o){const i=new gn(n.schema);n.atRoot&&(n.atRoot=!1);let s=r.offset,a=null;for(const c of r.items){const{start:l,key:u,sep:h,value:f}=c,d=xr(l,{indicator:"explicit-key-ind",next:u??h?.[0],offset:s,onError:o,startOnNewline:!0}),p=!d.found;if(p){if(u&&("block-seq"===u.type?o(s,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==r.indent&&o(s,"BAD_INDENT",Or)),!d.anchor&&!d.tag&&!h){a=d.end,d.comment&&(i.comment?i.comment+="\n"+d.comment:i.comment=d.comment);continue}(d.hasNewlineAfterProp||Tr(u))&&o(u??l[l.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==r.indent&&o(s,"BAD_INDENT",Or);const m=d.end,g=u?e(n,u,d,o):t(n,m,l,null,d,o);n.schema.compat&&Nr(r.indent,u,o),$r(n,i.items,g)&&o(m,"DUPLICATE_KEY","Map keys must be unique");const y=xr(h??[],{indicator:"map-value-ind",next:f,offset:g.range[2],onError:o,startOnNewline:!u||"block-scalar"===u.type});if(s=y.end,y.found){p&&("block-map"!==f?.type||y.hasNewline||o(s,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&d.start<y.found.offset-1024&&o(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const a=f?e(n,f,y,o):t(n,s,h,null,y,o);n.schema.compat&&Nr(r.indent,f,o),s=a.range[2];const l=new un(g,a);n.options.keepSourceTokens&&(l.srcToken=c),i.items.push(l)}else{p&&o(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),y.comment&&(g.comment?g.comment+="\n"+y.comment:g.comment=y.comment);const e=new un(g);n.options.keepSourceTokens&&(e.srcToken=c),i.items.push(e)}}return a&&a<s&&o(a,"IMPOSSIBLE","Map comment with trailing content"),i.range=[r.offset,s,a??s],i}(e,t,n,o);break;case"block-seq":i=function({composeNode:e,composeEmptyNode:t},n,r,o){const i=new bn(n.schema);n.atRoot&&(n.atRoot=!1);let s=r.offset,a=null;for(const{start:c,value:l}of r.items){const u=xr(c,{indicator:"seq-item-ind",next:l,offset:s,onError:o,startOnNewline:!0});if(!u.found){if(!(u.anchor||u.tag||l)){a=u.end,u.comment&&(i.comment=u.comment);continue}l&&"block-seq"===l.type?o(u.end,"BAD_INDENT","All sequence items must start at the same column"):o(s,"MISSING_CHAR","Sequence item without - indicator")}const h=l?e(n,l,u,o):t(n,u.end,c,null,u,o);n.schema.compat&&Nr(r.indent,l,o),s=h.range[2],i.items.push(h)}return i.range=[r.offset,s,a??s],i}(e,t,n,o);break;case"flow-collection":i=function({composeNode:e,composeEmptyNode:t},n,r,o){const i="{"===r.start.source,s=i?"flow map":"flow sequence",a=i?new gn(n.schema):new bn(n.schema);a.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1);let l=r.offset+r.start.source.length;for(let c=0;c<r.items.length;++c){const u=r.items[c],{start:h,key:f,sep:d,value:p}=u,m=xr(h,{flow:s,indicator:"explicit-key-ind",next:f??d?.[0],offset:l,onError:o,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||d||p)){0===c&&m.comma?o(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):c<r.items.length-1&&o(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),m.comment&&(a.comment?a.comment+="\n"+m.comment:a.comment=m.comment),l=m.end;continue}!i&&n.options.strict&&Tr(f)&&o(f,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===c)m.comma&&o(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(m.comma||o(m.start,"MISSING_CHAR",`Missing , between ${s} items`),m.comment){let e="";e:for(const t of h)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=a.items[a.items.length-1];vt(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(i||d||m.found){const r=m.end,c=f?e(n,f,m,o):t(n,r,h,null,m,o);Mr(f)&&o(c.range,"BLOCK_IN_FLOW",Ar);const g=xr(d??[],{flow:s,indicator:"map-value-ind",next:p,offset:c.range[2],onError:o,startOnNewline:!1});if(g.found){if(!i&&!m.found&&n.options.strict){if(d)for(const e of d){if(e===g.found)break;if("newline"===e.type){o(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<g.found.offset-1024&&o(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&p.source&&":"===p.source[0]?o(p,"MISSING_CHAR",`Missing space after : in ${s}`):o(g.start,"MISSING_CHAR",`Missing , or : between ${s} items`));const y=p?e(n,p,g,o):g.found?t(n,g.end,d,null,g,o):null;y?Mr(p)&&o(y.range,"BLOCK_IN_FLOW",Ar):g.comment&&(c.comment?c.comment+="\n"+g.comment:c.comment=g.comment);const b=new un(c,y);if(n.options.keepSourceTokens&&(b.srcToken=u),i){const e=a;$r(n,e.items,c)&&o(r,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(b)}else{const e=new gn(n.schema);e.flow=!0,e.items.push(b),a.items.push(e)}l=y?y.range[2]:g.end}else{const r=p?e(n,p,m,o):t(n,m.end,d,null,m,o);a.items.push(r),l=r.range[2],Mr(p)&&o(r.range,"BLOCK_IN_FLOW",Ar)}}const u=i?"}":"]",[h,...f]=r.end;let d=l;if(h&&h.source===u)d=h.offset+h.source.length;else{const e=s[0].toUpperCase()+s.substring(1);o(l,c?"MISSING_CHAR":"BAD_INDENT",c?`${e} must end with a ${u}`:`${e} in block collection must be sufficiently indented and end with a ${u}`),h&&1!==h.source.length&&f.unshift(h)}if(f.length>0){const e=Cr(f,d,n.options.strict,o);e.comment&&(a.comment?a.comment+="\n"+e.comment:a.comment=e.comment),a.range=[r.offset,d,e.offset]}else a.range=[r.offset,d,d];return a}(e,t,n,o)}if(!r)return i;const s=t.directives.tagName(r.source,(e=>o(r,"TAG_RESOLVE_FAILED",e)));if(!s)return i;const a=i.constructor;if("!"===s||s===a.tagName)return i.tag=a.tagName,i;const c=bt(i)?"map":"seq";let l=t.schema.tags.find((e=>e.collection===c&&e.tag===s));if(!l){const e=t.schema.knownTags[s];if(!e||e.collection!==c)return o(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),i.tag=s,i;t.schema.tags.push(Object.assign({},e,{default:!1})),l=e}const u=l.resolve(i,(e=>o(r,"TAG_RESOLVE_FAILED",e)),t.options),h=St(u)?u:new Bt(u);return h.range=i.range,h.tag=s,l?.format&&(h.format=l.format),h}function Lr(e,t,n){const r=e.offset,o=function({offset:e,props:t},n,r){if("block-scalar-header"!==t[0].type)return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:o}=t[0],i=o[0];let s=0,a="",c=-1;for(let t=1;t<o.length;++t){const n=o[t];if(a||"-"!==n&&"+"!==n){const r=Number(n);!s&&r?s=r:-1===c&&(c=e+t)}else a=n}-1!==c&&r(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${o}`);let l=!1,u="",h=o.length;for(let e=1;e<t.length;++e){const o=t[e];switch(o.type){case"space":l=!0;case"newline":h+=o.source.length;break;case"comment":if(n&&!l){r(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters")}h+=o.source.length,u=o.source.substring(1);break;case"error":r(o,"UNEXPECTED_TOKEN",o.message),h+=o.source.length;break;default:{r(o,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${o.type}`);const e=o.source;e&&"string"==typeof e&&(h+=e.length)}}}return{mode:i,indent:s,chomp:a,comment:u,length:h}}(e,t,n);if(!o)return{value:"",type:null,comment:"",range:[r,r,r]};const i=">"===o.mode?Bt.BLOCK_FOLDED:Bt.BLOCK_LITERAL,s=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),o=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)o.push([t[e],t[e+1]]);return o}(e.source):[];let a=s.length;for(let e=s.length-1;e>=0;--e){const t=s[e][1];if(""!==t&&"\r"!==t)break;a=e}if(0===a){const t="+"===o.chomp&&s.length>0?"\n".repeat(Math.max(1,s.length-1)):"";let n=r+o.length;return e.source&&(n+=e.source.length),{value:t,type:i,comment:o.comment,range:[r,n,n]}}let c=e.indent+o.indent,l=e.offset+o.length,u=0;for(let e=0;e<a;++e){const[t,r]=s[e];if(""!==r&&"\r"!==r){if(t.length<c){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,"MISSING_CHAR",e)}0===o.indent&&(c=t.length),u=e;break}0===o.indent&&t.length>c&&(c=t.length),l+=t.length+r.length+1}for(let e=s.length-1;e>=a;--e)s[e][0].length>c&&(a=e+1);let h="",f="",d=!1;for(let e=0;e<u;++e)h+=s[e][0].slice(c)+"\n";for(let e=u;e<a;++e){let[t,r]=s[e];l+=t.length+r.length+1;const a="\r"===r[r.length-1];if(a&&(r=r.slice(0,-1)),r&&t.length<c){const e=`Block scalar lines must not be less indented than their ${o.indent?"explicit indentation indicator":"first line"}`;n(l-r.length-(a?2:1),"BAD_INDENT",e),t=""}i===Bt.BLOCK_LITERAL?(h+=f+t.slice(c)+r,f="\n"):t.length>c||"\t"===r[0]?(" "===f?f="\n":d||"\n"!==f||(f="\n\n"),h+=f+t.slice(c)+r,f="\n",d=!0):""===r?"\n"===f?h+="\n":f="\n":(h+=f+r,f=" ",d=!1)}switch(o.chomp){case"-":break;case"+":for(let e=a;e<s.length;++e)h+="\n"+s[e][0].slice(c);"\n"!==h[h.length-1]&&(h+="\n");break;default:h+="\n"}const p=r+o.length+e.source.length;return{value:h,type:i,comment:o.comment,range:[r,p,p]}}function Ir(e,t,n){const{offset:r,type:o,source:i,end:s}=e;let a,c;const l=(e,t,o)=>n(r+e,t,o);switch(o){case"scalar":a=Bt.PLAIN,c=function(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${e[0]}`;break;case"@":case"`":n=`reserved character ${e[0]}`}n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`);return jr(e)}(i,l);break;case"single-quoted-scalar":a=Bt.QUOTE_SINGLE,c=function(e,t){"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote");return jr(e.slice(1,-1)).replace(/''/g,"'")}(i,l);break;case"double-quoted-scalar":a=Bt.QUOTE_DOUBLE,c=function(e,t){let n="";for(let r=1;r<e.length-1;++r){const o=e[r];if("\r"!==o||"\n"!==e[r+1])if("\n"===o){const{fold:t,offset:o}=Dr(e,r);n+=t,r=o}else if("\\"===o){let o=e[++r];const i=Pr[o];if(i)n+=i;else if("\n"===o)for(o=e[r+1];" "===o||"\t"===o;)o=e[1+ ++r];else if("\r"===o&&"\n"===e[r+1])for(o=e[1+ ++r];" "===o||"\t"===o;)o=e[1+ ++r];else if("x"===o||"u"===o||"U"===o){const i={x:2,u:4,U:8}[o];n+=Ur(e,r+1,i,t),r+=i}else{const o=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),n+=o}}else if(" "===o||"\t"===o){const t=r;let i=e[r+1];for(;" "===i||"\t"===i;)i=e[1+ ++r];"\n"===i||"\r"===i&&"\n"===e[r+2]||(n+=r>t?e.slice(t,r+1):o)}else n+=o}'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote');return n}(i,l);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${o}`),{value:"",type:null,comment:"",range:[r,r+i.length,r+i.length]}}const u=r+i.length,h=Cr(s,u,t,n);return{value:c,type:a,comment:h.comment,range:[r,u,h.offset]}}function jr(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(e){t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let o=r[1],i=" ",s=t.lastIndex;for(n.lastIndex=s;r=n.exec(e);)""===r[1]?"\n"===i?o+=i:i="\n":(o+=i+r[1],i=" "),s=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=s,r=a.exec(e),o+i+(r?.[1]??"")}function Dr(e,t){let n="",r=e[t+1];for(;!(" "!==r&&"\t"!==r&&"\n"!==r&&"\r"!==r||"\r"===r&&"\n"!==e[t+2]);)"\n"===r&&(n+="\n"),r=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const Pr={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Ur(e,t,n,r){const o=e.substr(t,n),i=o.length===n&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(i)){const o=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(i)}function Br(e,t,n,r){const{value:o,type:i,comment:s,range:a}="block-scalar"===t.type?Lr(t,e.options.strict,r):Ir(t,e.options.strict,r),c=n?e.directives.tagName(n.source,(e=>r(n,"TAG_RESOLVE_FAILED",e))):null,l=n&&c?function(e,t,n,r,o){if("!"===n)return e[dt];const i=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;i.push(t)}for(const e of i)if(e.test?.test(t))return e;const s=e.knownTags[n];if(s&&!s.collection)return e.tags.push(Object.assign({},s,{default:!1,test:void 0})),s;return o(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[dt]}(e.schema,o,c,n,r):"scalar"===t.type?function({directives:e,schema:t},n,r,o){const i=t.tags.find((e=>e.default&&e.test?.test(n)))||t[dt];if(t.compat){const s=t.compat.find((e=>e.default&&e.test?.test(n)))??t[dt];if(i.tag!==s.tag){o(r,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${e.tagString(i.tag)} or ${e.tagString(s.tag)}`,!0)}}return i}(e,o,t,r):e.schema[dt];let u;try{const i=l.resolve(o,(e=>r(n??t,"TAG_RESOLVE_FAILED",e)),e.options);u=wt(i)?i:new Bt(i)}catch(e){const i=e instanceof Error?e.message:String(e);r(n??t,"TAG_RESOLVE_FAILED",i),u=new Bt(o)}return u.range=a,u.source=o,i&&(u.type=i),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function qr(e,t,n){if(t){null===n&&(n=t.length);for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++r];"space"===n?.type;)e+=n.source.length,n=t[++r];break}}return e}const Fr={composeNode:Rr,composeEmptyNode:Hr};function Rr(e,t,n,r){const{spaceBefore:o,comment:i,anchor:s,tag:a}=n;let c,l=!0;switch(t.type){case"alias":c=function({options:e},{offset:t,source:n,end:r},o){const i=new jt(n.substring(1));""===i.source&&o(t,"BAD_ALIAS","Alias cannot be an empty string");i.source.endsWith(":")&&o(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const s=t+n.length,a=Cr(r,s,e.strict,o);i.range=[t,s,a.offset],a.comment&&(i.comment=a.comment);return i}(e,t,r),(s||a)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Br(e,t,a,r),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=_r(Fr,e,t,a,r),s&&(c.anchor=s.source.substring(1));break;default:r(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),c=Hr(e,t.offset,void 0,null,n,r),l=!1}return s&&""===c.anchor&&r(s,"BAD_ALIAS","Anchor cannot be an empty string"),o&&(c.spaceBefore=!0),i&&("scalar"===t.type&&""===t.source?c.comment=i:c.commentBefore=i),e.options.keepSourceTokens&&l&&(c.srcToken=t),c}function Hr(e,t,n,r,{spaceBefore:o,comment:i,anchor:s,tag:a,end:c},l){const u=Br(e,{type:"scalar",offset:qr(t,n,r),indent:-1,source:""},a,l);return s&&(u.anchor=s.source.substring(1),""===u.anchor&&l(s,"BAD_ALIAS","Anchor cannot be an empty string")),o&&(u.spaceBefore=!0),i&&(u.comment=i,u.range[2]=c),u}function Yr(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function Kr(e){let t="",n=!1,r=!1;for(let o=0;o<e.length;++o){const i=e[o];switch(i[0]){case"#":t+=(""===t?"":r?"\n\n":"\n")+(i.substring(1)||" "),n=!0,r=!1;break;case"%":"#"!==e[o+1]?.[0]&&(o+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class Wr{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,r)=>{const o=Yr(e);r?this.warnings.push(new Er(o,t,n)):this.errors.push(new kr(o,t,n))},this.directives=new Mt({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=Kr(this.prelude);if(n){const o=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(r||e.directives.docStart||!o)e.commentBefore=n;else if(Et(o)&&!o.flow&&o.items.length>0){let e=o.items[0];vt(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=o.commentBefore;o.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Kr(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,((t,n,r)=>{const o=Yr(e);o[0]+=t,this.onError(o,"BAD_DIRECTIVE",n,r)})),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:r,value:o,end:i},s){const a=Object.assign({_directives:t},e),c=new br(void 0,a),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=xr(r,{indicator:"doc-start",next:o??i?.[0],offset:n,onError:s,startOnNewline:!0});u.found&&(c.directives.docStart=!0,!o||"block-map"!==o.type&&"block-seq"!==o.type||u.hasNewline||s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=o?Rr(l,o,u,s):Hr(l,u.end,r,null,u,s);const h=c.contents.range[2],f=Cr(i,h,!1,s);return f.comment&&(c.comment=f.comment),c.range=[n,h,f.offset],c}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new kr(Yr(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new kr(Yr(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=!0;const t=Cr(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new kr(Yr(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new br(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}function Jr(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const zr="0123456789ABCDEFabcdef".split(""),Vr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),Gr=",[]{}".split(""),Xr=" ,[]{}\n\r\t".split(""),Qr=e=>!e||Xr.includes(e);class Zr{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let n=this.next??"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&Jr(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if("\ufeff"===e[0]&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const r=e[n-1];" "!==r&&"\t"!==r||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield"",yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&Jr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&Jr(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Jr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&Jr(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Qr),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const r=this.getLine();if(null===r)return this.setNext("flow");if(-1!==n&&n<this.indentNext&&"#"!==r[0]||0===n&&(r.startsWith("---")||r.startsWith("..."))&&Jr(r[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===r[0]||"}"===r[0])))return this.flowLevel=0,yield"",yield*this.parseLineStart()}let o=0;for(;","===r[o];)o+=(yield*this.pushCount(1)),o+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(o+=(yield*this.pushIndicators()),r[o]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Qr),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||Jr(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let r=n.indexOf("\n",this.pos);if(-1!==r){for(;-1!==r;){const e=this.continueScalar(r+1);if(-1===e)break;r=n.indexOf("\n",e)}-1!==r&&(t=r-("\r"===n[r-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil((e=>Jr(e)||"#"===e))}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let r=this.pos;e=this.buffer[r];++r)switch(e){case" ":n+=1;break;case"\n":t=r,n=0;break;case"\r":{const e=this.buffer[r+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,r=this.buffer[e];"\r"===r&&(r=this.buffer[--e]);const o=e;for(;" "===r||"\t"===r;)r=this.buffer[--e];if(!("\n"===r&&e>=this.pos&&e+1+n>o))break;t=e}return yield"",yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,r=this.pos-1;for(;t=this.buffer[++r];)if(":"===t){const t=this.buffer[r+1];if(Jr(t)||e&&","===t)break;n=r}else if(Jr(t)){let o=this.buffer[r+1];if("\r"===t&&("\n"===o?(r+=1,t="\n",o=this.buffer[r+1]):n=r),"#"===o||e&&Gr.includes(o))break;if("\n"===t){const e=this.continueScalar(r+1);if(-1===e)break;r=Math.max(r,e-2)}}else{if(e&&Gr.includes(t))break;n=r}return t||this.atEnd?(yield"",yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Qr))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(Jr(t)||e&&Gr.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!Jr(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(Vr.includes(t))t=this.buffer[++e];else{if("%"!==t||!zr.includes(this.buffer[e+1])||!zr.includes(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class eo{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};return{line:t,col:e-this.lineStarts[t-1]+1}}}}function to(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function no(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function ro(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function oo(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function io(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function so(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||to(t.start,"explicit-key-ind")||to(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,ro(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class ao{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Zr,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=function(e){switch(e){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&so(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!to(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===no(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==no(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=io(oo(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const n="end"in t.value?t.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent&&t.sep;let r=[];if(n&&t.sep&&!t.value){const n=[];for(let r=0;r<t.sep.length;++r){const o=t.sep[r];switch(o.type){case"newline":n.push(r);break;case"space":break;case"comment":o.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(r=t.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(n||t.value?(r.push(this.sourceToken),e.items.push({start:r}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"explicit-key-ind":return t.sep||to(t.start,"explicit-key-ind")?n||t.value?(r.push(this.sourceToken),e.items.push({start:r})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):t.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(to(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(to(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if(ro(t.key)&&!to(t.sep,"newline")){const e=io(t.start),n=t.key,r=t.sep;r.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:r}]})}else r.length>0?t.sep=t.sep.concat(r,this.sourceToken):t.sep.push(this.sourceToken);else if(to(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=io(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||n?e.items.push({start:r,key:null,sep:[this.sourceToken]}):to(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);return void(n||t.value?(e.items.push({start:r,key:o,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(o):(Object.assign(t,{key:o,sep:[]}),this.onKeyLine=!0))}default:{const o=this.startBlockValue(e);if(o)return n&&"block-seq"!==o.type&&to(t.start,"explicit-key-ind")&&e.items.push({start:r}),void this.stack.push(o)}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const n="end"in t.value?t.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||to(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"===t.type&&("map-value-ind"===this.type&&t.indent===e.indent||"newline"===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=io(oo(t));so(e);const r=e.end.splice(1,e.end.length);r.push(this.sourceToken);const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=io(oo(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t}]}}case"map-value-ind":{this.onKeyLine=!0;const t=io(oo(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&(!(this.indent<=t)&&e.every((e=>"newline"===e.type||"space"===e.type)))}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function co(e,t={}){const{lineCounter:n,prettyErrors:r}=function(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new eo||null,prettyErrors:t}}(t),o=new ao(n?.addNewLine),i=new Wr(t);let s=null;for(const t of i.compose(o.parse(e),!0,e.length))if(s){if("silent"!==s.options.logLevel){s.errors.push(new kr(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else s=t;return r&&n&&(s.errors.forEach(Sr(e,n)),s.warnings.forEach(Sr(e,n))),s}function lo(e){return Object(e)===e&&"string"==typeof e.compte&&Number.isFinite(e.montant)&&"Crédit"===e.sens||"Débit"===e.sens}function uo(e){return function(e){return Object(e)===e&&"string"==typeof e.identifiantOpération&&"string"==typeof e.type&&e.date instanceof Date&&Array.isArray(e.opérations)&&e.opérations.every(lo)}(e)}function ho(e){if(""===e.trim())return[];const t=function(e,t,n){let r;"function"==typeof t?r=t:void 0===n&&t&&"object"==typeof t&&(n=t);const o=co(e,n);if(!o)return null;if(o.warnings.forEach((e=>on(o.options.logLevel,e))),o.errors.length>0){if("silent"!==o.options.logLevel)throw o.errors[0];o.errors=[]}return o.toJS(Object.assign({reviver:r},n))}(e,((e,t)=>"date"===e&&"string"==typeof t?new Date(t):t));if(Array.isArray(t)&&t.every(uo))return t;throw new TypeError(`Problème dans le format de fichier qui n'est pas reconnu (devrait être un liste d'opérations haut niveau). Début du fichier:\n\n---\n${e.slice(0,100)}\n---`)}function fo(e){return function(e,t,n){let r=null;if("function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n??t??{};if(!e)return}return new br(e,r,n).toString(n)}(e)}const po={headers:{"user-agent":"comptanar https://github.com/comptanar/comptanar.github.io"}};let mo=ct.defaults(po);var go={reset(){mo=ct.defaults(po)},set token(e){mo=mo.defaults({headers:{authorization:`token ${e}`}})},set owner(e){mo=mo.defaults({owner:e})},set repo(e){mo=mo.defaults({repo:e})},getAuthenticatedUser:()=>mo("/user").then((({data:e})=>(e.login,e))),getOrgs:()=>mo("/user/orgs").then((({data:e})=>(console.log("organisations",e),e))),getRepo:(e,t)=>mo(`/repos/${e}/${t}`),createComptabilityRepo:(e,t)=>mo("/repos/comptanar/comptabilite/generate",{method:"POST",owner:e,name:t}),getExercices:()=>mo("/repos/{owner}/{repo}/contents/exercices").then((({data:e})=>{console.log("exercices",e);const t=[],n=new Map;for(const{name:r,git_url:o}of e){const e=Number(r),i=mo(o).then((({data:r})=>{const o=r.tree;if(o.length>=2)throw TypeError("Il ne devrait y avoir qu'un seul fichier opérationsHautNiveau.yml et il y a plusieurs fichiers");const i=o[0],{url:s}=i,a=mo(s).then((({data:{encoding:t,content:r,sha:o}})=>{if("base64"!==t)throw new TypeError(`type de fichier inconnu: ${t}. On ne sait gérer que 'base64'`);{const t=ho(atob(r));n.set(e,{"opérationsHautNiveau":t,sha:o})}}));return t.push(a),a}));return t.push(i),Promise.all(t).then((()=>n))}})),writeExercice:(e,t,n,r)=>mo(`/repos/{owner}/{repo}/contents/${function(e){return`exercices/${e}/operationsHautNiveau.yml`}(e)}`,{method:"PUT",message:r||`Mise à jour des opérations haut niveau de l'exercice ${e}`,sha:t,content:btoa(fo(n))})};function yo(e,t,n){const r=e.slice();return r[12]=t[n],r}function bo(e){let t,n,r,o,i,s,a,c,l=e[3].login+"",u={ctx:e,current:null,token:null,hasCatch:!0,pending:Oo,then:ko,catch:wo,value:16,error:15,blocks:[,,,]};return ae(a=e[4],u),{c(){t=E("h1"),n=S("Concernant l'organisation "),r=S(l),i=x(),s=T(),u.block.c()},m(e,o){v(e,t,o),g(t,n),g(t,r),v(e,i,o),v(e,s,o),u.block.m(e,u.anchor=o),u.mount=()=>s.parentNode,u.anchor=s,c=!0},p(t,n){e=t,(!c||8&n)&&l!==(l=e[3].login+"")&&C(r,l),u.ctx=e,16&n&&a!==(a=e[4])&&ae(a,u)||ce(u,e,n)},i(e){c||(W((()=>{c&&(o||(o=se(t,Me,{},!0)),o.run(1))})),re(u.block),c=!0)},o(e){o||(o=se(t,Me,{},!1)),o.run(0);for(let e=0;e<3;e+=1){oe(u.blocks[e])}c=!1},d(e){e&&w(t),e&&o&&o.end(),e&&w(i),e&&w(s),u.block.d(e),u.token=null,u=null}}}function vo(e){let t,n,r,o,i,s,a,c,l,u={ctx:e,current:null,token:null,hasCatch:!0,pending:_o,then:Ao,catch:Co,value:11,error:15,blocks:[,,,]};return ae(c=e[2],u),{c(){t=E("h1"),n=S("Yello "),r=S(e[0]),o=S(", tu veux faire de la comptabilité sur quelle organisation ?"),s=x(),a=T(),u.block.c()},m(e,i){v(e,t,i),g(t,n),g(t,r),g(t,o),v(e,s,i),v(e,a,i),u.block.m(e,u.anchor=i),u.mount=()=>a.parentNode,u.anchor=a,l=!0},p(t,n){e=t,(!l||1&n)&&C(r,e[0]),u.ctx=e,4&n&&c!==(c=e[2])&&ae(c,u)||ce(u,e,n)},i(e){l||(W((()=>{l&&(i||(i=se(t,Me,{},!0)),i.run(1))})),re(u.block),l=!0)},o(e){i||(i=se(t,Me,{},!1)),i.run(0);for(let e=0;e<3;e+=1){oe(u.blocks[e])}l=!1},d(e){e&&w(t),e&&i&&i.end(),e&&w(s),e&&w(a),u.block.d(e),u.token=null,u=null}}}function wo(e){let t,n,o,i,s=e[15]+"";return{c(){t=E("div"),t.textContent="Erreur dans le chargement du repo de comptabilité.",n=x(),o=E("div"),i=S(s)},m(e,r){v(e,t,r),v(e,n,r),v(e,o,r),g(o,i)},p(e,t){16&t&&s!==(s=e[15]+"")&&C(i,s)},i:r,o:r,d(e){e&&w(t),e&&w(n),e&&w(o)}}}function ko(e){let t,n,r,o;const i=[xo,So,Eo],s=[];function a(e,t){return e[16]?0:e[5]?2:1}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),r=T()},m(e,n){s[t].m(e,n),v(e,r,n),o=!0},p(e,o){let c=t;t=a(e),t===c?s[t].p(e,o):(te(),oe(s[c],1,1,(()=>{s[c]=null})),ne(),n=s[t],n?n.p(e,o):(n=s[t]=i[t](e),n.c()),re(n,1),n.m(r.parentNode,r))},i(e){o||(re(n),o=!0)},o(e){oe(n),o=!1},d(e){s[t].d(e),e&&w(r)}}}function Eo(e){let t,n,r,o={ctx:e,current:null,token:null,hasCatch:!0,pending:$o,then:No,catch:To,value:11,error:15,blocks:[,,,]};return ae(n=e[5],o),{c(){t=T(),o.block.c()},m(e,n){v(e,t,n),o.block.m(e,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t,r=!0},p(t,r){e=t,o.ctx=e,32&r&&n!==(n=e[5])&&ae(n,o)||ce(o,e,r)},i(e){r||(re(o.block),r=!0)},o(e){for(let e=0;e<3;e+=1){oe(o.blocks[e])}r=!1},d(e){e&&w(t),o.block.d(e),o.token=null,o=null}}}function So(e){let t,n,r,o,i,s,a,c,l,u,h,f,d,p,m,y,b,k=e[3].login+"";return{c(){t=E("section"),n=E("p"),n.textContent="Il n'existe pas de repo de comptabilité dans cette organisation.",r=x(),o=E("small"),i=S("(Cliquer sur le bouton va créer le repo Github "),s=E("code"),a=S(k),c=S("/"),l=S(jo),u=S(")"),h=x(),f=E("p"),d=E("button"),d.textContent="Créer un repo de comptabilité",$(t,"class","svelte-1sc916o")},m(p,w){v(p,t,w),g(t,n),g(t,r),g(t,o),g(o,i),g(o,s),g(s,a),g(s,c),g(s,l),g(o,u),g(t,h),g(t,f),g(f,d),m=!0,y||(b=N(d,"click",e[10]),y=!0)},p(e,t){(!m||8&t)&&k!==(k=e[3].login+"")&&C(a,k)},i(e){m||(W((()=>{m&&(p||(p=se(t,Me,{},!0)),p.run(1))})),m=!0)},o(e){p||(p=se(t,Me,{},!1)),p.run(0),m=!1},d(e){e&&w(t),e&&p&&p.end(),y=!1,b()}}}function xo(e){let t,n,r,o,i,s,a;return{c(){t=E("section"),n=S("La compta est là ! "),r=E("a"),o=S("Y aller =>"),$(r,"href",i="/comptabilite/?org="+e[3].login+"&repo="+e[6]),$(t,"class","svelte-1sc916o")},m(e,i){v(e,t,i),g(t,n),g(t,r),g(r,o),a=!0},p(e,t){(!a||8&t&&i!==(i="/comptabilite/?org="+e[3].login+"&repo="+e[6]))&&$(r,"href",i)},i(e){a||(W((()=>{a&&(s||(s=se(t,Me,{},!0)),s.run(1))})),a=!0)},o(e){s||(s=se(t,Me,{},!1)),s.run(0),a=!1},d(e){e&&w(t),e&&s&&s.end()}}}function To(e){let t,n,r,o,i,s,a,c,l,u,h,f,d,p=e[3].login+"",m=e[15]+"";return{c(){t=E("section"),n=E("div"),r=S("Erreur dans la création du repo de comptabilité "),o=E("code"),i=S(p),s=S("/"),a=S(jo),c=S("."),l=x(),u=E("div"),h=S(m),$(t,"class","svelte-1sc916o")},m(e,f){v(e,t,f),g(t,n),g(n,r),g(n,o),g(o,i),g(o,s),g(o,a),g(n,c),g(t,l),g(t,u),g(u,h),d=!0},p(e,t){(!d||8&t)&&p!==(p=e[3].login+"")&&C(i,p),(!d||32&t)&&m!==(m=e[15]+"")&&C(h,m)},i(e){d||(W((()=>{d&&(f||(f=se(t,Me,{},!0)),f.run(1))})),d=!0)},o(e){f||(f=se(t,Me,{},!1)),f.run(0),d=!1},d(e){e&&w(t),e&&f&&f.end()}}}function No(e){let t,n,r,o,i,s,a,c;return{c(){t=E("section"),n=E("p"),n.textContent="Repo créé !",r=x(),o=E("a"),i=S("Allé, on va faire de la compta !"),$(o,"href",s="/comptabilite?org="+e[3].login+"&repo="+e[6]),$(t,"class","svelte-1sc916o")},m(e,s){v(e,t,s),g(t,n),g(t,r),g(t,o),g(o,i),c=!0},p(e,t){(!c||8&t&&s!==(s="/comptabilite?org="+e[3].login+"&repo="+e[6]))&&$(o,"href",s)},i(e){c||(W((()=>{c&&(a||(a=se(t,Me,{},!0)),a.run(1))})),c=!0)},o(e){a||(a=se(t,Me,{},!1)),a.run(0),c=!1},d(e){e&&w(t),e&&a&&a.end()}}}function $o(e){let t,n,r,o,i,s,a,c,l,u=e[3].login+"";return{c(){t=E("section"),n=S("(Création de repo "),r=E("code"),o=S(u),i=S("/"),s=S(jo),a=S("...)"),$(t,"class","svelte-1sc916o")},m(e,c){v(e,t,c),g(t,n),g(t,r),g(r,o),g(r,i),g(r,s),g(t,a),l=!0},p(e,t){(!l||8&t)&&u!==(u=e[3].login+"")&&C(o,u)},i(e){l||(W((()=>{l&&(c||(c=se(t,Me,{},!0)),c.run(1))})),l=!0)},o(e){c||(c=se(t,Me,{},!1)),c.run(0),l=!1},d(e){e&&w(t),e&&c&&c.end()}}}function Oo(e){let t,n,o;return{c(){t=E("section"),t.textContent="(Vérification de s'il existe déjà un repo de comptabilité)",$(t,"class","svelte-1sc916o")},m(e,n){v(e,t,n),o=!0},p:r,i(e){o||(W((()=>{o&&(n||(n=se(t,Me,{},!0)),n.run(1))})),o=!0)},o(e){n||(n=se(t,Me,{},!1)),n.run(0),o=!1},d(e){e&&w(t),e&&n&&n.end()}}}function Co(e){let t,n,r,o,i,s,a,c=e[15]+"";return{c(){t=E("section"),n=E("div"),n.textContent="Erreur dans le chargement de le liste d'organisation.",r=x(),o=E("div"),i=S(c),$(t,"class","svelte-1sc916o")},m(e,s){v(e,t,s),g(t,n),g(t,r),g(t,o),g(o,i),a=!0},p(e,t){(!a||4&t)&&c!==(c=e[15]+"")&&C(i,c)},i(e){a||(W((()=>{a&&(s||(s=se(t,Me,{},!0)),s.run(1))})),a=!0)},o(e){s||(s=se(t,Me,{},!1)),s.run(0),a=!1},d(e){e&&w(t),e&&s&&s.end()}}}function Ao(e){let t,n,r,o,i,s,a=e[11],c=[];for(let t=0;t<a.length;t+=1)c[t]=Mo(yo(e,a,t));return{c(){t=E("section"),n=E("p"),n.textContent="Voici les organisations possibles :",r=x(),o=E("ul");for(let e=0;e<c.length;e+=1)c[e].c();$(t,"class","svelte-1sc916o")},m(e,i){v(e,t,i),g(t,n),g(t,r),g(t,o);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(o,null);s=!0},p(e,t){if(132&t){let n;for(a=e[11],n=0;n<a.length;n+=1){const r=yo(e,a,n);c[n]?c[n].p(r,t):(c[n]=Mo(r),c[n].c(),c[n].m(o,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},i(e){s||(W((()=>{s&&(i||(i=se(t,Me,{},!0)),i.run(1))})),s=!0)},o(e){i||(i=se(t,Me,{},!1)),i.run(0),s=!1},d(e){e&&w(t),k(c,e),e&&i&&i.end()}}}function Mo(e){let t,n,r,o,i,s=e[12].login+"";function a(){return e[9](e[12])}return{c(){t=E("li"),n=E("button"),r=S(s)},m(e,s){v(e,t,s),g(t,n),g(n,r),o||(i=N(n,"click",a),o=!0)},p(t,n){e=t,4&n&&s!==(s=e[12].login+"")&&C(r,s)},d(e){e&&w(t),o=!1,i()}}}function _o(e){let t,n,o;return{c(){t=E("section"),t.textContent="(chargement des orgs possibles)",$(t,"class","svelte-1sc916o")},m(e,n){v(e,t,n),o=!0},p:r,i(e){o||(W((()=>{o&&(n||(n=se(t,Me,{},!0)),n.run(1))})),o=!0)},o(e){n||(n=se(t,Me,{},!1)),n.run(0),o=!1},d(e){e&&w(t),e&&n&&n.end()}}}function Lo(e){let t,n,r,o;const i=[vo,bo],s=[];function a(e,t){return e[3]?1:0}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),r=T()},m(e,n){s[t].m(e,n),v(e,r,n),o=!0},p(e,o){let c=t;t=a(e),t===c?s[t].p(e,o):(te(),oe(s[c],1,1,(()=>{s[c]=null})),ne(),n=s[t],n?n.p(e,o):(n=s[t]=i[t](e),n.c()),re(n,1),n.m(r.parentNode,r))},i(e){o||(re(n),o=!0)},o(e){oe(n),o=!1},d(e){s[t].d(e),e&&w(r)}}}function Io(e){let t,n;return t=new Ne({props:{login:e[0],logout:e[1],$$slots:{default:[Lo]},$$scope:{ctx:e}}}),{c(){le(t.$$.fragment)},m(e,r){ue(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.login=e[0]),2&n&&(r.logout=e[1]),131133&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(re(t.$$.fragment,e),n=!0)},o(e){oe(t.$$.fragment,e),n=!1},d(e){he(t,e)}}}const jo="comptabilite";function Do(e,t,n){let r,o,i,{login:s}=t,{logout:a}=t,{possibleOrganisations:c=[]}=t,l=jo;function u(e){n(3,r=e);const t=go.getRepo(r.login,l);n(4,o=t.catch((e=>{if(404!==e.status)throw e;console.info("Expected error trying to find a repo that may not exist")})))}function h(){n(5,i=go.createComptabilityRepo(r.login,jo))}return e.$$set=e=>{"login"in e&&n(0,s=e.login),"logout"in e&&n(1,a=e.logout),"possibleOrganisations"in e&&n(2,c=e.possibleOrganisations)},[s,a,c,r,o,i,l,u,h,e=>u(e),()=>h()]}class Po extends de{constructor(e){super(),fe(this,e,Do,Io,l,{login:0,logout:1,possibleOrganisations:2})}}function Uo(e){let t,n,r,o,i,s,a,c,l,u,h;return{c(){t=E("h1"),n=S("Voici la comptabilité de l'organisation "),r=E("code"),o=S(e[2]),i=x(),s=E("section"),a=E("a"),c=E("h2"),c.textContent="Factures",u=x(),h=E("h2"),h.textContent="Compte de résultat et bilan comptable",$(a,"href",l="/comptabilite/factures?org="+e[2]+"&repo="+e[3])},m(e,l){v(e,t,l),g(t,n),g(t,r),g(r,o),v(e,i,l),v(e,s,l),g(s,a),g(a,c),g(s,u),g(s,h)},p(e,t){4&t&&C(o,e[2]),12&t&&l!==(l="/comptabilite/factures?org="+e[2]+"&repo="+e[3])&&$(a,"href",l)},d(e){e&&w(t),e&&w(i),e&&w(s)}}}function Bo(e){let t,n;return t=new Ne({props:{login:e[0],logout:e[1],$$slots:{default:[Uo]},$$scope:{ctx:e}}}),{c(){le(t.$$.fragment)},m(e,r){ue(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.login=e[0]),2&n&&(r.logout=e[1]),28&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(re(t.$$.fragment,e),n=!0)},o(e){oe(t.$$.fragment,e),n=!1},d(e){he(t,e)}}}function qo(e,t,n){let{login:r}=t,{logout:o}=t,{org:i}=t,{repo:s}=t;return e.$$set=e=>{"login"in e&&n(0,r=e.login),"logout"in e&&n(1,o=e.logout),"org"in e&&n(2,i=e.org),"repo"in e&&n(3,s=e.repo)},[r,o,i,s]}class Fo extends de{constructor(e){super(),fe(this,e,qo,Bo,l,{login:0,logout:1,org:2,repo:3})}}function Ro(e){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(e)}function Ho(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Yo(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ko(e){Yo(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Ro(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Wo(e,t){Yo(2,arguments);var n=Ko(e).getTime(),r=Ho(t);return new Date(n+r)}var Jo={};function zo(){return Jo}function Vo(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Go(e){Yo(1,arguments);var t=Ko(e);return t.setHours(0,0,0,0),t}function Xo(e,t){Yo(2,arguments);var n=Go(e),r=Go(t),o=n.getTime()-Vo(n),i=r.getTime()-Vo(r);return Math.round((o-i)/864e5)}function Qo(e,t){Yo(2,arguments);var n=Ko(e),r=Ko(t),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}function Zo(e){return Yo(1,arguments),e instanceof Date||"object"===Ro(e)&&"[object Date]"===Object.prototype.toString.call(e)}function ei(e){if(Yo(1,arguments),!Zo(e)&&"number"!=typeof e)return!1;var t=Ko(e);return!isNaN(Number(t))}function ti(e,t){Yo(2,arguments);var n=Ko(e),r=Ko(t),o=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return 12*o+i}function ni(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ri(e,t){Yo(2,arguments);var n=Ko(e),r=Ko(t),o=ni(n,r),i=Math.abs(Xo(n,r));n.setDate(n.getDate()-o*i);var s=Number(ni(n,r)===-o),a=o*(i-s);return 0===a?0:a}function oi(e,t){return Yo(2,arguments),Ko(e).getTime()-Ko(t).getTime()}var ii={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function si(e){return e?ii[e]:ii.trunc}function ai(e){Yo(1,arguments);var t=Ko(e);return t.setHours(23,59,59,999),t}function ci(e){Yo(1,arguments);var t=Ko(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function li(e){Yo(1,arguments);var t=Ko(e);return ai(t).getTime()===ci(t).getTime()}function ui(e,t){Yo(2,arguments);var n,r=Ko(e),o=Ko(t),i=Qo(r,o),s=Math.abs(ti(r,o));if(s<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);var a=Qo(r,o)===-i;li(Ko(e))&&1===s&&1===Qo(e,o)&&(a=!1),n=i*(s-Number(a))}return 0===n?0:n}function hi(e,t,n){Yo(2,arguments);var r=oi(e,t)/1e3;return si(null==n?void 0:n.roundingMethod)(r)}function fi(e,t){Yo(2,arguments);var n=Ho(t);return Wo(e,-n)}function di(e){Yo(1,arguments);var t=1,n=Ko(e),r=n.getUTCDay(),o=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function pi(e){Yo(1,arguments);var t=Ko(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var o=di(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var s=di(i);return t.getTime()>=o.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function mi(e){Yo(1,arguments);var t=pi(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=di(n);return r}function gi(e,t){var n,r,o,i,s,a,c,l;Yo(1,arguments);var u=zo(),h=Ho(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==r?r:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ko(e),d=f.getUTCDay(),p=(d<h?7:0)+d-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function yi(e,t){var n,r,o,i,s,a,c,l;Yo(1,arguments);var u=Ko(e),h=u.getUTCFullYear(),f=zo(),d=Ho(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:f.firstWeekContainsDate)&&void 0!==r?r:null===(c=f.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,d),p.setUTCHours(0,0,0,0);var m=gi(p,t),g=new Date(0);g.setUTCFullYear(h,0,d),g.setUTCHours(0,0,0,0);var y=gi(g,t);return u.getTime()>=m.getTime()?h+1:u.getTime()>=y.getTime()?h:h-1}function bi(e,t){var n,r,o,i,s,a,c,l;Yo(1,arguments);var u=zo(),h=Ho(null!==(n=null!==(r=null!==(o=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(a=s.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==r?r:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1),f=yi(e,t),d=new Date(0);d.setUTCFullYear(f,0,h),d.setUTCHours(0,0,0,0);var p=gi(d,t);return p}function vi(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var wi={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return vi("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):vi(n+1,2)},d:function(e,t){return vi(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return vi(e.getUTCHours()%12||12,t.length)},H:function(e,t){return vi(e.getUTCHours(),t.length)},m:function(e,t){return vi(e.getUTCMinutes(),t.length)},s:function(e,t){return vi(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return vi(Math.floor(r*Math.pow(10,n-3)),t.length)}},ki=wi,Ei="midnight",Si="noon",xi="morning",Ti="afternoon",Ni="evening",$i="night",Oi={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return ki.y(e,t)},Y:function(e,t,n,r){var o=yi(e,r),i=o>0?o:1-o;return"YY"===t?vi(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):vi(i,t.length)},R:function(e,t){return vi(pi(e),t.length)},u:function(e,t){return vi(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return vi(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return vi(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return ki.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return vi(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var o=function(e,t){Yo(1,arguments);var n=Ko(e),r=gi(n,t).getTime()-bi(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(o,{unit:"week"}):vi(o,t.length)},I:function(e,t,n){var r=function(e){Yo(1,arguments);var t=Ko(e),n=di(t).getTime()-mi(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):vi(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):ki.d(e,t)},D:function(e,t,n){var r=function(e){Yo(1,arguments);var t=Ko(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),o=n-r;return Math.floor(o/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):vi(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var o=e.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vi(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var o=e.getUTCDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vi(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),o=0===r?7:r;switch(t){case"i":return String(o);case"ii":return vi(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,o=e.getUTCHours();switch(r=12===o?Si:0===o?Ei:o/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,o=e.getUTCHours();switch(r=o>=17?Ni:o>=12?Ti:o>=4?xi:$i,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ki.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ki.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):vi(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):vi(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ki.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ki.s(e,t)},S:function(e,t){return ki.S(e,t)},X:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();if(0===o)return"Z";switch(t){case"X":return Ai(o);case"XXXX":case"XX":return Mi(o);default:return Mi(o,":")}},x:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return Ai(o);case"xxxx":case"xx":return Mi(o);default:return Mi(o,":")}},O:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ci(o,":");default:return"GMT"+Mi(o,":")}},z:function(e,t,n,r){var o=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ci(o,":");default:return"GMT"+Mi(o,":")}},t:function(e,t,n,r){var o=r._originalDate||e;return vi(Math.floor(o.getTime()/1e3),t.length)},T:function(e,t,n,r){return vi((r._originalDate||e).getTime(),t.length)}};function Ci(e,t){var n=e>0?"-":"+",r=Math.abs(e),o=Math.floor(r/60),i=r%60;if(0===i)return n+String(o);var s=t||"";return n+String(o)+s+vi(i,2)}function Ai(e,t){return e%60==0?(e>0?"-":"+")+vi(Math.abs(e)/60,2):Mi(e,t)}function Mi(e,t){var n=t||"",r=e>0?"-":"+",o=Math.abs(e);return r+vi(Math.floor(o/60),2)+n+vi(o%60,2)}var _i=Oi,Li=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Ii=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ji={p:Ii,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],o=r[1],i=r[2];if(!i)return Li(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Li(o,t)).replace("{{time}}",Ii(i,t))}},Di=ji,Pi=["D","DD"],Ui=["YY","YYYY"];function Bi(e){return-1!==Pi.indexOf(e)}function qi(e){return-1!==Ui.indexOf(e)}function Fi(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Ri={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hi=function(e,t,n){var r,o=Ri[e];return r="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Yi(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var Ki={date:Yi({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Yi({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Yi({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Wi={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ji=function(e,t,n,r){return Wi[e]};function zi(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,i=null!=n&&n.width?String(n.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{var s=e.defaultWidth,a=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Vi(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;var s,a=i[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?Xi(c,(function(e){return e.test(a)})):Gi(c,(function(e){return e.test(a)}));s=e.valueCallback?e.valueCallback(l):l,s=n.valueCallback?n.valueCallback(s):s;var u=t.slice(a.length);return{value:s,rest:u}}}function Gi(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function Xi(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function Qi(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var o=r[0],i=t.match(e.parsePattern);if(!i)return null;var s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;var a=t.slice(o.length);return{value:s,rest:a}}}var Zi={code:"en-US",formatDistance:Hi,formatLong:Ki,formatRelative:Ji,localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:zi({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:zi({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:zi({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:zi({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:zi({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Qi({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Vi({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Vi({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Vi({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vi({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vi({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},es=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ts=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ns=/^'([^]*?)'?$/,rs=/''/g,os=/[a-zA-Z]/;function is(e,t,n){var r,o,i,s,a,c,l,u,h,f,d,p,m,g,y,b,v,w;Yo(2,arguments);var k=String(t),E=zo(),S=null!==(r=null!==(o=null==n?void 0:n.locale)&&void 0!==o?o:E.locale)&&void 0!==r?r:Zi,x=Ho(null!==(i=null!==(s=null!==(a=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(l=n.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:E.firstWeekContainsDate)&&void 0!==s?s:null===(h=E.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==i?i:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=Ho(null!==(d=null!==(p=null!==(m=null!==(g=null==n?void 0:n.weekStartsOn)&&void 0!==g?g:null==n||null===(y=n.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==m?m:E.weekStartsOn)&&void 0!==p?p:null===(v=E.locale)||void 0===v||null===(w=v.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==d?d:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var N=Ko(e);if(!ei(N))throw new RangeError("Invalid time value");var $=Vo(N),O=fi(N,$),C={firstWeekContainsDate:x,weekStartsOn:T,locale:S,_originalDate:N},A=k.match(ts).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Di[t])(e,S.formatLong):e})).join("").match(es).map((function(r){if("''"===r)return"'";var o=r[0];if("'"===o)return ss(r);var i=_i[o];if(i)return null!=n&&n.useAdditionalWeekYearTokens||!qi(r)||Fi(r,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!Bi(r)||Fi(r,t,String(e)),i(O,r,S.localize,C);if(o.match(os))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return r})).join("");return A}function ss(e){var t=e.match(ns);return t?t[1].replace(rs,"'"):e}function as(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function cs(e){return as({},e)}function ls(e,t,n){var r,o;Yo(2,arguments);var i=zo(),s=null!==(r=null!==(o=null==n?void 0:n.locale)&&void 0!==o?o:i.locale)&&void 0!==r?r:Zi;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=Qo(e,t);if(isNaN(a))throw new RangeError("Invalid time value");var c,l,u=as(cs(n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:a});a>0?(c=Ko(t),l=Ko(e)):(c=Ko(e),l=Ko(t));var h,f=hi(l,c),d=(Vo(l)-Vo(c))/1e3,p=Math.round((f-d)/60);if(p<2)return null!=n&&n.includeSeconds?f<5?s.formatDistance("lessThanXSeconds",5,u):f<10?s.formatDistance("lessThanXSeconds",10,u):f<20?s.formatDistance("lessThanXSeconds",20,u):f<40?s.formatDistance("halfAMinute",0,u):f<60?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",1,u):0===p?s.formatDistance("lessThanXMinutes",1,u):s.formatDistance("xMinutes",p,u);if(p<45)return s.formatDistance("xMinutes",p,u);if(p<90)return s.formatDistance("aboutXHours",1,u);if(p<1440){var m=Math.round(p/60);return s.formatDistance("aboutXHours",m,u)}if(p<2520)return s.formatDistance("xDays",1,u);if(p<43200){var g=Math.round(p/1440);return s.formatDistance("xDays",g,u)}if(p<86400)return h=Math.round(p/43200),s.formatDistance("aboutXMonths",h,u);if((h=ui(l,c))<12){var y=Math.round(p/43200);return s.formatDistance("xMonths",y,u)}var b=h%12,v=Math.floor(h/12);return b<3?s.formatDistance("aboutXYears",v,u):b<9?s.formatDistance("overXYears",v,u):s.formatDistance("almostXYears",v+1,u)}function us(e,t){return Yo(1,arguments),ls(e,Date.now(),t)}var hs={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},fs=function(e,t,n){var r,o=hs[e];return r="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},ds={date:Yi({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:Yi({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Yi({formats:{full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ps={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},ms=function(e,t,n,r){return ps[e]},gs={code:"fr",formatDistance:fs,formatLong:ds,formatRelative:ms,localize:{ordinalNumber:function(e,t){var n=Number(e),r=null==t?void 0:t.unit;if(0===n)return"0";return n+(1===n?r&&["year","week","hour","minute","second"].includes(r)?"ère":"er":"ème")},era:zi({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},defaultWidth:"wide"}),quarter:zi({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:zi({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},defaultWidth:"wide"}),day:zi({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:zi({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},match:{ordinalNumber:Qi({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:Vi({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:Vi({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Vi({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vi({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vi({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};function ys(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let o of e)(o=+t(o,++r,e))&&(n+=o)}return n}function bs(e){let t;return{c(){t=E("div"),$(t,"class","lds-dual-ring svelte-c2xuas")},m(e,n){v(e,t,n)},p:r,i:r,o:r,d(e){e&&w(t)}}}class vs extends de{constructor(e){super(),fe(this,e,null,bs,l,{})}}function ws(e,t,n){const r=e.slice();return r[34]=t[n],r}function ks(e){let t,n,r,o,i,s=Ls(e[3]),a=[];for(let t=0;t<s.length;t+=1)a[t]=Es(ws(e,s,t));return{c(){t=E("main"),n=E("table"),r=E("thead"),r.innerHTML='<tr class="svelte-lazdgp"><th class="svelte-lazdgp">Date</th> \n                        <th class="svelte-lazdgp">Client</th> \n                        <th class="svelte-lazdgp">Montant total</th> \n                        <th class="svelte-lazdgp">(dont montant HT)</th> \n                        <th class="svelte-lazdgp"></th></tr>',o=x(),i=E("tbody");for(let e=0;e<a.length;e+=1)a[e].c();$(r,"class","svelte-lazdgp"),$(n,"class","svelte-lazdgp"),$(t,"class","svelte-lazdgp")},m(e,s){v(e,t,s),g(t,n),g(n,r),g(n,o),g(n,i);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(i,null)},p(e,t){if(116744&t[0]){let n;for(s=Ls(e[3]),n=0;n<s.length;n+=1){const r=ws(e,s,n);a[n]?a[n].p(r,t):(a[n]=Es(r),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}},d(e){e&&w(t),k(a,e)}}}function Es(e){let t,n,r,o,i,s,c,l,u,h,f,d,p,m,y,b,k,T,O,A,_,L,I,j,D=e[14](e[34].date)+"",P=e[34].compteClient+"",U=ys(e[34].opérations.map(Is))+"",B=ys(e[34].opérations.filter(js).map(Ds))+"";function q(...t){return e[23](e[34],...t)}function F(...t){return e[24](e[34],...t)}return{c(){t=E("tr"),n=E("td"),r=S(D),i=x(),s=E("td"),c=S(P),l=x(),u=E("td"),h=S(U),f=S(" €"),d=x(),p=E("td"),m=S(B),y=S(" €"),b=x(),k=E("td"),T=E("button"),O=S("Supprimer"),L=x(),$(n,"title",o=is(e[34].date,"d MMMM yyyy",{locale:gs})),$(n,"class","svelte-lazdgp"),$(s,"class","svelte-lazdgp"),$(u,"class","svelte-lazdgp"),$(p,"class","svelte-lazdgp"),T.disabled=A=void 0!==e[11],$(T,"title",_=void 0!==e[11]?"Il faut enregistrer ou abandonner les modifications avant de pouvoir supprimer cette facture":""),$(k,"class","svelte-lazdgp"),$(t,"class","svelte-lazdgp"),M(t,"edition",e[11]===e[34])},m(e,o){v(e,t,o),g(t,n),g(n,r),g(t,i),g(t,s),g(s,c),g(t,l),g(t,u),g(u,h),g(u,f),g(t,d),g(t,p),g(p,m),g(p,y),g(t,b),g(t,k),g(k,T),g(T,O),g(t,L),I||(j=[N(T,"click",q),N(t,"click",F)],I=!0)},p(i,s){e=i,8&s[0]&&D!==(D=e[14](e[34].date)+"")&&C(r,D),8&s[0]&&o!==(o=is(e[34].date,"d MMMM yyyy",{locale:gs}))&&$(n,"title",o),8&s[0]&&P!==(P=e[34].compteClient+"")&&C(c,P),8&s[0]&&U!==(U=ys(e[34].opérations.map(Is))+"")&&C(h,U),8&s[0]&&B!==(B=ys(e[34].opérations.filter(js).map(Ds))+"")&&C(m,B),2048&s[0]&&A!==(A=void 0!==e[11])&&(T.disabled=A),2048&s[0]&&_!==(_=void 0!==e[11]?"Il faut enregistrer ou abandonner les modifications avant de pouvoir supprimer cette facture":"")&&$(T,"title",_),2056&s[0]&&M(t,"edition",e[11]===e[34])},d(e){e&&w(t),I=!1,a(j)}}}function Ss(e){let t;return{c(){t=E("p"),t.textContent="Sélectionne une facture dans la liste pour voir toutes ses informations ou les modifier.",$(t,"class","etat-vide svelte-lazdgp")},m(e,n){v(e,t,n)},p:r,i:r,o:r,d(e){e&&w(t)}}}function xs(e){let t,n,r,o,i,s,c,l,u,h,f,d,p,m,y,b,k,S,T,C,M,_,L,I,j,D,P,U,B,q,F,R,H,Y,K,W,J,z,V,G,X,Q,Z,ee;function te(e,t){return e[5]?Ns:Ts}let ne=te(e),ie=ne(e),se={ctx:e,current:null,token:null,hasCatch:!0,pending:Cs,then:Os,catch:$s,error:33,blocks:[,,,]};return ae(z=e[12],se),{c(){t=E("header"),ie.c(),n=x(),r=E("form"),o=E("fieldset"),i=E("label"),s=E("div"),s.textContent="Client",c=x(),l=E("input"),u=x(),h=E("label"),f=E("div"),f.textContent="Identifiant de facture",d=x(),p=E("input"),m=x(),y=E("label"),b=E("div"),b.textContent="Date",k=x(),S=E("input"),T=x(),C=E("label"),M=E("div"),M.textContent="Montant HT (€)",_=x(),L=E("input"),I=x(),j=E("label"),D=E("div"),D.textContent="Montant TVA (€)",P=x(),U=E("input"),B=x(),q=E("label"),F=E("div"),F.textContent="Compte Produit",R=x(),H=E("input"),Y=x(),K=E("div"),W=E("button"),W.textContent="Enregistrer",J=x(),se.block.c(),V=x(),G=E("button"),G.textContent="Abandonner les modifications",$(t,"class","form-header svelte-lazdgp"),$(l,"placeholder","411xxxx"),$(l,"class","svelte-lazdgp"),$(p,"type","text"),$(p,"class","svelte-lazdgp"),$(S,"type","date"),$(S,"class","svelte-lazdgp"),$(L,"step","0.01"),$(L,"type","number"),$(L,"class","svelte-lazdgp"),$(U,"step","0.01"),$(U,"type","number"),$(U,"class","svelte-lazdgp"),$(H,"placeholder","706xxx"),$(H,"class","svelte-lazdgp"),$(W,"type","submit"),$(K,"class","button-with-loader svelte-lazdgp"),o.disabled=X=_s(e[12]),$(r,"class","svelte-lazdgp")},m(a,w){var E;v(a,t,w),ie.m(t,null),v(a,n,w),v(a,r,w),g(r,o),g(o,i),g(i,s),g(i,c),g(i,l),e[25](l),A(l,e[4]),g(o,u),g(o,h),g(h,f),g(h,d),g(h,p),A(p,e[5]),g(o,m),g(o,y),g(y,b),g(y,k),g(y,S),A(S,e[6]),g(o,T),g(o,C),g(C,M),g(C,_),g(C,L),A(L,e[7]),g(o,I),g(o,j),g(j,D),g(j,P),g(j,U),A(U,e[8]),g(o,B),g(o,q),g(q,F),g(q,R),g(q,H),A(H,e[9]),g(o,Y),g(o,K),g(K,W),g(K,J),se.block.m(K,se.anchor=null),se.mount=()=>K,se.anchor=null,g(o,V),g(o,G),Q=!0,Z||(ee=[N(l,"input",e[26]),N(p,"input",e[27]),N(S,"input",e[28]),N(L,"input",e[29]),N(U,"input",e[30]),N(H,"input",e[31]),N(G,"click",e[17]),N(r,"submit",(E=e[13],function(e){return e.preventDefault(),E.call(this,e)}))],Z=!0)},p(n,r){ne===(ne=te(e=n))&&ie?ie.p(e,r):(ie.d(1),ie=ne(e),ie&&(ie.c(),ie.m(t,null))),16&r[0]&&l.value!==e[4]&&A(l,e[4]),32&r[0]&&p.value!==e[5]&&A(p,e[5]),64&r[0]&&A(S,e[6]),128&r[0]&&O(L.value)!==e[7]&&A(L,e[7]),256&r[0]&&O(U.value)!==e[8]&&A(U,e[8]),512&r[0]&&H.value!==e[9]&&A(H,e[9]),se.ctx=e,4096&r[0]&&z!==(z=e[12])&&ae(z,se)||ce(se,e,r),(!Q||4096&r[0]&&X!==(X=_s(e[12])))&&(o.disabled=X)},i(e){Q||(re(se.block),Q=!0)},o(e){for(let e=0;e<3;e+=1){oe(se.blocks[e])}Q=!1},d(o){o&&w(t),ie.d(),o&&w(n),o&&w(r),e[25](null),se.block.d(),se.token=null,se=null,Z=!1,a(ee)}}}function Ts(e){let t;return{c(){t=E("h2"),t.textContent="Facture (sans identifiant)"},m(e,n){v(e,t,n)},p:r,d(e){e&&w(t)}}}function Ns(e){let t,n,r,o;return{c(){t=E("h2"),n=S("Facture « "),r=S(e[5]),o=S(" »")},m(e,i){v(e,t,i),g(t,n),g(t,r),g(t,o)},p(e,t){32&t[0]&&C(r,e[5])},d(e){e&&w(t)}}}function $s(e){let t,n,o=e[33]+"";return{c(){t=S("Problème avec l'envoi de la facture "),n=S(o)},m(e,r){v(e,t,r),v(e,n,r)},p(e,t){4096&t[0]&&o!==(o=e[33]+"")&&C(n,o)},i:r,o:r,d(e){e&&w(t),e&&w(n)}}}function Os(e){return{c:r,m:r,p:r,i:r,o:r,d:r}}function Cs(e){let t,n;return t=new vs({}),{c(){le(t.$$.fragment)},m(e,r){ue(t,e,r),n=!0},p:r,i(e){n||(re(t.$$.fragment,e),n=!0)},o(e){oe(t.$$.fragment,e),n=!1},d(e){he(t,e)}}}function As(e){let t,n,r,o,i,s,a,c,l,u,h,f,d,p,m,y=e[3]&&ks(e);const b=[xs,Ss],k=[];function T(e,t){return e[11]?0:1}return h=T(e),f=k[h]=b[h](e),{c(){t=E("div"),n=E("header"),r=E("h1"),o=S("Voici la liste des factures pour \n                "),i=E("code"),s=S(e[2]),a=x(),c=E("button"),c.textContent="Nouvelle facture",l=x(),y&&y.c(),u=x(),f.c(),$(r,"class","svelte-lazdgp"),$(c,"title","Alt+N"),$(n,"class","table-header svelte-lazdgp"),$(t,"class","tableau-editable svelte-lazdgp")},m(f,b){v(f,t,b),g(t,n),g(n,r),g(r,o),g(r,i),g(i,s),g(n,a),g(n,c),g(t,l),y&&y.m(t,null),g(t,u),k[h].m(t,null),d=!0,p||(m=N(c,"click",e[18]),p=!0)},p(e,n){(!d||4&n[0])&&C(s,e[2]),e[3]?y?y.p(e,n):(y=ks(e),y.c(),y.m(t,u)):y&&(y.d(1),y=null);let r=h;h=T(e),h===r?k[h].p(e,n):(te(),oe(k[r],1,1,(()=>{k[r]=null})),ne(),f=k[h],f?f.p(e,n):(f=k[h]=b[h](e),f.c()),re(f,1),f.m(t,null))},i(e){d||(re(f),d=!0)},o(e){oe(f),d=!1},d(e){e&&w(t),y&&y.d(),k[h].d(),p=!1,m()}}}function Ms(e){let t,n,r,o;return t=new Ne({props:{login:e[0],logout:e[1],fullwidth:!0,$$slots:{default:[As]},$$scope:{ctx:e}}}),{c(){le(t.$$.fragment)},m(i,s){ue(t,i,s),n=!0,r||(o=N(window,"keydown",e[19]),r=!0)},p(e,n){const r={};1&n[0]&&(r.login=e[0]),2&n[0]&&(r.logout=e[1]),8188&n[0]|64&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(re(t.$$.fragment,e),n=!0)},o(e){oe(t.$$.fragment,e),n=!1},d(e){he(t,e),r=!1,o()}}}function _s(e){return e===Object(e)&&"function"==typeof e.then}function Ls(e){return e.sort(((e,t)=>t.date-e.date))}const Is=({montant:e})=>e,js=({compte:e})=>"44566"!==e,Ds=({montant:e})=>e;function Ps(e,t,n){let r,o,i,s,a,c,l,u,h,{login:f}=t,{logout:d}=t,{org:p}=t,{"envoiFactureàClients":m}=t,{"supprimerEnvoiFactureÀClient":g}=t,{"sauvegarderEnvoiFactureÀClient":y}=t,{"créerEnvoiFactureÀClientVide":b}=t;function v(e){g(e)}async function w(e){n(11,u=e),function(){n(4,r=u.compteClient),n(5,o=u.numéroFacture),n(6,i=is(u.date,"yyyy-MM-dd"));const e=(e,t)=>e+t.montant;n(7,s=u.opérations.filter((e=>"44566"!==e.compte)).reduce(e,0)),n(8,a=u.opérations.filter((e=>"44566"===e.compte)).reduce(e,0)),n(9,c=u.opérations.find((e=>"44566"!==e.compte)).compte)}(),await(K(),H),l&&l.focus(),document.querySelector(".edition").scrollIntoView({behavior:"smooth",block:"end"})}function k(){w(b())}return e.$$set=e=>{"login"in e&&n(0,f=e.login),"logout"in e&&n(1,d=e.logout),"org"in e&&n(2,p=e.org),"envoiFactureàClients"in e&&n(3,m=e.envoiFactureàClients),"supprimerEnvoiFactureÀClient"in e&&n(20,g=e.supprimerEnvoiFactureÀClient),"sauvegarderEnvoiFactureÀClient"in e&&n(21,y=e.sauvegarderEnvoiFactureÀClient),"créerEnvoiFactureÀClientVide"in e&&n(22,b=e.créerEnvoiFactureÀClientVide)},[f,d,p,m,r,o,i,s,a,c,l,u,h,function(){n(12,h=y({"identifiantOpération":u.identifiantOpération,compteClient:r,identifiantFacture:o,dateFacture:i,montantHT:s,montantTVA:a,compteProduit:c})),h.then((()=>{n(12,h=void 0),n(11,u=void 0)}))},function(e){return 0===ri(e,new Date)?"Aujourd'hui":ri(e,new Date)>0?`dans ${us(e,{locale:gs})}`:ui(e,new Date)>-3?`il y a ${us(e,{locale:gs})}`:is(e,"d MMMM yyyy",{locale:gs})},v,w,function(){n(11,u=void 0)},k,function(e){if(e.altKey&&"n"===e.key)return void k();const t="ArrowDown"===e.key,n="ArrowUp"===e.key;if(n||t){let e=m.findIndex((e=>u&&e.identifiantOpération===u.identifiantOpération));void 0===e&&(e=-1),t&&e++,n&&e--,e<0&&(e=0),e>=m.length&&(e=m.length-1),w(m[e])}},g,y,b,(e,t)=>v(e),(e,t)=>w(e),function(e){q[e?"unshift":"push"]((()=>{l=e,n(10,l)}))},function(){r=this.value,n(4,r)},function(){o=this.value,n(5,o)},function(){i=this.value,n(6,i)},function(){s=O(this.value),n(7,s)},function(){a=O(this.value),n(8,a)},function(){c=this.value,n(9,c)}]}class Us extends de{constructor(e){super(),fe(this,e,Ps,Ms,l,{login:0,logout:1,org:2,"envoiFactureàClients":3,"supprimerEnvoiFactureÀClient":20,"sauvegarderEnvoiFactureÀClient":21,"créerEnvoiFactureÀClientVide":22},null,[-1,-1])}}function Bs(e){return t="comptanar_github_access_token",void 0===(n=e)?Promise.resolve().then((()=>{const e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return e}})):Promise.resolve().then((()=>{let e=Object(n)===n?JSON.stringify(n):n;return localStorage.setItem(t,e),t}));var t,n}function qs(){return e="comptanar_github_access_token",Promise.resolve().then((()=>{localStorage.removeItem(e)}));var e}const Fs=function({state:e,mutations:t}){let n=e;const r=new Set;let o=!1;return{get state(){return n},mutations:function e(t,i=[]){return new Proxy(t,{get(t,n){if(n in t)return e(t[n],[...i,n]);throw new TypeError(`No ${n} property in \`mutations.${i.join(".")}\``)},apply(e,t,s){if("function"!=typeof e)throw new TypeError(`\`mutations.${i.join(".")}\` is not a function`);{const t=Reflect.apply(e,void 0,[n,...s]);return void 0!==t&&(n=t),o||(o=!0,Promise.resolve().then((()=>{for(const e of r)try{e(n)}catch(e){console.error("subscriber error",e)}o=!1}))),t}}})}(t),subscribe:e=>(r.add(e),()=>{r.delete(e)})}}({state:{githubToken:await Bs(),login:void 0,userOrgs:void 0,org:void 0,repo:void 0,"opérationsHautNiveauByYear":void 0},mutations:{setToken(e,t){e.githubToken=t},setLogin(e,t){e.login=t},setUserOrgs(e,t){e.userOrgs=t},logout(e){e.githubToken=void 0,e.login=void 0,e.userOrgs=void 0},setOrgAndRepo(e,t,n){e.org=t,e.repo=n},"setOpérationsHautNiveauByYear"(e,t){console.log("opérationsHautNiveauByYear",t),e.opérationsHautNiveauByYear=t},"updateOpérationsHautNiveauSha"(e,t,n){const{sha:r,"opérationsHautNiveau":o}=e.opérationsHautNiveauByYear.get(t);e.opérationsHautNiveauByYear.set(t,{sha:n,"opérationsHautNiveau":o})},"supprimerOpérationHautNiveau"(e,t,n){const{sha:r,"opérationsHautNiveau":o}=e.opérationsHautNiveauByYear.get(t);e.opérationsHautNiveauByYear.set(t,{sha:r,"opérationsHautNiveau":o.filter((e=>e.identifiantOpération!=n))})},"updateOpérationsHautNiveau"(e,t,n){const{sha:r,"opérationsHautNiveau":o}=e.opérationsHautNiveauByYear.get(t),i=o.findIndex((e=>e.identifiantOpération===n.identifiantOpération));-1===i?o.push(n):o[i]=n,e.opérationsHautNiveauByYear.set(t,{sha:r,"opérationsHautNiveau":o})}}});function Rs(e){const{"opérationsHautNiveauByYear":t}=e;return t?[...t.values()].map((({"opérationsHautNiveau":e})=>e.filter((e=>"Envoi facture client"===e.type)))).flat(1/0):void 0}function Hs(){return console.info("logout"),Fs.mutations.logout(),go.reset(),qs()}function Ys(e,t){Fs.mutations.setOrgAndRepo(e,t),go.owner=e,go.repo=t;return go.getExercices().then((e=>Fs.mutations.setOpérationsHautNiveauByYear(e)))}function Ks(){const e=new Date;e.getFullYear();return{type:"Envoi facture client","numéroFacture":"",date:e,compteClient:"","identifiantOpération":Math.random().toString(32).slice(2),"opérations":[{compte:"",montant:0,sens:"Débit"},{compte:"44566",montant:0,sens:"Débit"}]}}function Ws({"identifiantOpération":e,date:t,compteClient:n,"numéroFacture":r}){const o=t.getFullYear();Fs.mutations.supprimerOpérationHautNiveau(o,e);const i=Fs.state.opérationsHautNiveauByYear.get(o).sha,s=is(t,"d MMMM yyyy",{locale:gs});return go.writeExercice(o,i,Fs.state.opérationsHautNiveauByYear.get(o).opérationsHautNiveau,`Suppression de la facture ${r} envoyée au client ${n} le ${s}`).then((({data:{content:{sha:e}}})=>Fs.mutations.updateOpérationsHautNiveauSha(o,e)))}function Js({"identifiantOpération":e,compteClient:t,identifiantFacture:n,dateFacture:r,montantHT:o,montantTVA:i,compteProduit:s}){const a=new Date(r),c=a.getFullYear(),l={type:"Envoi facture client","numéroFacture":n,date:a,compteClient:t,"identifiantOpération":e,"opérations":[{compte:s,montant:o,sens:"Débit"},{compte:"44566",montant:i,sens:"Débit"}]};Fs.mutations.updateOpérationsHautNiveau(c,l);const u=Fs.state.opérationsHautNiveauByYear.get(c).sha,h=is(a,"d MMMM yyyy",{locale:gs});return go.writeExercice(c,u,Fs.state.opérationsHautNiveauByYear.get(c).opérationsHautNiveau,`Modification de la facture ${n} envoyée au client ${t} le ${h}`).then((({data:{content:{sha:e}}})=>Fs.mutations.updateOpérationsHautNiveauSha(c,e)))}console.info("start");const zs=document.body;let Vs,Gs=e=>{};function Xs(e,t){if(!t)throw new Error("Missing _mapStateToProps in replaceComponent");Vs&&Vs.$destroy(),Vs=e,Gs=t}function Qs(){Hs().then((()=>n("/")))}Fs.subscribe((function(e){const t=Gs(e);t&&Vs.$set(t)})),n("/",(()=>{function e(e){return{login:e.login,logout:Qs}}console.info("route","/"),Fs.state.login&&(Fs.state.repoName,Promise.resolve(Fs.state.login).then((e=>{console.info("Logged in as",e,"Moving to /choose-organisation"),n("/choose-organisation")})));Xs(new Ae({target:zs,props:e(Fs.state)}),e)})),n("/choose-organisation",(()=>{function e(e){return{login:e.login,logout:Qs,possibleOrganisations:e.userOrgs}}console.info("route","/choose-organisation"),function(){const e=go.getOrgs().then((e=>(Fs.mutations.setUserOrgs(e),e)));Fs.mutations.setUserOrgs(e)}();Xs(new Po({target:zs,props:e(Fs.state)}),e)})),n("/comptabilite/",(({querystring:e})=>{console.info("route","/comptabilite/",e);const t=new URLSearchParams(e),n=t.get("org"),r=t.get("repo");function o(e){return{login:e.login,logout:Qs,org:n,repo:r}}Ys(n,r);Xs(new Fo({target:zs,props:o(Fs.state)}),o)})),n("/comptabilite/factures",(({querystring:e})=>{console.info("route","/comptabilite/factures",e);const t=new URLSearchParams(e),n=t.get("org"),r=t.get("repo");function o(e){return{login:e.login,logout:Qs,org:n,"envoiFactureàClients":Rs(e),"créerEnvoiFactureÀClientVide":Ks,"supprimerEnvoiFactureÀClient":Ws,"sauvegarderEnvoiFactureÀClient":Js}}Ys(n,r);Xs(new Us({target:zs,props:o(Fs.state)}),o)}));const Zs=new URL(location.href),ea=Zs.searchParams.get("access_token");var ta;ea&&(ta=ea,Fs.mutations.setToken(ta),go.token=ta,Bs(ta)).then((()=>{Zs.searchParams.delete("access_token"),history.replaceState(void 0,"",Zs)})).catch((e=>{console.error("Saving token failed",e)})),async function(){if(Fs.state.githubToken){go.token=Fs.state.githubToken;const e=go.getAuthenticatedUser().then((({login:e})=>(Fs.mutations.setLogin(e),e)));return Fs.mutations.setLogin(e),e}return Promise.resolve(void 0)}().catch((e=>{console.error("init dance error",e)})).then((e=>{e?n.start():(n.start({dispatch:!1}),console.info("no valid login found, redirected to / route"),Hs().then((()=>n("/"))))}));
